var ta="undefined"!=typeof window&&window.ta||{},define,require;ta.rollupAmdShim=ta.rollupAmdShim||function(){function e(e,i){var t,o,d,f;if(!window.overrideRequire){for(t=0;e&&e.length&&t<e.length;++t)w[e[t]]=!0;for(t=0;i&&i.length&&t<i.length;++t)m[i[t]]=!0;var l,u;if(y&&window._dummyDefine&&window._dummyDefine.isDummyDefine&&(l=window._dummyDefine.pendingDefinitions,window._dummyDefine=null,define=null),"undefined"!=typeof require&&require.isDummyRequire){u=require.pendingRequirements;var a=require.pendingConfigs;if(a&&a.length)for(t=0;t<a.length;t++)f=a[t],r.config.apply(null,f);require=null}if("function"==typeof define&&define.isTaRollupShim||(E="function"==typeof define?define:null,define=n),"function"==typeof require&&require.isTaRollupShim||(O="function"==typeof require?require:null,require=r),l&&l.length)for(t=0;t<l.length;t++)o=l[t],n.apply(null,o);if(u&&u.length)for(t=0;t<u.length;t++)d=u[t],r.apply(null,d)}}function n(e,r,t,d){var f,l,a=[];if("function"==typeof r&&void 0===t&&void 0===d&&(t=r,r=[]),"string"==typeof e&&"object"==typeof r&&"function"==typeof t){if(D.hasOwnProperty(e)||v[e]&&v[e].deps)return;if(l=i(r,a))try{f=t.apply(null,l),u(e,f)}catch(e){P("Error in require callback: ",e)}else o(a,{deps:r,cb:t,defname:e},n.depLoader)}else{if(E)return E(e,r,t,d);P("invalid args for AMD define: "+typeof e+", "+typeof r+", "+typeof t)}}function r(e,r,d,f){var l=null;if("string"==typeof e&&"function"!=typeof r){try{l=i([e]),!l&&O&&(l=[O(e,r,d,f)])}catch(e){}if(!l)throw t(e);return l[0]}if("object"==typeof e&&"function"==typeof r){var u=[];if(l=i(e,u))try{r.apply(null,l)}catch(e){P("Error in require callback: ",e)}else o(u,{deps:e,cb:r,eb:"function"==typeof d&&d},n.depLoader)}else{if(O)return O(e,r,d,f);P("invalid args for AMD require: "+typeof e+", "+typeof r+". Expected either a string-literal singular dependency (i.e. synchronous) or an array of dependencies with a callback function (i.e. async).")}}function i(e,n){var r,i,t,o,d=[];for(r=0;r<e.length;++r)if(i=e[r],o=null,i)if(D.hasOwnProperty(i))o=D[i],d.push(o);else if(m[i]){for(t=i.split("/"),"underscore"===t[0]&&(t[0]="_"),o="undefined"!=typeof window&&window;t.length>1&&o;o=o[t.shift()]);t.length>0&&o&&(o=o[t[0]]||o[t[0].toLowerCase()]),o?(D[i]=o,d.push(o)):n.push(i)}else n&&n.push(i);else d.push(null);if(d.length===e.length)return d}function t(e){var n,r,i,t,o="Missing immediately required dependency: "+e;for(n=0;n<10;n++){var d=v[e];if(!d){o+=" (not specified)";break}if(d.error){o+=" ("+d.error+")";break}if(e=null,t=d.deps)for(r=0;r<t.length;r++)if(i=t[r],!D.hasOwnProperty(i)){e=i;break}if(!e)break;o+=" -> "+e}var f=new Error(o);return y&&!window.IS_DEBUG||!g||y&&null===window.require.caller&&/^R|react$/.test(e)||g.error(f),f}function o(e,n,t){var u,a,s,p,c,h,y,g=[],w=[],m=[];n.deps=n.deps||[],n.defname&&(p=v[n.defname],v[n.defname]=n,p&&p!==n&&p.needers&&p.needers.length&&(n.needers=(p.needers||[]).concat(n.needers||[])));for(var c=0;c<e.length;c++)u=e[c],h=u.lastIndexOf("!"),h>=0?(g.push(u.substring(0,h)),w.push(u.substring(h+1))):(g.push(null),w.push(u));if(g=i(g,m),!g)return o(m,n);for(var c=0;c<e.length;c++)if(a=g[c],s=v[e[c]],!s&&!D.hasOwnProperty(e[c])){s={defname:e[c]},v[e[c]]=s;var E=f(s),M=l(s);E.error=M;try{if(a)a.load(w[c],r,E,{});else if(t)t(w[c],r,E,{});else{if(!O||O.taVer)throw new Error("no loader for AMD module '"+s.defname+"'");O([s.defname],E,M)}y=!0}catch(e){n.error=e,M(e)}}n.need=0;for(var c=0;c<e.length;c++)u=e[c],s=v[u],!s||D.hasOwnProperty(u)||s.error||(s.needers=s.needers||[],s.needers.push(n),n.need+=1);!n.need&&y&&(b.push(n),q||(q=setTimeout(d,0)))}function d(){var e,n,r,t;for(q=-1;b.length>0;){var d=b.shift();if(d)try{if(d.error){d.defname&&a(d.defname);continue}if(n=[],t="string"==typeof d.deps?[d.deps]:d.deps,e=i(t||[],n),n.length>0){o(n,d);continue}r=null,d.cb&&(r=d.cb.apply(null,e)),d.deps=[],d.cb=null,d.defname&&u(d.defname,r)}catch(e){P("Error propagating dependency resolutions: ",e)}}q=null}function f(e){return function(n){e.defname&&u(e.defname,n)}}function l(e){return function(n){e.defname&&(e.error="Error loading '"+e.defname+"': "+n,P(e.error),e.need=0,e.deps=[],a(e.defname))}}function u(e,n){if(!D[e]){var r=v[e];if(D[e]=n,delete v[e],w[e]){var i,t=e.split("/"),o=ta;for("ta"===t[0]&&t.shift();t.length>1;)i=t.shift(),o[i]||(o[i]={}),o=o[i];t.length>0&&(i=t.shift(),i in o||i.toLowerCase()in o||(o[i]=n,o[i.toLowerCase()]=n))}if(E&&E(e,[],s(n)),r)for(;r.needers&&r.needers.length>0;){var f=r.needers.shift();f.need-=1,f.need||b.push(f)}b.length&&!q&&(q=setTimeout(d,0))}}function a(e){var n=v[e];if(n){var r=n.eb;for(n.deps=null,n.cb=null,n.eb=null,n.error||(n.error="Error loading '"+n.defname+"'");n.needers&&n.needers.length>0;){var i=n.needers.shift();i.error="Failed to load AMD module '"+e+"' which is depended upon by '"+i.defname+"'",i.need>0&&(i.need=0,b.push(i)),y&&!window.IS_DEBUG||!g||g.error(i.error)}if(null!=r)try{r(n.error)}catch(e){}}b.length&&!q&&(q=setTimeout(d,0))}function s(e){return function(){return e}}function p(e){return e&&(e.indexOf("trjs!")!==-1||e.indexOf("trcss!")!==-1||e.indexOf("trhtml!")!==-1||e.indexOf("trdust!")!==-1)}function c(){return!("undefined"!=typeof ta&&ta.page&&ta.page.loadDeferred)}function h(){var e,n,r,t,o;if(q)return void setTimeout(h,0);if(M=!0,v&&c())for(e in v)if(v.hasOwnProperty(e)){if(n=v[e],t=[],o=[],p(n.defname))continue;if(v.hasOwnProperty("trjs!"+n.defname))continue;if(n.deps&&n.deps.length){for(r=0;r<n.deps.length;r++)p(n.deps[r])||t.push(n.deps[r]);if(i(t,o),0===o.length)continue}P("Page 'load' event fired but we have not resolved the '"+n.defname+"' AMD module"+(n.deps&&n.deps.length?" due to missing dependencies: "+o:""))}}var y="undefined"!=typeof window,g=y&&window.console||"undefined"!=typeof console&&console||void 0,w={},m={},v={},b=[],q=null,D={ta:ta},E=null,O=null,M=!1,P=function(e,n){if("undefined"!=typeof __SERVER__)throw n;g&&g.error.apply&&g.error.apply(g,arguments),g&&!g.error.apply&&g.error&&g.error([].slice.apply(arguments))};n.amd=!0,n.isTaRollupShim=!0,n.depLoader=function(){},n.depLoader.isDefault=!0,r.isTaRollupShim=!0,r.undef=function(e){delete D[e];var n=v[e];n&&n.deps&&(n.deps=[],n.cb=null,n.defname=null,delete v[e])},r.config=function(){O&&O.config&&O.config.apply(O,arguments)},r.defined=function(e){return!!D.hasOwnProperty(e)||!v.hasOwnProperty(e)&&(O&&O.defined&&O.defined(e))},r.parsed=function(e){return!!D.hasOwnProperty(e)||v[e]&&v[e].deps},r.specified=function(e){return!(!D.hasOwnProperty(e)&&!v[e])||O&&O.specified&&O.specified(e)},y&&window.IS_DEBUG&&(window.addEventListener?window.addEventListener("load",h,!1):window.attachEvent&&window.attachEvent("onload",h));var _={install:e,reportMissing:h,define:n,require:r,initializedModules:D,debug:function(){return{globalModuleFlags:w,shimModuleFlags:m,initializedModules:D,pendingModules:v,outer:{require:O,define:E},depLoader:n.depLoader}}};return _.install(),u("ta/rollupAmdShim",_),_}();
require(['ta/rollupAmdShim'], function(rollupAmdShim) {rollupAmdShim.install(["amdloaders","remoteModule"],[]);});
if(window.requirejs && requirejs.taConfig)requirejs.taConfig({"deferred":{},"name":"build/concat/core-amd","files":{"js-amd":{"src":{"amdloaders":1,"remoteModule":1}}},"_":{"baseUrl":"/"}});
define("vanillajs",[],function(){return{}});
define("utils/to-array",["vanillajs"],function(){return function(n){return"number"!=typeof n.length?[n]:Array.prototype.slice.call(n)}});
define("amdloaders",["utils/to-array"],function(e){var t=[],n=[],r=[],o=[],a=[],d=null,i=null,u={},s={},c={},l={},f=null,p=!1,h=1e4,m=!1,w={},v=function(e,t,r){if("@ta/"!==e.substring(0,4)){if(u[e]){if(s[e]&&/^[-a-z]+\.[-_a-zA-Z0-9]+$/.test(e))return}else u[e]=!0,n.push(e);a.push(function(n){n||!t.parsed||t.parsed(e)||(n=new Error("Dynamic load failed to define module '"+e+"'")),n&&r.error&&r.error(n)}),S()}},g=function(e,t,r){u[e]||(u[e]=!0,s[e]||t.specified(e)||n.push(e)),a.push(function(n){var o=t.parsed(e);n||s[e]||o||(n=new Error("Dynamic load failed to define '"+e+"'")),n?r.error&&r.error(n):o||define(e,[],H(!0))}),t([e],r,r.error),S()},y=function(e,n,r){t.push(e),a.push(function(e){e?r.error&&r.error(e):r(!0)}),S()},C=function(e,t,n){r.push(e),a.push(function(r){r||t.specified("trhtml!"+e)||(r=new Error("Dynamic load failed to define content '"+e+"'")),r&&n.error&&n.error(r)}),S()},L=function(e,t,n){c[e]||(c[e]=!0,l[e]||o.push(e)),a.push(function(e){e?n.error&&n.error(e):n(!0)}),S()},L=function(e,t,n){c[e]||(c[e]=!0,l[e]||o.push(e)),a.push(function(e){e?n.error&&n.error(e):n(!0)}),S()},S=function(){!f&&p&&!m&&(a.length||t.length||n.length||r.length||o.length)&&(f=setTimeout(b,0))},E=function(e,t){var n=e.getAttribute("data-rup");if(n){var r;n=n.split(",");for(var o=0;o<n.length;o++)r=n[o].trim(),r&&t(r)}},R=w.getJSRollupsLoaded=function(){var t=i||e(document.getElementsByTagName("SCRIPT")).reduce(function(e,t){return t.hasAttribute("data-is-dust")||E(t,function(t){e.dedup[t]||(e.rups.push(t),u[t]=s[t]=e.dedup[t]=!0)}),e},{rups:[],dedup:{}}).rups;return!i&&p&&(i=t),t},A=w.getCSSRollupsLoaded=function(){var t=d||(document.head?e(document.head.querySelectorAll("LINK, STYLE")).reduce(function(e,t){return E(t,function(t){e.dedup[t]||(e.rups.push(t),e.dedup[t]=!0)}),e},{rups:[],dedup:{}}).rups:[]);return!d&&p&&(d=t),t},T=w.getLoadedFilesParams=function(){return{haveJses:String(R()),haveCsses:String(A())}},b=function(){if(f=null,p&&!m){var e=t,d=a,i=r,u=o,c=T(),l=n.filter(function(e){return e&&!s[e]&&!require.parsed(e)});if(a=[],t=[],n=[],r=[],o=[],!(l.length||e.length||i.length||u.length))return void I(d);var h="haveJses="+encodeURIComponent(c.haveJses)+"&haveCsses="+encodeURIComponent(c.haveCsses)+"&needJses="+encodeURIComponent(String(l||""))+"&needCsses="+encodeURIComponent(String(e||""))+"&needDusts="+encodeURIComponent(String(u||""));i.length>0&&(h+="&needContent="+encodeURIComponent(String(i))),window.pageServlet&&(h+="&metaReferer="+encodeURIComponent(window.pageServlet));var w=null;try{w=new XMLHttpRequest}catch(e){try{w=new ActiveXObject("MSXML2.XMLHTTP")}catch(e){try{w=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){throw new Error("Can't create XMLHttpRequest or similar")}}}var v=!1;w.onreadystatechange=function(){v||4!==w.readyState||(v=!0,w.status>=200&&w.status<=299?x(d,w.responseText):I(d,new Error("XHR returned "+w.status)))},w.open("POST","/DemandLoadAjax",!0);try{w.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8")}catch(e){}try{w.setRequestHeader("X-Requested-With","XMLHttpRequest")}catch(e){}try{w.setRequestHeader("Accept","text/html, */*")}catch(e){}m=!0,w.send(h)}},I=function(e,t){if(m=!1,S(),e.length)for(var n=0;n<e.length;++n)try{e[n](t)}catch(e){window.IS_DEBUG&&console.error&&console.error("Error in async callback: ",e)}},D=w.installStyles=function(e){document.head.appendChild(e.reduce(function(e,t){return E(t,function(e){d.push(e),define("trcss!"+e,[],H(void 0))}),e.appendChild(t),e},document.createDocumentFragment()))},q=w.installScripts=function(e){return Promise.all(e.map(function(e){return E(e,function(t){e.hasAttribute("data-is-dust")?l[t]=!0:(i&&i.push(t),s[t]=!0)}),new Promise(function(t){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("data-rup",e.getAttribute("data-rup")),e.src?(n.src=e.src,n.async=!0,n.onload=n.onerror=t,document.head.appendChild(n)):e.text&&(n.text=e.text,document.head.appendChild(n),document.head.removeChild(n),t())})}))},x=function(t,n){if(!n||!n.substr)return void I(t,new Error("no data returned from /DemandLoadAjax"));var r,o=Promise.resolve();try{var a=document.createElement("DIV");a.innerHTML=n,D(e(a.querySelectorAll("STYLE, LINK"))),o=q(e(a.getElementsByTagName("SCRIPT")));for(var d,i;d=a.firstChild;)a.removeChild(d),1===d.nodeType&&(i=d.getAttribute("data-content"),i&&define("trhtml!"+i,[],H(d)))}catch(e){r=e}o.then(I.bind(null,t,r))},H=function(e){return function(){return e}},M=w.activate=function(){p||(p=!0,define.depLoader&&!define.depLoader.isDefault||(define.depLoader=v),S())},X=function(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++)if(e[t].hasAttribute("data-loadtrk")&&!e[t].loadtrk)return window.console&&console.warn&&console.warn(e[t].src+" is not loaded yet"),!1;return!0},P=function(){"interactive"===document.readyState&&X()&&(window.console&&console.warn&&console.warn("force activate async loading due to wait timeout"),M())};return define("trjs",[],function(){return{load:g}}),define("trcss",[],function(){return{load:y}}),define("trhtml",[],function(){return{load:C}}),define("trdust",[],function(){return{load:L}}),"undefined"!=typeof window&&(document.addEventListener&&!window.taRollupsAreAsync&&document.addEventListener("DOMContentLoaded",M,!1),window.addEventListener?window.addEventListener("load",M,!1):window.attachEvent&&window.attachEvent("onload",M),window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("Edge")>-1&&setTimeout(P,h)),w});
define("remoteModule",["vanillajs"],function(){"use strict";function t(t,e){return null==t?null:t.getAttribute("data-"+e)}function e(t,e){for(;t&&t!==document.body;){if(t.getAttribute(e))return t;t=t.parentNode}return null}function r(e,r,n,i,u){var a=t(e,r);return a?a.replace(/\$plc:/g,"$prp/"+n+"/").replace(/\$prw:/g,"$prw/"+i+"/").split(",").filter(function(t){return!!t.length}).reduce(function(t,e){return t.concat(u.map(function(t){var r="trdust!"===t&&e.indexOf("/")<0;return t+e+(r?"-dust":"")}))},[]):[]}var n={};return function(i,u){var a=[].slice.call(arguments),l=(t(u,"load-init")||t(u,"load-js")).split("."),s=l.shift(),d=l.shift();if(!(n[s]&&n[s].indexOf(u)>=0)){if(require.defined(s)){var c=require(s);return void(d?c[d]:c).apply(c,a)}(n[s]||(n[s]=[])).push(u);var f=e(u,"data-placement-name"),p=e(u,"data-prwidget-name"),o=t(f,"placement-name"),h=t(p,"prwidget-name"),m=[].concat(r(u,"load-all",o,h,["trjs!","trcss!","trdust!"]),r(u,"load-js",o,h,["trjs!"]),r(u,"load-css",o,h,["trcss!"]),r(u,"load-dust",o,h,["trdust!"]));/^\$plc:/.test(s)?(a.unshift(m),a.unshift(s.substr(5)+"."+d),a.unshift(f.getAttribute("id")),a.unshift("evCall"),a.unshift("ta/p13n/placements"),requireCallLast.apply(window,a)):/^\$prw:/.test(s)?(a.unshift(s.substr(5)+"."+d),a.unshift("call"),a.unshift("ta/prwidgets"),requireCallLast.apply(window,a)):require(m,function(){n[s]=n[s].filter(function(t){return t!=u});var t=require(s);(d?t[d]:t).apply(t,a)})}}});
require(['ta/rollupAmdShim'], function(rollupAmdShim) {rollupAmdShim.install(["api-mod","utils/IntlFormatter","facebook/authutils","google/authutils","cpm/DesktopAds"],["page-model","page-model","ta"]);});
if(window.requirejs && requirejs.taConfig)requirejs.taConfig({"deferred":{},"name":"build/concat/core_hr_react","files":{"js-amd":{"src":{"cpm":{"DesktopAds":1},"api-mod":1,"facebook":{"authutils":1},"google":{"authutils":1}}},"js3":{"build":{"es6":{"src":{"utils":{"IntlFormatter":1}}}}}},"_":{"baseUrl":"/"}});
define("ns-exporter",["vanillajs"],function(r){function n(r){if("undefined"==typeof window)return null;if("undefined"==typeof r&&(r=window),!r)return require.defined("ta/util/Error")&&require("ta/util/Error").record(null,"Using ns-exporter:exportTo without a namespace"),null;if("string"==typeof r){var n=window;n.ta||(ta={}),r.split(".").forEach(function(r){n[r]||(n[r]={}),n=n[r]}),r=n}return r}return{exportTo:function(r,e,t){if(e=n(e),!e)return!1;for(var i in r)!r.hasOwnProperty(i)||t&&i in e||(e[i]=r[i]);return!0},createNs:function(r,e,t){return!!(e=n(e))&&void(e[t]=r)}}});
define("ta/util/Object",["vanillajs","ns-exporter"],function(t,e){var r={};return r.typeOf=function(t){return Object.prototype.toString.call(t).match(/(\w+)\]$/)[1].toLowerCase()},r.merge=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n){t||(t="array"===r.typeOf(n)?[]:{});for(var o in n){var a=n[o];if(n.hasOwnProperty(o)&&"undefined"!==r.typeOf(a)){var i=r.typeOf(a);if("string"===i||"number"===i||"boolean"===i||"function"===i||null===a){t[o]=a;continue}t[o]=r.merge(t[o],a)}}}}return t},e.exportTo(r,"ta.util"),r});
define("utils/resourceLoader",["vanillajs"],function(e){"use strict";function r(){function e(){try{if(navigator.userAgent.match(/ Safari[/]/)&&!navigator.userAgent.match(/ Chrom/)&&navigator.userAgent.match(/ Version\/5\./))return!1;var e=navigator.userAgent.match(/\ AppleWebKit\/(\d+)\.(\d+)/);if(e){e.shift();var r=parseInt(e[0]),t=parseInt(e[1]);if(r<535||535==r&&t<23)return!1}return"onload"in document.createElement("link")}catch(e){return!1}}function r(e,r,t){u++,(u==c.length||l)&&r(t),t?require.defined("ta/util/Error")&&require("ta/util/Error").record(new Error(e),"utils/resourceLoader: failed to load file ["+e+"]"):n[e]=1}function o(e){return e.match(/\.css$/)?"css":e.match(/\.js$/)?"js":""}function a(t,n,u){var c=n||o(u);if(c){var l,s,f;"css"==c?(l=document.createElement("link"),l.rel="stylesheet",l.type="text/css",f="href",s=e()):"js"==c&&(l=document.createElement("script"),l.type="text/javascript",f="src",s="onload"in l),s?(l.onload=r.bind(null,u,t,!1),"onerror"in l&&(l.onerror=function(){i[u]?r(u,t,!0):(i[u]=!0,a(t,n,u))})):r(u,t,!1),l[f]=u;var d=document.getElementsByTagName("head")[0];d.appendChild(l)}else require.defined("ta/util/Error")&&require("ta/util/Error").record(new Error(u),"utils/resourceLoader: unknown file type for ["+u+"]"),r(u,t,!0)}var u,c,l;this.load=function(e,r,n){if("function"==typeof r&&(n=r,r={}),u=0,c=t(e||null),n=n||function(){},r=r||{},l=r.serial,0==c.length)setTimeout(n,1);else if(l){var i,o=c.slice(),s=function(e){i=i&&e,0==o.length?n&&n(i):a(s,r.forceType,o.shift())};s()}else c.forEach(a.bind(null,n,r.forceType))}}function t(e){var r=[],t=function(e){!e||e in n||(e&&e.splice?e.forEach(t):r.push(e))};return t(e),r}var n={},i={};return{Loader:r,load:function(e,t,n){"function"==typeof t&&(n=t,t={}),(new r).load(e,t,n)},loaded:function(e){return 0==t(e).length}}});
define("common/trackingStreams",["vanillajs","amdloaders"],function(){function l(l,e,t){if(e=Array.prototype.slice.call(e),l.handler)try{l.handler.apply(null,e),t()}catch(l){}else if(l.list){l.list.length>=l.limit&&(l.list=l.list.slice(0,l.list.length-1),l.callbacks=l.callbacks.slice(0,l.callbacks.length-1)),l.list.unshift(e),l.callbacks.unshift(t);var r=l.handlerModule;r&&l.handlerMethod&&(l.handlerModule=null,require([r+""],function(e){n(l,e[l.handlerMethod],0)}))}}function e(l,e){if(e=Array.prototype.slice.call(e),l.handler)try{l.handler.apply(null,e)}catch(l){}else if(l.list&&l.list.length<l.limit&&(l.list.push(e),l.handlerModule&&l.handlerMethod)){var t=l.handlerModule;l.handlerModule=null,require([t+""],function(e){n(l,e[l.handlerMethod],0)})}}function n(l,n,t){if(t=t||0,l.handler&&l.priority>=t)return!1;l.handler=n,l.priority=t;var a=l.list;l.list=null;for(var i=0;i<a.length;++i)try{n.apply(null,a[i]),l.callbacks&&l.callbacks[i]&&l.callbacks[i]()}catch(n){l!==r&&e(r,[n,l.name+" dispatch error"])}}var t="trjs!ta/Core/TA.Record",r={name:"errorQ",limit:3,handler:null,handlerModule:"trjs!ta/util/Error",handlerMethod:"record",list:[]},a={name:"GARecordQ",limit:100,handler:null,handlerModule:t,handlerMethod:"trackEventOnPage",list:[]},i={name:"GARecordOnPageOnceQ",limit:100,handler:null,handlerModule:t,handlerMethod:"trackEventOnPageOnce",list:[]},d={name:"SetCookieQ",limit:100,handler:null,handlerModule:t,handlerMethod:"setEvtCookie",list:[]},c={name:"UnifiedUserTrackingQ",limit:100,handler:null,handlerModule:t,handlerMethod:"trackUnifiedEvent",list:[]},o={name:"redirectCallback",limit:1,handler:null,handlerModule:t,handlerMethod:"setEvtCookie",list:[],callbacks:[]};return{error:function(){e(r,arguments)},setErrorHandler:function(l,e){n(r,l,e)},trackEvent:function(){e(a,arguments)},trackEventOnPageOnce:function(){e(i,arguments)},setTrackEventHandler:function(l,e){n(a,l,e)},setEvtCookie:function(){e(d,arguments)},trackUnifiedEvent:function(l,n,t){e(c,arguments)},redirectWithEvt:function(){var e=Array.prototype.slice.call(arguments);e.length>0&&"function"==typeof e[0]&&l(o,e.slice(1),e[0])}}});
define("purify",["vanillajs"],function(e){function n(e,n){return e?t(e)?(window.IS_DEBUG&&console.error("You're using a jQuery object where you shouldn't. Check the stack trace and fix it!"),n&&e.length>1?e.get():e.get(0)):e.forEach&&(e.length<=1||!n)?e[0]:e:e}function t(e){return!!(e.animate&&e.get&&e.eq&&e.each)}return n});
define("utils/json-to-url",["vanillajs"],function(){"use strict";return function(n){return n?Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&"):""}});
define("utils/asdf-encoder",["ns-exporter","vanillajs"],function(e){"use strict";var t={};return t.getOffset=function(e){return e>=97&&e<=122?e-61:e>=65&&e<=90?e-55:e>=48&&e<=71?e-48:-1},t.asdf=function(e){for(var t={"":["&","=","p","6","?","H","%","B",".com","k","9",".html","n","M","r","www.","h","b","t","a","0","/","d","O","j","http://","_","L","i","f","1","e","-","2",".","N","m","A","l","4","R","C","y","S","o","+","7","I","3","c","5","u",0,"T","v","s","w","8","P",0,"g",0],"q":[0,"__3F__",0,"Photos",0,"https://",".edu","*","Y",">",0,0,0,0,0,0,"`","__2D__","X","<","slot",0,"ShowUrl","Owners",0,"[","q",0,"MemberProfile",0,"ShowUserReviews",'"',"Hotel",0,0,"Expedia","Vacation","Discount",0,"UserReview","Thumbnail",0,"__2F__","Inspiration","V","Map",":","@",0,"F","help",0,0,"Rental",0,"Picture",0,0,0,"hotels",0,"ftp://"],"x":[0,0,"J",0,0,"Z",0,0,0,";",0,"Text",0,"(","x","GenericAds","U",0,"careers",0,0,0,"D",0,"members","Search",0,0,0,"Post",0,0,0,"Q",0,"$",0,"K",0,"W",0,"Reviews",0,",","__2E__",0,0,0,0,0,0,0,"{","}",0,"Cheap",")",0,0,0,"#",".org"],"z":[0,"Hotels",0,0,"Icon",0,0,0,0,".net",0,0,"z",0,0,"pages",0,"geo",0,0,0,"cnt","~",0,0,"]","|",0,"tripadvisor","Images","BookingBuddy",0,"Commerce",0,0,"partnerKey",0,"area",0,"Deals","from","\\",0,"urlKey",0,"'",0,"WeatherUnderground",0,"MemberSign","Maps",0,"matchID","Packages","E","Amenities","Travel",".htm",0,"!","^","G"]},r="",a=0;a<e.length;a++){var n=e.charAt(a),o=n;t[n]&&a+1<e.length?(a++,o+=e.charAt(a)):n="";var s=getOffset(e.charCodeAt(a));r+=s<0||"String"==typeof t[n][s]?o:t[n][s]}return r},e.exportTo(t),t});
define("utils/urlutils",["vanillajs","utils/asdf-encoder"],function(e,n){"use strict";function t(e,n,t){var o=new RegExp("(-"+n+"([0-9]+))|([?&]"+t+"=([0-9]+))"),r=o.exec(e);if(r){if("undefined"!=typeof r[2])return Number(r[2]);if("undefined"!=typeof r[4])return Number(r[4])}}function o(e){return t(e,"d","detail")||t(e,"g","geo")}function r(e){for(var n={},t=e.split("#")[0].split("?")[1]||"",o=t.split("&"),r=0;r<o.length;r++){var i=o[r].split("=");i[0]&&(n[decodeURIComponent(i[0])]=decodeURIComponent(i[1]))}return n}function i(e){var n=[];for(var t in e)if(e.hasOwnProperty(t)){var o=e[t];if(o&&"object"==typeof o)for(var r=0;o.length&&r<o.length;++r){var i=o[r];i="object"==typeof i?"":String(i),n.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}else n.push(encodeURIComponent(t)+"="+encodeURIComponent(String(o)))}return n.join("&")}function f(e){return location.protocol+"//"+location.hostname+e}function u(e){return e=e||"",e.indexOf("http")===-1&&(e=f(e)),e.replace("http://","https://")}function a(e){var n=d.exec(e);return{protocol:n?n[1]:"",host:n?n[2]:""}}var d=/^([^:]+:)\/\/([^\/\?]+)/,l="undefined"!=typeof window&&window.asdf||("undefined"!=typeof global&&global.asdf?global.asdf:n.asdf);return{asdf:l,getUrlArgNumeric:t,getUrlPageLoc:o,getUrlQueryArgs:r,toQueryString:i,https:u,getParts:a}});
define("ajax-request",["utils/json-to-url","utils/urlutils"],function(t,e){function r(t){var r=document.createElement("a");r.href=t;var s=e.getParts(r.href);return s.protocol!==window.location.protocol||s.host!==window.location.hostname}function s(t,e,s){try{r(t)||e.setRequestHeader("X-Requested-With","XMLHttpRequest")}catch(t){}try{var n=s["content-type"]||"application/x-www-form-urlencoded; charset=utf-8";e.setRequestHeader("Content-Type",n)}catch(t){}try{var o=s.accept||"text/html, */*";e.setRequestHeader("Accept",o)}catch(t){}try{var a=s["x-requested-by"];a&&e.setRequestHeader("X-Requested-By",a)}catch(t){}}function n(){try{return new XMLHttpRequest}catch(t){try{return new ActiveXObject("MSXML2.XMLHTTP")}catch(t){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){throw new Error("Can't create XMLHttpRequest or similar")}}}}return function(e,r){"object"==typeof e&&(r=e,e=r.url),r=r||{};var o=r.method||r.type||"GET",a="string"==typeof r.data?r.data:t(r.data);return new Promise(function(t,c){var u=n(),i=!1;u.onreadystatechange=function(){i||u.readyState!==XMLHttpRequest.DONE||(i=!0,u.status>=200&&u.status<=299?(r.success&&r.success(this.responseText,this.status,u),t(this.responseText)):u.status>0&&(r.error&&r.error(u,this.status,this.statusText),c(this.responseText)),r.complete&&r.complete(u,this.statusText))},"get"===o.toLowerCase()&&"string"==typeof a&&a.length>0&&(e+=("?"===a[0]?"":"?")+a,a=null),u.open(o,e,!r.synchronous),s(e,u,r),u.send(a)})}});
define("utils/object/set-props",["vanillajs"],function(){"use strict";return function(n,r){for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n}});
define("utils/object/shallow-copy",["utils/object/set-props","vanillajs"],function(t){"use strict";return function(r){var e;if("object"!=typeof r||null===r)return r;if(r.constructor===Array){e=[];for(var n=0;n<r.length;++n)e.push(r[n])}else e=t({},r);return e}});
define("utils/objutils",["utils/object/set-props","utils/object/shallow-copy","vanillajs"],function(r,t){"use strict";function e(){var r,t,n,o,i,f,u=arguments[0]||{},c=1,l=arguments.length,a=!1;for("boolean"==typeof u&&(a=u,u=arguments[c]||{},c++),"object"==typeof u||h(u)||(u={});c<l;c++)if(null!=(r=arguments[c]))for(t in r)n=u[t],o=r[t],u!==o&&(a&&o&&(j(o)||(i=y(o)))?(i?(i=!1,f=n&&y(n)?n:[]):f=n&&j(n)?n:{},u[t]=e(a,f,o)):void 0!==o&&(u[t]=o));return u}function n(r){if("object"!=typeof r||null===r||w(r))return r;for(var t in r)r.hasOwnProperty(t)&&(r[t]=n(r[t]));return d(r)}function o(r){if("object"!=typeof r||null===r)return r;for(var t in r)if(r.hasOwnProperty(t)){var e=r[t];null===e?delete r[t]:o(e)}return r}function i(r){var t;if("object"!=typeof r||null===r)return r;if(r.constructor===Array){t=[];for(var e=0;e<r.length;++e)t.push(i(r[e]))}else{t={};for(var n in r)r.hasOwnProperty(n)&&(t[n]=i(r[n]))}return d(t)}function f(r){var t;if("object"!=typeof r||null===r)return r;if(r.constructor===Array){t=[];for(var e=0;e<r.length;++e)t.push(f(r[e]))}else{t={};for(var n in r)r.hasOwnProperty(n)&&(t[n]=f(r[n]))}return t}function u(r){var t;if("object"!=typeof r||null===r)return r;if(t=r,r.constructor===Array){P(r)&&(t=[],t.length=r.length);for(var e=0;e<r.length;++e)t[e]=u(r[e])}else{P(r)&&(t={});for(var n in r)r.hasOwnProperty(n)&&(t[n]=u(r[n]))}return t}function c(r,t){if(r!==t){if(!r)return!t;if(!t||r.length!==t.length)return!1;for(var e=0;e<r.length;e++)if(r[e]!==t[e])return!1}return!0}function l(r,t){if(r!==t){if(!r)return!t;if(!t)return!1;if(y(r)&&y(t))return c(r,t);var e=Object.keys(r);if(!c(e,Object.keys(t)))return!1;for(var n=0;n<e.length;n++)if(r[e[n]]!==t[e[n]])return!1}return!0}function a(r,t){var e,n,o={};for(e=0;e<r.length;++e)n=r[e],o[n[t]]=n;return o}function s(r,t){var e=r[t];if(!e&&!r.propertyIsEnumerable(t))throw"missing property: "+t;return e}function p(r,t){for(var e in r)r.hasOwnProperty(e)&&!t(r,r[e])&&delete r[e];return r}function y(r){return Array.isArray?Array.isArray(r):"[object Array]"===Object.prototype.toString.call(r)}function b(r,t,e){var n;if(t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,r,e);for(n=t.length,e=e?e<0?Math.max(0,n+e):e:0;e<n;e++)if(e in t&&t[e]===r)return e}return-1}function h(r){var t={};return r&&"[object Function]"===t.toString.call(r)}function j(r){var t,e;return!(!r||"[object Object]"!==Object.prototype.toString.call(r))&&(!(t=Object.getPrototypeOf(r))||(e=Object.hasOwnProperty.call(t,"constructor")&&t.constructor,"function"==typeof e&&Object.toString.call(e)===Object.toString.call(Object)))}function v(r){var t=[];for(var e in r)r.hasOwnProperty(e)&&t.push(e);return t}function O(r,t){for(var e in r)if(r.hasOwnProperty(e)&&t(r[e],e,r))return r[e]}function g(r,t,e){var n,o=0,i=r.length,f=void 0===i||h(r);if(e)if(f){for(n in r)if(t.apply(r[n],e)===!1)break}else for(;o<i&&t.apply(r[o++],e)!==!1;);else if(f){for(n in r)if(t.call(r[n],n,r[n])===!1)break}else for(;o<i&&t.call(r[o],o,r[o++])!==!1;);return r}var d=function(r){return r},w=function(r){return!0},P=function(r){return!1};return"function"==typeof Object.freeze&&(d=Object.freeze.bind(Object),P=Object.isFrozen.bind(Object),w=Object.isFrozen.bind(Object)),{setProps:r,deepFreeze:n,deepFreezeCopy:i,unfreezeForDust:u,undefineNulls:o,shallowCopy:t,deepCopy:f,shallowEquals:l,index:a,need:s,filterProps:p,keys:v,isArray:y,inArray:b,isFunction:h,isPlainObject:j,each:g,extend:e,find:O}});
define("utils/decoder",["common/trackingStreams"],function(r){function e(e){if(e=e.replace(/\-/g,"+").replace(/\_/g,"/"),e.length%4!==0)for(var n=4-e.length%4,t=0;t<n;t++)e+="=";for(var i,a,o,c,f,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g="",h="",l="",s=0;s<e.length;s+=4){if(o=d.indexOf(e.charAt(s)),c=d.indexOf(e.charAt(s+1)),f=d.indexOf(e.charAt(s+2)),l=d.indexOf(e.charAt(s+3)),o==-1||c==-1||f==-1&&l==-1)return void r.error({"string":e},"string contains invalid base64 letter");i=o<<2|c>>4,a=(15&c)<<4|f>>2,h=(3&f)<<6|l,g+=String.fromCharCode(i),64!=f&&(g+=String.fromCharCode(a)),64!=l&&(g+=String.fromCharCode(h)),i=a=h="",o=c=f=l=""}return unescape(g)}return{base64Decoder:e}});
define("utils/urlDecoder",["utils/decoder"],function(e){function t(t){if(!t)return null;var n=4;return t=e.base64Decoder(t),t=t.substring(n,t.length-n)}function n(e){return e.getAttribute("href")||t(e.getAttribute("data-params"))}function r(e,n,r,o){new Event(e).preventDefault();var u=n.getAttribute("data-params");return!!u&&(!!(u=t(u))&&(r&&(u+=r),o?window.open(u,"_blank"):window.location=u,!1))}function o(e){if(!u(e))return e;var n=e.substring(c,e.length);return t(n)}function u(e){return e&&"string"==typeof e&&0==e.indexOf(d)&&e.length>c}function i(e){var t=/TAP\|.+?(?=%2F)/.exec(e),n=t[0],r=o(n),u=e.replace(n,r);window.open(u)}var d="TAP|",c=d.length;return{decodeUrl:t,getUrl:n,goToLink:r,decodeProductCode:o,isObfuscatedProductCode:u,goToCommerceLinkWithProductCode:i}});
define("lib/jquery-amd",[],function(){return window.Zepto||ta.jquery||window.jQuery});
define("utils/browserutils",["vanillajs"],function(e){"use strict";var o={},n=window.navigator?window.navigator.userAgent.toLowerCase():"",a=window.navigator?window.navigator.platform.toLowerCase():"",r=n.match(/(opera|ie|firefox|chrome|crios|trident|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],i="ie"==r[1]&&document.documentMode;return"trident"===r[1]&&(r[1]="ie",r[2]=parseInt(r[2],10)+4),o.name="version"==r[1]?r[3]:r[1],o.version=i||parseFloat("opera"==r[1]&&r[4]?r[4]:r[2]),o.Platform={name:n.match(/ip(?:ad|od|hone)/)?"ios":(n.match(/(?:webos|android)/)||a.match(/mac|win|linux/)||["other"])[0]},o[o.name]=!0,o[o.name+parseInt(o.version,10)]=!0,o.Platform[o.Platform.name]=!0,o});
define("utils/stopevent",["vanillajs"],function(){return function(e){return e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1),!1}});
define("utils/form-to-json",["vanillajs"],function(){"use strict";function e(e,n,r){e in r?(Array.isArray(r[e])||(r[e]=[r[e]]),r[e].push(n)):r[e]=n}return function(n){for(var r={},i={file:1,reset:1},t={DATALIST:1,OUTPUT:1},a={checkbox:1,radio:1},o=0;o<n.elements.length;o++){var l=n.elements[o],s=l.name;if(s){var u=l.nodeName,f=l.type;if("SELECT"===u)for(var v=0;v<l.options.length;v++){var c=l.options[v];c.selected&&e(s,c.value,r)}else"INPUT"===u?f in a?l.checked&&e(s,l.value,r):f in i||e(s,l.value,r):u in t||e(s,l.value,r)}}return r}});
define("utils/is-element",["vanillajs"],function(){return function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName}});
define("api-mod",["lib/jquery-amd","utils/browserutils","utils/stopevent","utils/form-to-json","utils/to-array","utils/is-element"],function($,browser,stopEvent,formToJson,toArray,isElement){"use strict";var exports={};return exports.fn=function(fn){switch(typeof fn){case"function":return fn;case"string":var f=null;try{f=eval(fn)}catch(t){}if(!f){var ns=fn.split("."),n=ns.pop();try{ns=eval(ns.join(".")),f=ns&&ns._magic&&ns._magic.partial(n)}catch(t){}}if(f&&"function"==typeof f)return f}return null},exports.bind=function(t,e){return Function.prototype.bind.apply(t,Array.prototype.slice.call(arguments,1))},exports.inDocument=function(t){return t=exports.find(t),!!t&&!!t.parentNode&&11!==t.parentNode.nodeType},exports.addEvent=function(t,e,r){$(t).on(e,r)},exports.fireEvent=function(t,e,r){$(t).trigger(e,r)},exports.removeEvent=function(t,e,r){$(t).off(e,r)},exports.removePropertyEvent=function(t,e,r){"on"!==e.substr(0,2)&&(e="on"+e);var o=t.getAttribute(e);if(o){var n,s=r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");n=o.replace(new RegExp(s+"\\s*\\([^)]*\\);?|(ta\\.call|requireCallLast|requireCallIfReady)\\s*\\(\\s*['\"]\\s*"+s+"[^)]*\\);?"),""),t[e]=n.trim()}},exports.store=function(t,e,r){$(t).data(e,r)},exports.retrieve=function(t,e){return $(t).data(e)},exports.getSize=function(t){if(t=exports.find(t),!t)return null;if(/^(?:body|html)$/i.test(t.tagName)||t===window||t===document){var e=document.compatMode&&"CSS1Compat"!==document.compatMode?document.body:document.body.parentNode;return{x:e.clientWidth,y:e.clientHeight}}return{x:t.offsetWidth,y:t.offsetHeight}},exports.getPosition=function(t,e){if(e=$(e),t=$(t),e.length){var r=e.offset(),o=t.offset();return{left:o.left-r.left,top:o.top-r.top}}return t.offset()},exports.getCoords=function(t){if(t=exports.find(t),!t)return null;var e=this.getSize(t),r=this.getPosition(t);return{top:r.top,left:r.left,bottom:r.top+e.y,right:r.left+e.x,height:e.y,width:e.x}},exports.getOffsetParent=function(t){return $(t).offsetParent().get(0)},exports.getParent=function(t,e){if(t=exports.find(t),!t)return null;if(e){for(;t&&"html"!=t.tagName;t=t.parentNode)if(exports.hasClass(t,e))return t;return null}return t.parentNode},exports.elementOrParentMatches=function(t,e){if(e)for(;t;t=t.parentElement)if(e(t))return!0;return!1},exports.containsElement=function(t,e){if(t=exports.find(t),e=exports.find(e),!t||!e)return!1;for(;null!=e;){if(e===t)return!0;e=e.parentElement}return!1},exports.checkBrowser=function(t){var e=Array.prototype.slice.call(arguments);return e.some(function(t){return!!browser[t]})},exports.containsEvent=function(t,e){if(t=exports.find(t),!e||!t)return!1;var r=e.pageX,o=e.pageY,n=this.getCoords(t);return"fixed"!==$(this.getOffsetParent(t)||t).css("position")&&"undefined"!=typeof r&&"undefined"!=typeof o||(r=e.clientX,o=e.clientY),o>=n.top&&o<=n.bottom&&r>=n.left&&r<=n.right},exports.select=function(t,e){var r=Array.prototype.slice.call(arguments),o=r.length>1&&("string"==typeof r[0]?r.pop():r.shift())||document,n=r.shift();try{return $(n,o).get()}catch(t){return[]}},exports.addClass=function(t,e){$(t).addClass(e)},exports.removeClass=function(t,e){$(t).removeClass(e)},exports.toggleClass=function(t,e,r){$(t).toggleClass(e,r)},exports.hasClass=function(t,e){return t&&$(t).hasClass(e)},exports.destroy=function(t){$(t).remove().get()},exports.find=function(t,e){try{return $(t,e||document)[0]}catch(t){}},exports.scrollTop=function(){var t=void 0!==window.pageYOffset,e="CSS1Compat"===(document.compatMode||"");return t?window.pageYOffset:e?document.documentElement.scrollTop:document.body.scrollTop},exports.scrollLeft=function(){var t=void 0!==window.pageXOffset,e="CSS1Compat"===(document.compatMode||"");return t?window.pageXOffset:e?document.documentElement.scrollLeft:document.body.scrollLeft},exports.createElement=function(t,e){var r=document.createElement(t);return e&&$(r).attr(e),r},exports.isElement=isElement,exports.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},exports.adopt=function(t,e){$(t).append(Array.prototype.slice.call(arguments,1))},exports.setStyle=function(t,e,r){$(t).css(e,r)},exports.stopEvent=stopEvent,exports.mixin=function(t,e){return Array.prototype.slice.call(arguments,1).forEach(function(e){for(var r in e)t[r]=e[r]},t),t},exports.merge=function(t,e){for(var r=Array.prototype.slice.call(arguments,1),o=0,n=r.length;o<n;o++)for(var s in r[o])r[o].hasOwnProperty(s)&&(t[s]=r[o][s]);return t},exports.getFormData=function(t){return formToJson($(t).get(0))},exports.toFormQueryString=function(t){var e=[];t&&"FORM"===t.nodeName&&(t=exports.getFormData(t));for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];if(o&&"object"==typeof o)for(var n=0;o.length&&n<o.length;++n){var s=o[n];s="object"==typeof s?"":String(s),e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}else e.push(encodeURIComponent(r)+"="+encodeURIComponent(String(o)))}return e.join("&")},exports.toArray=toArray,exports.forceReflow=function(t){$(t).each(function(t,e){e.offsetWidth})},exports.stripTags=function(t,e,r){e=e||"";var o=r?"<"+e+"(?!\\w)[^>]*>([\\s\\S]*?)</"+e+"(?!\\w)>":"</?"+e+"([^>]+)?>";return t.replace(new RegExp(o,"gi"),"")},exports});
define("ta/Core/TA.Store",["vanillajs","ns-exporter","ta/util/Object"],function(e,r,t){"use strict";var n={},a={};return a.store=function(e,r){return n[e]=r,r},a.retrieve=function(e){return n[e]},a.has=function(e){return"undefined"!=typeof n[e]},a.retrieveOrStore=function(e,r){var t=n[e];return"undefined"==typeof t&&(n[e]=r,t=r),t},a.remove=function(e){var r=n[e];return delete n[e],r},a.keep=function(e,r){var t,n=a.retrieve(e);t=n?n instanceof Array?n:[n]:[],r instanceof Array?r.forEach(function(e){t.contains(e)||t.push(e)}):t.push(r),a.store(e,t)},a.merge=function(e,r){a.store(e,t.merge(a.retrieve(e)||{},r))},a.asInt=function(e,r){var t=parseInt(a.retrieve(e));return isNaN(t)?r||0:t},a.asFloat=function(e,r){var t=parseFloat(a.retrieve(e));return isNaN(t)?r||0:t},a.executeCallbacks=function(e){if(a.has(e)){var r=a.retrieve(e);if(!r instanceof Array)return;for(var t=0;t<r.length;t++)r[t]()}},r.exportTo(a,"ta"),a});
define("ta/Core/TA.Record",["vanillajs","ns-exporter","ta/Core/TA.Store","purify","ajax-request","utils/objutils","utils/urlDecoder"],function(e,t,n,r,a,i,o){"use strict";var u={},l={},c=[],s=8,d="impressionTrackingTree",g=0,f=1,v=2,p="UserTracking",m="impression",h="action",k="pageview",y="search",E=[],T=60,P=function(e){return"function"==typeof e},b=function(e,t){try{if(!e||"object"!=typeof t)return;if(window.JSON&&JSON.stringify){var n=JSON.stringify(t);n&&n.length<1e5&&(E.push([e,n]),E.length>T&&E.shift())}}catch(e){}},_=function(e,t,n,r){a(e,t).then(n,r),b(e,t)},S=function(){if(require.defined("ta/util/Error")){var e=require("ta/util/Error");e.record.apply(e,arguments)}else ta&&ta.m&&P(ta.m.recordJSError)&&ta.m.recordJSError(arguments)},C=function(e){return"undefined"==typeof e||null==e?"":("string"!=typeof e&&(e=e.toString()),e.replace(/!/g,"!!").replace(/\./g,"!.").replace(/\*/g,"!*"))},w=function(e){var t=[];for(var n in e){var r=e[n];t.push(C(n)+"."+C(r))}return t.join("*")},A=function(e){return"undefined"==typeof e||null===e?"":("string"!=typeof e&&(e=e.toString()),e.replace(/!/g,"!!").replace(/\./g,"!.").replace(/\*/g,"!*").replace(/\~/g,"!~"))},N=function(e){var t=[];for(var n in e){var r=e[n];t.push(A(n)+"."+A(r))}return t.join("*")},R=function(e){var t=/(https?:\/\/[^\/]+)?\/([^#.?-]*)/,n=t.exec(e);return n&&"undefined"!=typeof n[2]?n[2]?n[2]:"Home":null},O=function(){var e=u.getPageData();if(e&&e.url)return e.url.substring(1);var t=/\/([^-]*)/.exec(window.location.pathname);return t?t[1]:null},I=function(){var e=ta.uid;if(require.defined("redux-init")){var t=require("redux-init");t&&t.tracking&&t.tracking.uid&&(e=t.tracking.uid)}return e},x=function(e,t,n){var r=new RegExp("(-"+t+"([0-9]+))|([?&]"+n+"=([0-9]+))"),a=r.exec(e);if(a){if("undefined"!=typeof a[2])return a[2];if("undefined"!=typeof a[4])return a[4]}return null},M=function(e){return x(e,"d","detail")||x(e,"g","geo")},q=function(e){var t=document.cookie.match("(?:^|;)\\s*"+e+"=([^;]*)");return!!t&&(t=t[1],0===t.indexOf("%1%")&&(t=t.substring(3)),decodeURIComponent(t))},L=function(e,t,n){try{var r;n.encode&&(t=encodeURIComponent(t)),n.domain&&(t+="; domain="+n.domain),n.path&&(t+="; path="+n.path),n.duration&&(r=new Date,r.setTime(r.getTime()+1e3*n.duration),t+="; expires="+r.toGMTString()),n.secure&&(t+="; secure"),document.cookie=e+"="+t}catch(e){S(e,"_setCookieInSeconds",null,arguments)}},D=function(){return ta.m&&ta.m.store&&ta.m.store.has("bookingSessionId")?ta.m.store.get("bookingSessionId"):null},H=function(){var e=!1;return"boolean"==typeof ta.userLoggedIn&&(e="boolean"==typeof ta.userSecurelyLoggedIn?ta.userLoggedIn?ta.userSecurelyLoggedIn?v:f:g:ta.userLoggedIn),e},U=function(e,t){var r={gac:e[1],gaa:e[2],gal:e[3],gav:e[4],gani:e[5],gass:O(),gasl:M(document.location.href),gads:R(t),gadl:M(t),gapu:I(),gams:H()},a=D();if(!r.gass)throw new Error("Src servlet undefined, gac:"+r.gac+", gaa:"+r.gaa+", gal:"+r.gal);if(!r.gads)throw new Error("Dst servlet undefined. gac:"+r.gac+", gaa:"+r.gaa+", gal:"+r.gal);n.has("gatt")&&(r.gatt=n.retrieve("gatt")),a&&(r.bsid=a),L("EVT",w(r),{domain:cookieDomain,duration:5,encode:!0,path:"/"})},j=function(e){if(!e||!e.className||!e.firstChild)return!1;var t=new RegExp("\\b"+d+"\\b"),n=e.firstChild.nodeType,r=e.firstChild.nodeValue;return t.test(e.className)&&n===s&&""!==r},J=function(){};require.defined("page-model")&&require(["page-model"],function(e){var t=e.session,r=t.analyticsInfo;r&&(n.keep("partials.pageProperties",r.pagePropertyStringForCurrentPageview),n.store("gaMemberState",r.memberState),t.analyticsInfo&&require.defined("ta/Core/TA.Prerender")&&require("ta/Core/TA.Prerender")._init(!0)),J=function(){r&&c.push(JSON.parse(r.jsonForCurrentPageview)),J=function(){}}}),u.getPageData=function(){return J(),c[c.length-1]},u.pushPageData=function(e){J(),e&&c.push(e)},u._GARecordRequest=function(e,t){var r,a={gac:e[1],gaa:e[2],gal:e[3],gav:e[4],gani:e[5],gass:O(),gasl:document.location?M(document.location.href):null,gapu:I(),gams:H()},i=D();return t&&(a.gacl=t),n.has("gatt")&&(a.gatt=n.retrieve("gatt")),i&&(a.bsid=i),r=require.defined("utils/BatchRequest")?{get:function(){require("utils/BatchRequest").queue("/GARecord",a)}}:{get:function(){setTimeout(function(){var e=new XMLHttpRequest;e.open("GET","/GARecord?"+W(a),!0),e.send(null)},1)}},b("/GARecord",a),r};var W=function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")};l.urlArgLookup=function(e,t){var n=new RegExp("[\\?&]"+e+"=(\\w+)"),r=n.exec(t);return r&&"undefined"!=typeof r[1]?r[1]:null},u._validatedTrackEventArray=function(e,t,n,r,a){return e&&"string"!=typeof e&&(e=e.toString()),t&&"string"!=typeof t&&(t=t.toString()),n&&"string"!=typeof n&&(n=n.toString()),r?"number"!=typeof r&&(r=parseFloat(r),isNaN(r)&&(r=0)):r=0,"boolean"!=typeof a&&(a=a===!0),["_trackEvent",e,t,n,r,a]},u._toEvtParams=function(e){try{var t={gac:e.module,gaa:e.action,gal:e.context,gav:e.value,gani:e.noninteraction};return t.gass=O(),t.gasl=M(document.location.href),t.gapu=I(),t.gams=H(),t}catch(t){S(t,"analytics._toEvtParams",null,e)}},u._trackEventAfterAjax=function(e){try{l.trackDMPBehavior(e.module,e.action,e.context,e.value,e.noninteraction)}catch(t){S(t,"analytics._trackEventAfterAjax",null,e)}},l.getEventPathOptions=function(e,t,n){try{var r=z(n,e);if(!r)return void S(null,"ta.getEventPathOptions - invalid element",null,arguments);var a=$(r);return t&&(a.noninteraction=t),a}catch(e){S(e,"ta.getEventPathOptions",null,arguments)}},u._trackEventPathAfterAjax=function(e){try{l.trackEventOnPage(e.category,e.action,e.label,e.value,e.noninteraction)}catch(e){S(e,"analytics._trackEventPathAfterAjax",null,arguments)}},l.trackPhysicalCommerce=function(e,t,n,r){try{var a=u._validatedTrackEventArray(e,"Commerce-Physical",t,n,!1);u._GARecordRequest(a,r).get()}catch(e){S(e,"ta.trackPhysicalCommerce",null,arguments)}},l.trackAttemptedCommerce=function(e,t,n){try{l.trackDMPBehavior(e,t,n,null,null)}catch(e){S(e,"ta.trackAttemptedCommerce",null,arguments)}},l.trackPhysicalAndAttemptedCommerce=function(e,t,n,r,a){l.trackPhysicalCommerce(e,t,r,a),l.trackAttemptedCommerce(e,t,n,r)},l.trackImpressionEventOnPage=function(e,t,n,r){e=e||"",t=t||"",n=n||"",r=r||0,l.trackEventOnPage(e,t,n,r,!0)},l.trackEventOnPage=function(e,t,n,r,a){o.isObfuscatedProductCode(e)&&(e=o.decodeProductCode(e)),o.isObfuscatedProductCode(t)&&(t=o.decodeProductCode(t)),o.isObfuscatedProductCode(n)&&(n=o.decodeProductCode(n));try{var i=u._validatedTrackEventArray(e,t,n,r,a);u._GARecordRequest(i).get()}catch(e){S(e,"ta.trackEventOnPage",null,arguments)}},l.trackEventOnPageOnce=function(e,t,r,a){var i,o="eventsAlreadyTracked";i="object"==typeof ta&&ta.m&&ta.m.store?ta.m.store.get(o):n.retrieve(o),i||(i={},"object"==typeof ta&&ta.m&&ta.m.store?ta.m.store.add(o,i):n.store(o,i));var u=e+"|"+t+"|"+r;i[u]||(l.trackEventOnPage(e,t,r,0,a),i[u]=!0)},l.trackDMPBehavior=function(e,t,n,r,a){},l.setEvtCookie=function(e,t,n,r,a){try{var i=u._validatedTrackEventArray(e,t,n,r,!1);if(U(i,a),require.defined("ta/common/behavior/dmp/DMP")){var o=require("ta/common/behavior/dmp/DMP");o.isEnabled()&&o.sendEventBehavior(e,t,n,r,Z())}}catch(e){S(e,"ta.setEvtCookie",null,arguments)}};var G=function(e){var t;try{if(t=q("MEVT")||"",t.length>0&&(t+="~"),t+=N(e),t.length>1024)throw"MEVT Cookie is full";L("MEVT",t,{domain:cookieDomain,duration:5,encode:!0})}catch(e){return S(e,"_appendMevtCookie",null,arguments),!1}return!0},B="trk",V=B.length,F="etk",X=/^([A-Z]{1,2}:)?[A-Za-z_0-9\-\.]+$/,Z=function(){var e="undefined"!=typeof event?event:window.event;return e?e.target||e.srcElement:document.activeElement};u.getCommentTrackingPath=function(e,t){return z(e,t)};var z=function(e,t){if(e=r(e),!e&&(e=Z(),!e))return S(null,"_getCommentTrackingPath - no element provided or event target element",null,arguments),null;if(1!=e.nodeType)return null;var n=[];if(t&&"string"==typeof t&&""!==t&&X.test(t)){if("P:"==t.substring(0,2))return n.push(t.substring(2)),n;n.push(t)}if("undefined"==typeof e.previousSibling)return S(null,"_getCommentTrackingPath - browser does not support previousSibling",null,arguments),n;e:for(var a=e;a!=document.body;a=a.parentNode){if(null==a){S(null,"_getCommentTrackingPath - LOOP_PARENT_NODES got unexpected null node",null,arguments);break}for(var i=0,o=a.previousSibling;null!=o;o=o.previousSibling)if(o.nodeType==s){var u=o.nodeValue;if(u==F){i++;continue}if(u.substring(0,V)!=B)continue;if(i>0){i--;continue}var l=u.substring(V).split("/");l||S(null,'ta._getCommentTrackingPath - cannot split context class: "'+u+'"',null,arguments);for(var c=l.length-1;c>=0;c--){var d=l[c],g=X.exec(d);if(g){if("P:"==g[1]){var f=g[0].substring(2);n.push(f);break e}n.push(g[0])}else S(null,'ta._getCommentTrackingPath - tracking prefix used with invalid context: "'+l[c]+'"',null,arguments)}}}return n},$=function(e){if(0===e.length)return null;var t={"action":e[0],"label":"","value":"1","category":e[e.length-1]};e.shift();for(var n=e.length-2;n>=0;n--)t.label+=e[n],n>0&&(t.label+="/"),"N:"==e[n].substring(0,2)&&(t.value=e[n].substring(2));return""===t.label&&(t.label="Unknown"),t};l.trk=function(e,t,n,a){n=r(n);try{var i=n?n.getAttribute("data-trk-path"):null;if(i)i=i.replace("P:",""),i=i.split("/"),i.reverse();else if(i=z(n,e),!i||!i.length){var o="";if(n)if(n.outerHTML){var u=document.createTextNode(n.outerHTML),c=document.createElement("div");c.appendChild(u),o=c.innerHTML.substring(0,100)}else n.nodeName?o=n.nodeName:o+=n;else void 0===n?o="undefined":null===n&&(o="null");return e||(e=null===i?"null path":void 0===i?"undefined path":i.hasOwnProperty("length")?0===i.length?"empty path":i.join(","):"path: "+i),void S(null,"ta.trk - invalid element for "+e+" from "+o,null,arguments)}l.trkWithPath(i,t,a)}catch(e){S(e,"ta.trk",null,arguments)}},l.trkWithPath=function(e,t,n){try{if(!e||!e.length)return void S(null,"ta.trkWithPath - no path in arguments",null,arguments);if(n&&n.length>0&&e.length&&e.splice)for(var r=n.length-1;r>=0;r--)"string"==typeof n[r]&&e.splice(1,0,n[r]);var a=$(e);l.trackEventOnPage(a.category,a.action,a.label,a.value,t)}catch(e){S(e,"ta.trkWithPath - "+e,null,arguments)}},l.trkImpTree=function(e){try{if(!j(e))return void S(null,"ta.trkImpTree called with invalid trackTreeElem!",null,arguments);var t=e.firstChild.nodeValue;ne(t)}catch(e){S(e,"ta.trkImpTree",null,arguments)}},l.recordImpression=function(e,t){if(!e)return void(t&&t());try{ne(Y(e),t)}catch(e){S(e,"ta.recordImpression",null,arguments),t&&t()}};var K="<!--",Q="-->",Y=function(e){var t=e.indexOf(K),n=0,r=e.indexOf(Q);return t!==-1&&(n=t+K.length),r===-1&&(r=e.length),e.substring(n,r)};u.stripCommentsFromTree=Y;var ee="\\",te="/";u.appendAscendTokens=function(e){var t=0,n=0,r=0;for(t=0;t<e.length;t++)if(e[t]===te)r++;else if(e[t]===ee)for(n=t+1;n<e.length&&e[n]===ee;)r--,t=n,n++;if(r>0)for(t=0;t<r;t++)e+=ee;return e};var ne=function(e,t){var n={tTreeStr:e&&e.trim(),tTreeUid:ta.uid&&ta.uid.trim(),tTreeLastReferrer:window.location.href,tTreeIsMemberSignedIn:H()};ta.m&&ta.m.store&&ta.m.store.has("bookingSessionId")&&(n.bsid=ta.m.store.get("bookingSessionId")),n.tTreeStr?n.tTreeUid||S(new Error("tTreeUid is null/undefined/empty."),"ta._sendTreeImpression",null):S(new Error("tTreeStr is null/undefined/empty."),"ta._sendTreeImpression",null),_("/ImpressionRecord",{method:"POST",url:"/ImpressionRecord",data:n},t)};l.setEvtCookieAndPath=function(e,t,n){try{n||(n=Z());var r=z(n,e);if(!r)return void S(null,"ta.setEvtCookieAndPath - invalid element for "+e,null,arguments);var a=$(r);if(!t){for(;"A"!=n.nodeName&&n!=document.body;)n=n.parentNode;if(t=n.href,!t)return void S(null,"ta.setEvtCookieAndPath - no url parameter and cannot find a.href",null,arguments)}l.setEvtCookie(a.category,a.action,a.label,a.value,t)}catch(e){S(e,"ta.setEvtCookieAndPath",null,arguments)}},l.recordPageview=function(e,t){if(e){var n=R(e),r="/PageviewRecord",a=t?t:{};n&&(a.servletName=n,_(r,{method:"POST",data:a}))}},l.recordTabView=function(e,t,n){if(e&&t){var r=e+"-"+t,a="/PageviewRecord",i=n?n:{};i.servletName=r,_(a,{method:"POST",data:i})}},l.resetPageDataUrl=function(){var e=u.getPageData();e&&(e.url="")},l.trackEngagementClick=function(e,t){return e&&t?P(t)?void t(e):void S(new Error("passed variable selectionFunction is not a function"),"ta.trackEngagementClick",null,t):void S(new Error("object/selectionFunction is null/undefined"),"ta.trackEngagementClick",null,arguments)},l.placementNodeSelectorTracker=function(e){if(!e||!e.element||!e.type)return void S(new Error("object/element/type is null/undefined"),"ta.placementNodeSelectorTracker",null,e);var t,n,r,a,i,o,c=e.element,s=e.type,d=u.getCommentTrackingPath(c);if(s+="_Click",!d)return void S(new Error("trackTreePath is null/undefined"),"ta.placementNodeSelectorTracker",null,arguments);if(d.length<1)return void S(new Error("trackTreePath is missing information"),"ta.placementNodeSelectorTracker",null,arguments);if(t=d[d.length-1],!t)return void S(new Error("placement is null/undefined"),"ta.placementNodeSelectorTracker",null,d);for(o=d.length-1;o>=0;o--)if(i=d[o],i&&0===i.indexOf("N:")){n=i;break}if("HH_MainList"===t||"Maps_MetaBlock"===t)n="N:1";else if(!n)return void S(new Error("positionNode is null/undefined"),"ta.placementNodeSelectorTracker",null,d);if(r=n.split(":"),!r||2!==r.length)return void S(new Error("positionSplit appears to be incorrect"),"ta.placementNodeSelectorTracker",null,arguments);if(a=r[1],!a)return void S(new Error("position is null/undefined"),"ta.placementNodeSelectorTracker",null,arguments);var g=parseInt(a,10);if(isNaN(g))return void S(new Error("position is not a number"),"ta.placementNodeSelectorTracker",null,a);var f=ae(t);if(f!==-1){a=g+f,t=re(t);var v,p=document.querySelectorAll(".ui_tab_bar .ui_tab.selected");1===p.length&&(p=p[0],v=p.getAttribute("data-currentSort")),l.trackEventOnPage(t,s,v,a)}};var re=function(e){if(!e)return e;if("Hotels"!==O())return"Clicks_"+e;var t;return"Hotels_MainList"===e||"Hotels_MainList_Sponsored"===e||"Hotels_MainList_Discovery_Sponsored_Listing"===e?t="Clicks_"+e:"sponsored_coupon_listing"===e&&(t="Clicks_Hotels_MainList_Sponsored"),document.getElementById("sponsoredCouponListingWrap")&&"Clicks_Hotels_MainList"===t&&(t+="_Sponsored"),t+=ta.widgets.calendar.getCheckRatesData()?"_PostDates":"_PreDates"},ae=function(e){if(!e)return S(new Error("placement is null/undefined"),"ta._shiftOrdinalsWithSponsoredPlacement",null,e),-1;if("Hotels"!==O())return 0;var t=0,r=n.retrieve("hac.offset");if(r&&r>0&&(t=r),!document.getElementById("sponsoredCouponListingWrap"))return t;var a,i=document.querySelector("#HAC_RESULTS .pageNumbers .current");if(i){var o=i.getAttribute("data-page-number");if(a=parseInt(o,10),isNaN(a)||!a)return S(new Error("pageNumber is not a number"),"ta._shiftOrdinalsWithSponsoredPlacement",null,o),-1}return"Hotels_MainList"===e?t+=a:(r&&r>0&&("sponsored_coupon_listing"===e||"Hotels_MainList_Sponsored"===e||"Hotels_MainList_Discovery_Sponsored_Listing"===e)&&(t+=a-1),t)};l.getRecentTARecords=function(){return E},l.addTypeAheadMevt=function(e){return e.t="ta",G(e)},l.addGARecordMevt=function(e,t,r,a,i){try{var o=u._validatedTrackEventArray(e,t,r,a,!1),l={t:"ga",gac:o[1],gaa:o[2],gal:o[3],gav:o[4],gani:o[5],gass:O(),gasl:M(document.location.href),gads:R(i),gadl:M(i),gapu:I(),gams:H()},c=D();if(!l.gass)throw new Error("Src servlet undefined, gac:"+l.gac+", gaa:"+l.gaa+", gal:"+l.gal);if(!l.gads)throw new Error("Dst servlet undefined. gac:"+l.gac+", gaa:"+l.gaa+", gal:"+l.gal);if(n.has("gatt")&&(l.gatt=n.retrieve("gatt")),c&&(l.bsid=c),G(l),require.defined("ta/common/behavior/dmp/DMP")){var s=require("ta/common/behavior/dmp/DMP");s.isEnabled()&&s.sendEventBehavior(e,t,r,a,Z())}}catch(e){S(e,"ta.addGARecordMevt",null,arguments)}},l.trackInteractions=function(e,t,n){var r={"elmtSource":e,"elmtType":n};r=i.extend(r,t),_("/UserInteractionRecord",{method:"POST",url:"/UserInteractionRecord",data:r},null,function(){S(null,"taRecord.trackInteractions",null,r)})},l.addInteractionsMEVT=function(e,t,n){var r={"t":"ia","ias":e,"iak":ie(t),"iat":n};G(r)};var ie=function(e){var t="";return Object.keys(e).forEach(function(n){t=t+n+"^"+e[n]+"+"}),0==t.length?t:t.slice(0,-1)},oe=!1,ue=function(e,t){return oe||(oe=require.defined("page-model")?require("page-model").session:{}),!!oe.useERUserTracking&&!(oe.ERUserTrackingEventNames&&oe.ERUserTrackingEventNames.length>0&&oe.ERUserTrackingEventNames.indexOf(e)<0)},le=function(e,t,n){if(ue(e,t)){var r=oe.uid&&{request_uid:oe.uid}||{},a={event_name:e,event_type:t,attr:JSON.stringify(i.extend(n,r))},o={get:function(){setTimeout(function(){var e=new XMLHttpRequest;e.open("GET","/UserTrackingRecord?"+W(a),!0),e.send(null)},1)}};return o.get()}n.event_name=e,l.trackEventOnPage(p,t,JSON.stringify(n))};l.trackImpressionWithJson=function(e,t){le(e,m,t)},l.trackActionWithJson=function(e,t){le(e,h,t)},l.trackPageviewWithJson=function(e,t){le(e,k,t)},l.trackSearchWithJson=function(e,t){le(e,y,t)},l.trackUnifiedEvent=le,t.createNs(u,"ta","analytics"),t.exportTo(l,"ta");var ce={};return t.exportTo(u,ce),t.exportTo(l,ce),ce});
define("utils/ajax",["lib/jquery-amd","ta/Core/TA.Record","utils/form-to-json"],function(e,t,i){function n(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName}return function(r,a){r.substr||(a=r);var s=e.extend({},a,{dataFilter:function(e,t){return"json"==t&&(e=e.replace(/^\s*while\s*\([^)]*\);?/,"")),a&&a.dataFilter&&a.dataFilter.call(this,e,t),e}});s.xhrFields=s.xhrFields||{},s.xhrFields.withCredentials=!0,n(s.data)&&(s.data=i(s.data));var c=s.trackEvent;return c&&(e.extend(s,t._toEvtParams(c)),s.complete=function(){t._trackEventAfterAjax(c),a&&a.complete&&a.complete.apply(this,arguments)}),s.evalScripts&&(s.success=function(t,i,n){if(t&&t.substr){var r,s;e.parseHTML?(r=e(e.parseHTML(t,document,!0)),s=r.filter("script").add(r.find("script"))):(r=e("<div>"+t+"</div>"),s=r.find("script")),s.each(function(e,t){if(t.innerHTML)if(window.execScript)window.execScript(t.innerHTML);else if(window.eval)window.eval(t.innerHTML);else{var i=document.createElement("script");i.setAttribute("type","text/javascript"),i.text=t.innerHTML,document.head.appendChild(i),document.head.removeChild(i)}})}a&&a.success&&a.success.apply(this,arguments)}),r.substr?e.ajax(r,s):e.ajax(s)}});
define("mixins/Events",["vanillajs"],function(e){"use strict";var t=function(){this.events={},Array.prototype.slice.call(arguments).forEach(function(e){this.events[e]=[]},this)};return t.create=function(){function e(e){return t.apply(this,e)}return e.prototype=t.prototype,function(){return new e(arguments)}}(),t.extend=function(e,r){var i=Object.create(t.prototype);return i.delegate=e,t.apply(i,r),i},t.prototype.on=t.prototype.addListener=function(e,t){return void 0!==this.events[e]?this.events[e].push(t):this.delegate?this.delegate.on(e,t):this.events[e]=[t],this},t.prototype.off=t.prototype.removeListener=function(e,t){if(void 0!==this.events[e])if(t){var r=this.events[e].indexOf(t);r>=0&&this.events[e].splice(r,1)}else this.events[e].length=0;else this.delegate&&this.delegate.removeListener(e,t);return this},t.prototype.removeAllListeners=function(e){if(e&&void 0!==this.events[e])this.events[e].length=0;else if(e)this.delegate&&this.delegate.removeAllListeners&&this.delegate.removeAllListeners(e);else{for(var t in this.events)this.events.hasOwnProperty(t)&&(this.events[t].length=0);this.delegate&&this.delegate.removeAllListeners&&this.delegate.removeAllListeners()}},t.prototype.hasListeners=function(e){if(e){if(this.events.hasOwnProperty(e))return this.events[e].length>0;if(this.delegate&&this.delegate.hasListeners)return this.delegate.hasListeners(e)}return!1},t.prototype.emit=function(e,t){if(this.events[e]){var r=Array.prototype.slice.call(arguments,1);this.events[e].slice(0).forEach(function(t){if(t)try{t.apply(this,r)}catch(t){"string"==typeof t&&(t=new Error(t));var i="Error in event handler for "+e;if(require.defined("ta/util/Error"))require("ta/util/Error").record(t,i);else{var s=require.defined("ta")&&require("ta");s&&s.log&&s.log.error?s.log.error(t,i):s&&s.m&&s.m.recordJSError?s.m.recordJSError([t,i]):"undefined"!=typeof console&&(console.error||console.log)(i,t)}}},this)}else this.delegate&&this.delegate.emit&&this.delegate.emit.apply(delegate,arguments);return this},t});
define("ta/util/Cookie",["vanillajs","ns-exporter"],function(e,o){var t=0,n=5e3,i={cookiePIDName:"NPID",ONE_DAY:864e5,ONE_HOUR:36e5,setPIDCookie:function(e){i.write(i.cookiePIDName,e,n,"/",window.cookieDomain)},removePIDCookie:function(){try{i.write(i.cookiePIDName,"",t,"/",window.cookieDomain)}catch(e){}},canSet:function(){return document.cookie="SessionTest=true",!!document.cookie.match("(^|;)\\s*SessionTest=true\\s*(;|$)")&&(document.cookie="SessionTest=; expires=Thu, 01 Jan 1970 00:00:01 GMT",!0)},readRaw:function(e){e=e.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1");var o=document.cookie.match(new RegExp("(?:^|;)\\s*"+e+"=([^;]*)"));return!!o&&o[1]},remove:function(e,o,t){i.write(e,"",new Date(1e3),o,t)},write:function(e,o,t,n,i){"number"==typeof t&&(t=new Date(Date.now()+t)),document.cookie=e+"="+o+(t?"; expires="+t.toUTCString():"")+(n?"; path="+n:"")+(i?"; domain="+i:"")},setOneTimeCookieOnFQDN:function(e,o){return i.write(e,o,5e3),!0},setOneTimeCookie:function(e,o){return i.write(e,o,5e3,null,window.cookieDomain),!0}};return o.exportTo({setPID:i.setPIDCookie}),o.createNs(i,"ta.util","cookie"),i});
define("ta/Core/TA.LocalStorage",["vanillajs","common/trackingStreams","ns-exporter"],function(e,t,n){"use strict";var r=!1,o="taLsTest",i="1",a="TALocalStorageCurrentSessionId",u=!1,s="session-",l=!1,c=[],f=[],v=[],g=function(){return!(!u&&!l)},m=function(e){return!!g()||(t.error(null,"Accessing localStorage session cookie before session logic intialized: "+e),!1)},S=function(e){return d(e,"value")},y=function(e){return d(e,"now")},d=function(e,t){if(!t)return null;try{var n,o=JSON.parse(r.getItem(e)||"0");return o?o.ttl&&o.ttl+o.now<(new Date).getTime()?(r.removeItem(e),null):o.hasOwnProperty(t)?(r.setItem("512",o[t]),n=r.getItem("512"),r.removeItem("512"),n):null:null}catch(e){}return null},h=function(e,t){try{var n=JSON.parse(e||"0");return n&&n.hasOwnProperty(t)?n[t]:null}catch(e){return null}},w=function(e){try{var t=JSON.parse(r.getItem(e)||"0");return t?t.ttl&&t.ttl+t.now<(new Date).getTime()?(r.removeItem(e),null):t.value:null}catch(e){}return null},I=function(e){try{r.removeItem(e)}catch(e){}},p=function(e,t){var n=y(e);if(t&&n&&n<(new Date).getTime()-t)try{r.removeItem(e)}catch(e){}},O=function(e){try{var t=r.getItem(e);if(null!==t&&void 0!==t)return!0}catch(e){}return!1},T=function(e,t,n){try{r.setItem(e,JSON.stringify({ttl:n||0,now:(new Date).getTime(),value:t}))}catch(e){}},k=function(e){if(l=!0,!e)return t.error(null,"Attempting to initialize localStorage with invalid sesion key: "+e),!1;if(!V())return!1;if(u=S(a),!u||u!=e){u=e,T(a,u);var n=S("latestPageServlet");n&&T("sessionEntryServlet",n),E(),O(a)&&require.defined("ta/Core/TA.Store")&&require("ta/Core/TA.Store").store("isFirstSessionPageView",!0)}for(var r=0;r<v.length;r++)v[r]();v=[]},E=function(){try{var e=s+u,t=new RegExp("^"+s);if(r.length)for(var n=0;n<r.length;n++){var o=r.key(n);try{t.test(o)&&o!=e&&I(o)}catch(e){}}}catch(e){}},V=function(){try{if(r&&r.setItem){r.setItem(o,i);var e=r.getItem(o)!=i;return r.removeItem(o),e&&(r=!1),!!r}}catch(e){}return!1},N=function(e){try{r.setItem("session-"+u,JSON.stringify(e))}catch(e){}},b=function(){try{var e=r.getItem("session-"+u);if(e)return JSON.parse(e)}catch(e){}return{}},A=function(e){c.push(e)},C=function(e,t){f[e]||(f[e]=[]),f[e].push(t)},J=function(e){"function"==typeof e&&(g()?e():v.push(e))},L={enabled:V(),get:S,getObject:w,set:T,remove:I,removeIfElapsed:p,has:O,getTimeStamp:y,updateSessionId:k,onSessionStorageChange:A,onValueChange:C,canUseSession:g,onLocalStorageSessionInit:J,getSessionKey:function(e){if(!m(e))return null;var t=b();return t?t[e]:null},setSessionKey:function(e,t){if(m(e)){var n=b();n||(n={}),n[e]=t,N(n)}},removeSessionKey:function(e){if(m(e)){var t=b();t&&(delete t[e],N(t))}},hasSessionKey:function(e){if(!m(e))return!1;var t=b();if(t){var n=t[e];if(null!==n&&void 0!==n)return!0}return!1},setStorage:function(e){r=e,L.enabled=V()}};if("undefined"!=typeof window){var j=!1;try{j=window.localStorage}catch(e){}L.setStorage(j),function(){function e(e){if(e=e||window.event,!u||e.key&&e.key!=="session-"+u)e.key&&f[e.key]&&(e.oldValueObj=e.oldValue&&h(e.oldValue,"value"),e.newValueObj=e.newValue&&h(e.newValue,"value"),f[e.key].forEach(function(t){t(e)}));else for(var t=0,n=c.length;t<n;t++)c[t](e)}window.addEventListener?window.addEventListener("storage",e,!1):window.attachEvent&&window.attachEvent("onstorage",e)}()}return n.createNs(L,"ta","localStorage"),L});
require(['ta/rollupAmdShim'], function(rollupAmdShim) {rollupAmdShim.install(["ta/Core/TA.Store","utils/store","ta/Core/TA.Load","ta/Core/TA.FireEvent","ta/Core/TA.Event","ta/Core/TA.Record","ta/util/Error","ta/util/Selenium","ta/util/roybatty","ta/Core/TA.LocalStorage","ta/Core/TA.Prerender","ta/projects","ta/Browser","ta/util/ScreenSizeRecord","utils/BatchRequest","utils/ceUtils"],["ta","ta"]);});
if(window.requirejs && requirejs.taConfig)requirejs.taConfig({"deferred":{},"name":"build/concat/core-without-dust-or-mootools","files":{"js3_secure":{"ssl":{"ta":{"Core":{"TA.Record":1,"TA.Prerender":1}}}},"js-amd":{"src":{"utils":{"BatchRequest":1,"ceUtils":1,"store":1}}},"js3":{"src":{"ta":{"projects":1,"util":{"ScreenSizeRecord":1,"roybatty":1,"Error":1,"Selenium":1},"Browser":1,"Core":{"TA.FireEvent":1,"TA.Event":1,"TA.Load":1,"TA.LocalStorage":1,"TA.Store":1}}}}},"_":{"baseUrl":"/"}});
define("utils/store",["vanillajs","ta/Core/TA.Store"],function(e,r){return{add:r.store,get:r.retrieve,has:r.has,getOrAdd:r.retrieveOrStore,remove:r.remove}});
define("ta/Core/TA.Load",["vanillajs","ns-exporter","ta/Core/TA.Store","utils/resourceLoader"],function(e,r,o,a){function t(e){if("string"==typeof e&&VERSION_MAP){var r=!1;if(VERSION_MAP[e])r=e;else if(VERSION_MAP[e+".js"])r=e+".js";else for(var o=e.split("."),a=0;o&&o.length>1&&a<10;){o=o.slice(0,-1);var t=o.join("-")+".js";if(t&&VERSION_MAP[t]){r=t;break}a++}return r}}var n={};return n.load=function(e,r,n){var i=!1,s=t(e);s&&(i=VERSION_MAP[s]);var l=function(){var e=o.remove(f);e&&e.forEach(function(e){e&&e()})};if(i){var f=s+"_callback";if(o.has(f)){var c=o.retrieve(f);c.push(r),o.store(f,c)}else o.store(f,[function(){delete VERSION_MAP[s],r&&r()}]),"object"==typeof i?a.load(i,{serial:!0,forceType:"js"},l):a.load(i,{forceType:"js"},l)}else n&&a.loaded(i)&&(l(),r&&r());return i},n.loadInOrder=function(e,r){a.load(e,{serial:!0},r)},r.exportTo(n,"ta"),n});
define("ta/Core/TA.FireEvent",["vanillajs"],function(){var n={},e={};return n.on=function(n,r){var i=e[n];i||(i=e[n]=[]),i.push(r)},n.fireEvent=function(n,r){var i=Array.prototype.slice.call(arguments),t=e[n];i.shift(),t&&t.slice(0).forEach(function(n){try{n.apply(null,i)}catch(n){window.IS_DEBUG&&(console.error||console.log)("Exception in TA.FireEvent handler",n)}})},n.off=function(n,r){if(r){var i,t=e[n];t instanceof Array&&(i=t.indexOf(r),i>=0&&t.splice(i,1))}else delete e[n]},n.hasEventListener=function(n){return!!e[n]},n});
define("ta/Core/TA.Event",["vanillajs","common/trackingStreams","ns-exporter","ta/Core/TA.FireEvent"],function(vanilla,tracks,nsExporter,fireEvent){function _makeClosure(e,t){var n=this;return t=Array.prototype.slice.call(t),function(){e.apply(n,t)}}function QueueTimer(e,t){var n=0,r=0,o=[],a=0,u=!1;this.start=function(){n&&clearTimeout(n),a=Date.now()},this.end=function(i){var c=Date.now(),f=c-a;r+=f;var l=""+f+"ms ["+(i||"")+"]",s=e+(t?"-after":"");u?console.error("Straggler for "+s+": "+l):(o.push(l),n=setTimeout(function(){console.error("Timing for "+s+": "+r+"ms\n"+o.sort(function(e,t){return parseInt(e)-parseInt(t)}).join("\n")),u=!0},2e3))}}var exports={on:fireEvent.on,off:fireEvent.off,fireEvent:fireEvent.fireEvent,hasEventListener:fireEvent.hasEventListener};exports.call=function(e,t,n,r){if(null==t)return IS_DEBUG&&alert("You must pass the event.\n\nUsage:\nta.call('ta.namespace.Class.function', event);"),!1;if(null==e)return IS_DEBUG&&alert("ta.call of undefined function"),!1;var o=e;if("function"==typeof e)e="<func>";else if(!/^ta\.[\w\d\.]+$/.test(e))return IS_DEBUG&&alert("Invalid function name. Must be of the form: ta.namespace.Class.function"),!1;var a=t||window.event;["stopPropagation","preventDefault"].forEach(function(e){a[e]||(a[e]=function(){})}),a.stop||(a.stop=function(){a.preventDefault(),a.stopPropagation()}),n||(n=a.target||a.srcElement),n||tracks.error(null,"ta.call re-wrap fail (non-DOM element) - "+e,t,{"funcName":e});var u=arguments,i=Array.prototype.slice.call(u,3);i.splice(0,0,a,n);try{return i.unshift({callback:_ta_call_defer,evt:a}),i.unshift(o),exports.run.apply(null,i)}catch(n){tracks.error(n,"ta.call - "+e,t)}return!1};var _ta_call_defer=function(e,t){t&&delete t.evt,exports.run.apply(null,arguments)};exports.run=function(e,t){var n=arguments,r=Array.prototype.slice.call(n,2);try{var o=exports.fn(e);if("function"==typeof o){var a=o.apply(window,Array.prototype.slice.call(r));if(t&&t.onComplete){var u=exports.fn(t.onComplete);u&&u(a)}return a}t&&t.evt&&(t.evt.stopPropagation?t.evt.stopPropagation():t.evt.cancelBubble=!0,t.evt.preventDefault?t.evt.preventDefault():t.evt.returnValue=!1);var i=_makeClosure(t&&t.callback||exports.run,arguments);require(["trjs!ta/Core/TA.Load"],function(t){try{t.load(e,i)}catch(t){tracks.error(t,"ta.run - "+e)}})}catch(t){tracks.error(t,"ta.run - "+e)}return!1};var OneTimeFunctionQueue=function(e,t,n){function r(){u=!0,c()}var o,a=[],u=!!n,i=function(n,r){o&&o.start();try{n()}catch(n){try{tracks.error(n,"OneTimeFunctionQueue "+e+(t?"-after":"")+(r?"-"+r:""))}catch(e){}}o&&o.end(r)},c=function(){if(a.sort(function(e,t){return e.priority-t.priority||e.subpriority-t.subpriority}),t){var e=1;a.forEach(function(t){setTimeout(i.bind(null,t.func,t.name),e++)})}else a.forEach(function(e){i(e.func,e.name)});a=[]};null!=e&&(window.addEventListener?window.addEventListener(e,r,!1):window.attachEvent&&("DOMContentLoaded"==e?window.attachEvent("onload",r):"load"==e?window.attachEvent("on"+e,function(){setTimeout(r,1)}):window.attachEvent("on"+e,r))),this.addToQueue=function(t,n,r){return t?("string"==typeof n&&(r=n,n=!1),void(u?i(t,r):(n=n||100+a.length,a.push({func:t,priority:n,name:r,subpriority:a.length})))):void tracks.error(null,"addToQueue for "+e+" queue - no function")},this.executeQueue=function(){c()}},loaded="undefined"!=typeof document&&"complete"===document.readyState,ready="undefined"!=typeof document&&"interactive"===document.readyState||loaded,_readyQ=new OneTimeFunctionQueue("DOMContentLoaded",!1,ready),_loadQ=new OneTimeFunctionQueue("load",!1,loaded),_afterLoadQ=new OneTimeFunctionQueue("load",!0);ready||_loadQ.addToQueue(function(){_readyQ.executeQueue()},-999999999,"checkReadyQueue"),_loadQ.addToQueue(function(){_afterLoadQ.executeQueue()},999999999,"afterLoadQueue"),exports.queueForReady=function(e,t,n){_readyQ.addToQueue(e,t,n)},exports.queueForLoad=function(e,t,n){_loadQ.addToQueue(e,t,n)},exports.queueForAfterLoad=function(e,t){_afterLoadQ.addToQueue(e,0,t)},exports.fn=function(fn){switch(typeof fn){case"function":return fn;case"string":var f=!1;try{f=eval(fn)}catch(e){}if(!f){var ns=fn.split("."),n=ns.pop();try{ns=eval(ns.join(".")),f=ns&&ns._magic&&ns._magic.partial(n)}catch(e){}}if(f&&"function"==typeof f)return f}return null},exports.fireClick=function(e){if(document.createEvent){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),e.dispatchEvent(t)}else document.createEventObject?e.fireEvent("onclick"):"function"==typeof e.onclick&&e.onclick()},exports.throttle=function(e,t,n,r){function o(){delete m_throttles[t],a.cb()}var a,u=(new Date).getTime();if(t in m_throttles){if(a=m_throttles[t],u-a.lastReset<a.minResolution)return void(a.cb=e)}else a=m_throttles[t]={start:u,minResolution:Math.max(Math.floor(n/10),50)};a.cb=e,a.timeout&&clearTimeout(a.timeout),r&&u-a.start>r?o():(a.lastReset=u,a.timeout=setTimeout(o,n))};var m_throttles={};return nsExporter.exportTo(exports,ta),exports});
define("ta/util/Error",["vanillajs","api-mod","utils/ajax","ns-exporter","mixins/Events","utils/browserutils","ta/util/Cookie","ta"],function(r,e,t,o,n,a,i,c){function s(r,t){var o="_extraInfoError_:Problem storing extra info.",n={},a="";try{if(Array.isArray(t)||"[object Arguments]"===Object.prototype.toString.call(t)){for(var i={},c=0;c<t.length;c++){var s=t[c],l=typeof s;"string"===l||"number"===l||"boolean"===l?i[c]=s:i[c]=l}t=i}e.merge(n,r,t)}catch(e){n=r}try{if(a=JSON.stringify(n))return a.length>y&&(a=a.substring(0,y)),a.replace(/[\r\n]/g,"")}catch(r){}return o}function l(r){return"undefined"!=typeof r&&null!==r?r.toString().replace(/[\r\n]/g,""):"null or undefined"}function f(r,e,t){var o,n="";if(r&&r.stack)try{var a,i,c=r.stack.split("\n"),s=[],l=0;c[1]&&c[1].match(/\.record /)&&c.splice(1,1);for(var f=0;f<c.length;f++){var u=c[f];if(!(u.indexOf(r.message)>=0)){var d=!!u.match(/\/jquery-|\/mootools|\(native\)|\(native code\)|\[native code]/);u=u.replace(/^(.*)http.+\/([^\/]*)/,"$1$2").replace(/(\?.{20})[^:)]+/,"$1...").replace(/^(?:\s+\w+\s*([^\s]+)|([^\s]+)@)\s*\(?([^)]*)\)?$/,"$1$2 ($3)").replace(/\s*\(\)/,""),a&&d?i||(s.push("..."),i=!0,l++):(s.push(u),d&&l++),d||(i=!1),a=d}}s.length-l<=w&&(o=!0),n=s.join()}catch(r){h&&(console.error("Debug: error.stack handler failed "),console.error(r))}if(!n&&t)try{for(var g=[],m=t.caller,v=0;m&&v++<20;){var S=m.toString(),y=S.replace(/^function\s+([^(\s]+).*/,"$1")||"anonymous";if(!y.match(/onErrorFunc|_getErrorStack/)){var R=Math.min(S.length,100),E=S.substring(0,R).replace(/(\n|\r|\'|\")/g," ");g.push(E)}m=m.caller}g.length<5&&(o=!0),n=g.join(" :: ")}catch(r){h&&console.error("Debug: exception getting callee stack "+r)}if(!n&&r&&r.filename&&(n=r.filename.replace(/^.*\/([^/]+)$/,"$1"),r.lineno&&(n+=":"+r.lineno),r.colno&&(n+=":"+r.colno)),e&&o){var b=p.getSelectorString(e);b&&(n&&(n+=", "),n+="DOM_STACK: "+b)}return n?n:"failed to get stack"}function u(){var r=[];return[].forEach.call(document.getElementsByTagName("script"),function(e){var t=e.src;d(t)&&r.push(t.substring(t.indexOf("/js")+1))}),r.join(", ").substring(0,y)}function d(r){if(!r||!r.indexOf)return!1;var e=window.CDNHOST||"";return h&&""==e?null!=r.match(/(js3\/|js\/)/):0==r.indexOf(e)}function g(r){if(!r||!r.indexOf)return!1;var e="noPage";try{e=window.location.href}catch(r){}return r===e}function m(){var r=(a.Platform.ios||a.Platform.android)&&!window.isTabletOnFullSite,e=document.cookie.indexOf("TAmobilemode=main")>=0;return r&&!e}function v(r){if(m()){var e={eMsg:"msg",eStak:"stack",eUrl:"url"};for(var t in e){var o=e[t];r[o]=r[t]}r.file=r.url||document.URL,r.site=window.SITE_VERSION,r.loaded=O?"dom_ready":"not_loaded"}}var p={},S=new n("error","beforeSend"),h=window.IS_DEBUG,y=3e3,R=h?100:10,w=4,E="unset",b=0,O=!1;return p.record=function(r,e,o,n,a,y){y=y||{},r?"string"==typeof r&&(r=new Error(r)):r=new Error("Stub error to build stack.");var w=!1;try{var O=Object.prototype.toString.call(r);w=O===Object.prototype.toString.call(new Error)||O.match(/\[object Error[\w]*]/)}catch(r){}if(w&&!r.stack)try{throw r}catch(e){e&&e.stack&&(r=e)}o=o||window.event||{};var N=o.target;if(b>=R)return void(h&&console.error("Maximum JS errors reached. Not reporting."));b++;var j=!1;try{j=document.body.className.match(/\bjs_logging\b/)||m()}catch(r){}if(j){var _=!0;n&&n.hasOwnProperty("error_script")&&!d(n.error_script)&&!g(n.error_script)&&(_=!1);var k={};if(N)try{k.eTarg=p.getSelectorString(N)}catch(r){}"undefined"!=typeof debugCacheKey&&(k.key=debugCacheKey);var T=window.pageServlet;T||(T="unknown"),k.servlet=T,a&&"string"==typeof a||(a="ERROR"),_?!h&&b>1?(a="WARN",k.warnReason="notFirstJSError"):"object"==typeof r&&"WARN"===r.level&&(a="WARN"):(a="WARN",k.warnReason="externalError");var A={"extraInfoError":"Problem storing extra info"},x={};try{var D="",L="";N&&("function"!=typeof N.id&&(D=N.id),L=N.className);var P=window.serverPool||"",I="";window.MooTools&&(I+="MooTools "),require.defined("lib/jquery-amd")&&(I+="jQuery "),x={"TARGET_ID":D,"TARGET_CLASS":L,"PAGE_UID":c&&c.uid,"INTERNAL_JS":u(),"CLIENT_POOL":P,"COOKIES_ENABLED":i.canSet(),"JS_LIBS":I},_||(x.INTERNAL_ERROR="false"),b>1&&(x.PRIOR_JS_PAGE_ERRORS=b-1)}catch(r){n=A}k.xInfo=s(x,n);try{k.eUrl=window.location.href}catch(r){}try{var J=c.page.getDates("STAYDATES");J?k.eDates=J[0].toLocaleDateString("en-US")+" - "+J[1].toLocaleDateString("en-US"):k.eDates="No dates set"}catch(r){}var $="No Error";try{if(w)$=r.name+"-"+r.message;else if("object"==typeof r)if(r.name&&r.message)$=r.name+"-"+r.message;else{$="non-Error object "+Object.prototype.toString.call(r)+" passed, sample properties - ";var M=0;for(var C in r)if(r.hasOwnProperty(C)&&($+=C.substring(0,30)+": "+(r[C]&&r[C].toString?r[C].toString().substring(0,20):r[C])+", ",++M>4))break}else $="non-Object error passed: "+(""+r).substring(0,60);$=$.replace(/[\r\n]/g,"")}catch(r){}k.eMsg=$;try{k.eBlk=l(e).substring(0,150)}catch(r){}var U;if(!r.stack)try{U=o&&o.callee||arguments&&arguments.callee}catch(r){}var B=f(r,N,U);B&&(k.eStak=B);try{S.emit("beforeSend",k)}catch(r){}k.eLogLevel=a,v(k),h&&!y.isglobal&&(console.error("/JSErrorRecord:"),r.stack?console.error(r.stack):B?console.error(B):console.error("No stack"));try{t({url:"/JSErrorRecord",data:k,method:"POST",type:"POST"})}catch(r){k={"eBlk":"JSErrorRecord Error","servlet":T,"eLogLevel":"ERROR","eMsg":"no error retrieved"},t({url:"/JSErrorRecord",data:k})}if(h&&(window.ERRORS||(window.ERRORS=[])).push(k),S.emit("error",$,e,a,k.eStak),"unset"==E&&(E=i.readRaw("JS_ERROR_HANDLING")),E){if(E.match(/alert/)){var G="";for(var F in k)k.hasOwnProperty(F)&&(G=G+F+": "+k[F]+"\n");alert(G)}E.match(/console/)&&window.console&&console.error(k)}}},p.getSelectorString=function(r){for(var e=[];r&&"HTML"!=r.tagName&&r!=document;r=r.parentNode){var t=r.tagName;r.id&&(t+="#"+r.id),r.className&&(t+="."+r.className.trim().replace(/\s+/g,".")),e.unshift(t)}return e.join(">")},p.ajaxFailure=function(r,t,o,n){p.record(null,r,null,e.merge({status:t.status},o),n||"ERROR")},p.enableDomReadyParam=function(){O=!0},p.on=S.on.bind(S),p.off=S.off.bind(S),(a.firefox&&a.version<5||a.ie&&a.version<10)&&(p.record=function(){window.console&&console.error("Unreported error: "+[].slice.call(arguments).join(", "))}),o.createNs(p,"ta.util","error"),p});
define("ta/util/Selenium",["vanillajs","ns-exporter","mixins/Events","ta/Core/TA.LocalStorage","ta/util/Error"],function(r,t,e,n,o){var a={},i=" :: ",l="lastError";return a.lastErrorOnPage=function(){return n.getObject(l)},o.on("error",function(r,t,e,o){"ERROR"===e&&n.set(l,e+i+t+i+r+i+"Stack -> "+o)}),t.exportTo(a,"ta.util.selenium"),a});
define("ta/util/roybatty",["vanillajs","utils/ajax","ta/Core/TA.Event","ta/util/Error","ta/util/Cookie"],function(e,t,r,o,a){var i=!1;return r.queueForLoad(function(){if(window.taSecureToken)try{if(!window.taEarlyRoyBattyStatus){var e=a.readRaw("roybatty");if(e){var r=e.split(",");if(2==r.length){var n=parseInt(r[1],10);a.write("roybatty",taSecureToken+","+n,null,"/",cookieDomain)}else 1==r.length?a.write("roybatty",taSecureToken):o.record(null,"royBatty -- Bad value in cookie: "+e)}else a.write("roybatty",taSecureToken+",1",null,"/",cookieDomain),t(require.defined("ta/Browser")&&require("ta/Browser").isIEMetro()?"/CookiePingback?metroBrowser=true":"/CookiePingback")}i=!0}catch(e){o.record(e,"javascript exection bot detection error")}},"RoyBatty"),{isDone:function(){return i}}});
window.ta||(window.ta={}),define("ta/util/RecordInterruption",["vanillajs","ta/Core/TA.Record","ta/util/Error"],function(t,r,n){"use strict";var e="interruption_record",o=["popup","popunder","gate","other"],i=function(t,r){n.record(r,t,null,null)},u=function(t){for(var r=0;r<o.length;r++)if(t===o[r])return!0;return!1};return{record:function(t,n){try{u(t)?n?r.trackEventOnPage(e,t,n.replace(",",""),0,!0):i("ta/util/RecordInterruption: Name cannot be null or blank"):i("ta/util/RecordInterruption: Invalid type")}catch(t){i("ta/util/RecordInterruption: exception tracking event",t)}}}});
define("ta/Core/TA.Prerender",["vanillajs","api-mod","ta/Core/TA.Record","ta/util/Error"],function(t,e,i,r,n){"use strict";var a={states:{PREFETCH_SENT:"prefetchSent",CLEAR:"clear"}},s=function(t,e,i,n,a){if(r._validatedTrackEventArray&&r._GARecordRequest){var s=r._validatedTrackEventArray(t,e,i,n,a);return r._GARecordRequest(s).get(),!0}return!1},d=function(){if("visibilityState"in document)return a._visibilityState="visibilityState",void(a._visibilitystatechanged="visibilitychange");for(var t=["webkit","moz","ms","o"],e=0;e<t.length;e++)t[e]+"VisibilityState"in document&&(a._visibilityState=t[e]+"VisibilityState",a._visibilitystatechanged=t[e]+"visibilitychange")},c=function(){try{a._state===a.states.PREFETCH_SENT&&"prerender"!==document[a._visibilityState]&&(s("Prerender","shown","",0,!0),a._state=a.states.CLEAR)}catch(t){n.record(t)}};return a._init=function(t){try{if(a._enabled=t,a._state=a.states.CLEAR,d(),!a.isSupported()||!a.isEnabled())return;"prerender"===document[a._visibilityState]&&s("Prerender","prefetch","",0,!0)&&(a._state=a.states.PREFETCH_SENT,document.addEventListener(a._visibilitystatechanged,c,!1))}catch(t){n.record(t)}},a.isEnabled=function(){return a._enabled},a.isSupported=function(){return void 0!==a._visibilityState},a});
define("ta/projects",["vanillajs","ns-exporter","ta/Core/TA.Store"],function(t,e,n){function s(t,e){return!!(t&&e&&t.className.match(new RegExp("\\b"+e+"\\b")))}function r(t,e,n){return i.has(t)||i.setIfClass(t,e,n),i.get(t)}var i={vals:{},set:function(t,e){i.vals[t]=e},setIfClass:function(t,e,n){"string"==typeof e&&(e=document.getElementById(e)),i.vals[t]=s(e,n)},get:function(t){return i.vals[t]},has:function(t){return t in i.vals}},a={};return a.isHotelsRedesign2011=function(){var t="isHotelsRedesign2011";return i.has(t)||i.setIfClass(t,"HAC_SMRY","hotels_re_2011"),i.get(t)},a.isSmartDealsFilters=function(){return r("smartDealsFilters","DEALS","sdfilters")},a.isAttractionsRedesign2012=function(){return r("isAttractionsRedesign2012","ATTRACTIONS_2012","gridA")},a.isMetaHomepageIntegration2013=function(){return r("isMetaHomepageIntegration2013","PPT","ppt_container")},a.isMetaHotels2013=function(){return r("isMetaHotels2013","PAGE","meta_hotels")},a.isMetaHotelsRequest=function(){return n.has("isMetaHotelsRequest")},a.isSmartDealsHSXSortEnabled=function(){return n.has("isSmartDealsHSXSortEnabled")},a.isHRTabs2014=function(){return n.has("hr_tabs_2014")},a.isTabletAlbumViewer=function(){return n.retrieve("tabletAlbumPhotoLightbox.enabled")},a.isAirport=function(){return"Airport"==window.pageServlet},e.exportTo(a,"ta"),a});
define("ta/Browser",["vanillajs","ns-exporter"],function(e,n){var t,r={},i=function(){return navigator.userAgent.indexOf("MSIE 10.0")>=0},o=r.isIE11orHigher=function(){return navigator.userAgent.toLowerCase().indexOf("trident/7.")>-1||navigator.userAgent.toLowerCase().indexOf("msie 11.")>-1};return r.isIE9orHigher=function(){return navigator.appVersion.indexOf("MSIE 9")>=0||i()||o()},r.isIE10Metro=function(){return i()&&r.isIEMetro()},r.isIEMetro=function(){var e=null,n=o(),t=n?127:0,r=window.innerWidth==screen.width&&screen.height-window.innerHeight===t;try{e=!!new ActiveXObject("htmlfile")}catch(n){e=!1}return!e&&r&&(n||i())},r.isIE=function(){return navigator.userAgent.indexOf("MSIE")>=0},r.isChrome=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)},r.getFlashVersion=function(){if("number"!=typeof t){var e;try{e=navigator.plugins["Shockwave Flash"].description}catch(n){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(e){}}var n=(e||"0 r0").match(/\d+/g);t=Number(n[0]||"0."+n[1])||0}return t},r.isChromeIncognito=function(e){var n=window.RequestFileSystem||window.webkitRequestFileSystem;return n&&"function"==typeof n?void n(window.TEMPORARY,100,function(){e("normal")},function(){e("incognito")}):void e("undetermined")},n.exportTo(r,"ta.browser"),r});
define("ta/util/ScreenSizeRecord",["vanillajs","ta/Core/TA.LocalStorage","ta/Core/TA.Record","ta/Core/TA.Event"],function(e,n,t,i){function o(){var e=document.documentElement,n=document.body,t=window.innerWidth||e.clientWidth||n.clientWidth,i=window.innerHeight||e.clientHeight||n.clientHeight,o=screen.width,r=screen.height;return"s"+o+"x"+r+"b"+t+"x"+i}function r(e){var i=o(),r=n.getSessionKey(d);i!==r&&(n.setSessionKey(d,i),t.trackEventOnPage("screenSizeRecord",e,i))}function c(){function e(){t&&clearTimeout(t),t=setTimeout(function(){r("resize")},250)}if(ta.retrieve("screenSizeRecord")&&n.enabled){r("load");var t;window.addEventListener?window.addEventListener("resize",e,!1):window.attachEvent&&window.attachEvent("onresize",e)}}var d="screenSizeRecord";i.queueForLoad(c,"ScreenSizeRecord.onLoad")});
define("utils/BatchRequest",["ajax-request"],function(e){"use strict";function n(e,n){r[e]=r[e]||[],r[e].push(n),i&&clearTimeout(i),i=setTimeout(t,a)}function t(n){for(var t in r)if(r.hasOwnProperty(t)){for(var a={batched:!0},i=r[t],u=0;u<i.length;u++)for(var o in i[u])i[u].hasOwnProperty(o)&&(a["data["+u+"]["+o+"]"]=i[u][o]);e({method:"POST",url:t,data:a,synchronous:n})}r={}}var a=1500,r={},i=null;return window.addEventListener("onpagehide"in window?"pagehide":"unload",t.bind(null,!0)),{queue:n}});
define("utils/ceUtils",["ta","vanillajs","api-mod","mixins/Events"],function(n,t,e,i){function o(){e.mixin(this,new i("showExplanatoryOverlay","hideExplanatoryOverlay","beginInstall","cancelInstall","test"));var n=this;this.detectExtension=function(n,t,e){var i=new Image;i.src="chrome-extension://"+n,i.onload=function(){t&&t()},i.onerror=function(){e&&e()}},this.isChromeExtensionInstalled=function(t,e){n.detectExtension(n.CHROME_EXT_TAG,t,e)}}return o.prototype.CHROME_EXT_ID="oiekdmlabennjdpgimlcpmphdjphlcha",o.prototype.CHROME_EXT_TAG=o.prototype.CHROME_EXT_ID+"/images/owl-48.png",new o});
define("babel/babel-helpers",[],function(){var e={};return e["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.jsx=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(r,t,n,o){var i=r&&r.defaultProps,u=arguments.length-3;if(t||0===u||(t={}),t&&i)for(var a in i)void 0===t[a]&&(t[a]=i[a]);else t||(t=i||{});if(1===u)t.children=o;else if(u>1){for(var f=Array(u),l=0;l<u;l++)f[l]=arguments[l+3];t.children=f}return{$$typeof:e,type:r,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}}(),e.asyncIterator=function(e){if("function"==typeof Symbol){if(Symbol.asyncIterator){var r=e[Symbol.asyncIterator];if(null!=r)return r.call(e)}if(Symbol.iterator)return e[Symbol.iterator]()}throw new TypeError("Object is not async iterable")},e.asyncGenerator=function(){function e(e){this.value=e}function r(r){function t(e,r){return new Promise(function(t,o){var a={key:e,arg:r,resolve:t,reject:o,next:null};u?u=u.next=a:(i=u=a,n(e,r))})}function n(t,i){try{var u=r[t](i),a=u.value;a instanceof e?Promise.resolve(a.value).then(function(e){n("next",e)},function(e){n("throw",e)}):o(u.done?"return":"normal",u.value)}catch(e){o("throw",e)}}function o(e,r){switch(e){case"return":i.resolve({value:r,done:!0});break;case"throw":i.reject(r);break;default:i.resolve({value:r,done:!1})}i=i.next,i?n(i.key,i.arg):u=null}var i,u;this._invoke=t,"function"!=typeof r["return"]&&(this["return"]=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(r.prototype[Symbol.asyncIterator]=function(){return this}),r.prototype.next=function(e){return this._invoke("next",e)},r.prototype["throw"]=function(e){return this._invoke("throw",e)},r.prototype["return"]=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new r(e.apply(this,arguments))}},"await":function(r){return new e(r)}}}(),e.asyncGeneratorDelegate=function(e,r){function t(t,n){return o=!0,n=new Promise(function(r){r(e[t](n))}),{done:!1,value:r(n)}}var n={},o=!1;return"function"==typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return this}),n.next=function(e){return o?(o=!1,e):t("next",e)},"function"==typeof e["throw"]&&(n["throw"]=function(e){if(o)throw o=!1,e;return t("throw",e)}),"function"==typeof e["return"]&&(n["return"]=function(e){return t("return",e)}),n},e.asyncToGenerator=function(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(o,i){try{var u=r[o](i),a=u.value}catch(e){return void t(e)}return u.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}},e.classCallCheck=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},e.createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),e.defineEnumerableProperties=function(e,r){for(var t in r){var n=r[t];n.configurable=n.enumerable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,t,n)}return e},e.defaults=function(e,r){for(var t=Object.getOwnPropertyNames(r),n=0;n<t.length;n++){var o=t[n],i=Object.getOwnPropertyDescriptor(r,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e},e.defineProperty=function(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e},e["extends"]=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},e.get=function e(r,t,n){null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,t);if(void 0===o){var i=Object.getPrototypeOf(r);return null===i?void 0:e(i,t,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},e.inherits=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},e["instanceof"]=function(e,r){return null!=r&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](e):e instanceof r},e.interopRequireDefault=function(e){return e&&e.__esModule?e:{"default":e}},e.interopRequireWildcard=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r["default"]=e,r},e.newArrowCheck=function(e,r){if(e!==r)throw new TypeError("Cannot instantiate an arrow function")},e.objectDestructuringEmpty=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},e.objectWithoutProperties=function(e,r){var t={};for(var n in e)r.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},e.possibleConstructorReturn=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r},e.selfGlobal="undefined"==typeof global?self:global,e.set=function e(r,t,n,o){var i=Object.getOwnPropertyDescriptor(r,t);if(void 0===i){var u=Object.getPrototypeOf(r);null!==u&&e(u,t,n,o)}else if("value"in i&&i.writable)i.value=n;else{var a=i.set;void 0!==a&&a.call(o,n)}return n},e.slicedToArray=function(){function e(e,r){var t=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(t.push(u.value),!r||t.length!==r);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw i}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e.slicedToArrayLoose=function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var t,n=[],o=e[Symbol.iterator]();!(t=o.next()).done&&(n.push(t.value),!r||n.length!==r););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},e.taggedTemplateLiteral=function(e,r){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))},e.taggedTemplateLiteralLoose=function(e,r){return e.raw=r,e},e.temporalRef=function(e,r,t){if(e===t)throw new ReferenceError(r+" is not defined - temporal dead zone");return e},e.temporalUndefined={},e.toArray=function(e){return Array.isArray(e)?e:Array.from(e)},e.toConsumableArray=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)},e});
define("utils/IntlFormatter",["babel/babel-helpers"],function(e){return function(){function r(t,a){e.classCallCheck(this,r),this.locale=t,this.currency=a}return e.createClass(r,[{key:"formatNumber",value:function(e,r){switch(e){case"one":return new Intl.NumberFormat(this.locale,{minimumFractionDigits:1,maximumFractionDigits:1}).format(r);case"integer":return new Intl.NumberFormat(this.locale,{minimumFractionDigits:0,maximumFractionDigits:0}).format(r);default:return new Intl.NumberFormat(this.locale).format(r)}}},{key:"formatPercentage",value:function(e,r){switch(e){case"one":return new Intl.NumberFormat(this.locale,{style:"percent",minimumFractionDigits:1,maximumFractionDigits:1}).format(r);case"integer":return new Intl.NumberFormat(this.locale,{style:"percent",minimumFractionDigits:0,maximumFractionDigits:0}).format(r);default:return new Intl.NumberFormat(this.locale,{style:"percent"}).format(r)}}},{key:"formatCurrency",value:function(e){return this.alternateCurrencyFormat(new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency}).format(e))}},{key:"formatCurrencyInteger",value:function(e){return this.alternateCurrencyFormat(new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,minimumFractionDigits:0,maximumFractionDigits:0}).format(e))}},{key:"formatCurrencyISO",value:function(e){return new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:"name"}).format(e)}},{key:"formatCurrencyISOInteger",value:function(e){return new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,minimumFractionDigits:0,maximumFractionDigits:0,currencyDisplay:"name"}).format(e)}},{key:"formatDate",value:function(e,r){var t={year:"numeric",month:"numeric",day:"numeric"};switch(e){case"date_short":t={year:"numeric",month:"numeric",day:"numeric"};break;case"date_medium":t={month:"short",day:"numeric",year:"numeric"};break;case"date_long":t={month:"long",day:"numeric",year:"numeric"};break;case"week_date_short":t={month:"numeric",day:"numeric",weekday:"short"};break;case"week_date_short_v2":t={month:"2-digit",day:"2-digit",weekday:"short",year:"2-digit"};break;case"week_date_short_v3":t={month:"2-digit",day:"2-digit",weekday:"short"};break;case"week_date_long":t={weekday:"long",day:"numeric",month:"long",year:"numeric"};break;case"week_long_date_short_v2":t={weekday:"long",day:"2-digit",month:"2-digit",year:"2-digit"};break;case"date_weekday_long":t={weekday:"long"};break;case"week_long_date_medium_month":t={weekday:"long",month:"short",day:"numeric"};break;case"week_date_short_year_long":t={weekday:"short",month:"2-digit",day:"2-digit",year:"numeric"};break;case"date_short_year_long":t={year:"numeric",month:"2-digit",day:"2-digit"};break;case"date_short_v2":t={year:"2-digit",month:"2-digit",day:"2-digit"};break;case"date_medium_month_year":t={month:"short",year:"numeric"};break;case"date_full_month_year":t={month:"long",year:"numeric"};break;case"date_medium_month":t={month:"short",day:"numeric"};break;case"date_full_month":t={month:"long",day:"numeric"};break;case"time_12_24":t={hour:"numeric",minute:"2-digit"};break;case"time_hour_12_am_pm":t={hour:"numeric",hour12:!0};break;case"date_short_12_24":t={month:"numeric",day:"2-digit",year:"numeric",hour:"numeric",minute:"2-digit"};break;case"date_medium_12_24":t={month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"};break;case"date_long_12_24":t={month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"};break;case"week_date_short_12_24":t={month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",weekday:"short"};break;case"date_weekday":t={weekday:"short"};break;case"date_short_month":t={month:"numeric",day:"numeric"}}return new Intl.DateTimeFormat(this.locale,t).format(r)}},{key:"alternateCurrencyFormat",value:function(e){switch("undefined"!=typeof ta&&ta.retrieve&&ta.retrieve("alternateCurrencyLabel")){case"hotels_alternative_currency_brazil":return e.replace(/\u0024/,"$ ");case"hotels_alternative_currency_russia":return e.replace(/\u20BD/,"руб");case"hotels_alternative_currency_france":case"hotels_alternative_currency_germany":return e.replace(/(\u00A0|\u0020)([a-zA-Z]*)([\W])/,"$2$3");case"hotels_alternative_currency_taiwan":return e.replace(/\u0024/,"NT$");case"hotels_alternative_currency_canada":case"hotels_alternative_currency_canadafr":return e.replace(/\u0024/,"C$");case"hotels_alternative_currency_australia":return e.replace(/\u0024/,"AU$");case"hotels_alternative_currency_singapore":return e.replace(/\u0024/,"S$");case"hotels_alternative_currency_italy":return e.replace(" €","€");case"hotels_alternative_currency_india":return e.replace("₹ ","₹");case"hotels_alternative_currency_argentina":return e.replace("$ ","$");case"hotels_alternative_currency_netherlands":return e.replace("€ ","€");case"hotels_alternative_currency_southkorea":return e.replace("₩","")+"원";case"hotels_alternative_currency_thailand":return e.replace("THB ","")+" บาท"}return e}}]),r}()});
define("Logging",[],function(){var e="undefined"!=typeof IS_DEBUG&&IS_DEBUG?4:1;"boolean"==typeof __SERVER__&&__SERVER__&&(e=4);for(var n={},o=["error","warn","dir","info","debug"],r=0;r<o.length;r++){var l=o[r];n[l]=function(n,o){return function(){e<o||"undefined"!=typeof console&&console[n]&&console[n].apply&&console[n].apply(console,Array.prototype.slice.call(arguments))}}(l,r)}return n.setLevel=function(n){e=n},n});
define("ta/util/Deferred",["vanillajs","ns-exporter"],function(e,r){"use strict";function t(e){l.prototype[e]=function(r,t){return i(this,e,t?r.bind(t):r)}}for(var n=["success","failure","always","progress"],u={"resolved":["success","always"],"rejected":["failure","always"]},l=function(){},a=0;a<n.length;a++)t(n[a]);l.prototype.then=function(e,r){var t=this.success(e);return r?t.failure(r):t};var o=function(e){var r="pending",t=new l;t.queue=[],t.args=null,t.aplus="boolean"==typeof e&&e,t.status=function(){return r};var n={notify:function(){if(s(r))throw new Error("Promise has already been fulfilled.");var e,n,u,l=Array.prototype.slice.call(arguments);for(n=0,u=t.queue.length;n<u;n++)e=t.queue[n],"progress"===e.hook&&e.callback.apply(null,l);return t},resolve:function(){if(s(r))throw new Error("Promise has already been fulfilled.");return r="resolved",t.args=Array.prototype.slice.call(arguments),f(t)},reject:function(){if(s(r))throw new Error("Promise has already been fulfilled.");return r="rejected",t.args=Array.prototype.slice.call(arguments),f(t)},isFulfilled:function(){return s(r)},promise:function(){return t}};return n},s=function(e){return"resolved"===e||"rejected"===e},i=function(e,r,t){return e.fwd?i(e.fwd,r,t):(e.queue.push({hook:r,callback:t}),f(e))},f=function(e){if(e.fwd)return f(e.fwd);for(var r,t;s(e.status())&&(r=e.queue.shift());)~u[e.status()].indexOf(r.hook)&&(t=r.callback.apply(null,e.args),t instanceof l?(t.queue=t.queue.concat(e.queue.splice(0)),e=e.fwd=t):t&&e.aplus&&(e.args=[t]));return e};return r.createNs(o,"ta.util","Deferred"),o});
define("ta/util/SessionStorage",["vanillajs","ns-exporter"],function(e,t){var n={};return n.canUseSessionStore=function(){try{if(window.sessionStorage){var e="taLsTest";sessionStorage.setItem(e,"1");var t=sessionStorage.getItem(e);return"1"==t}}catch(e){return!1}},n.canUseSessionStore()?(n.setObject=function(e,t){sessionStorage.setItem(e,JSON.stringify(t))},n.getObject=function(e){var t=sessionStorage.getItem(e);return t?JSON.parse(t):null},n.remove=function(e){sessionStorage.removeItem(e)}):(n.setObject=function(){},n.getObject=function(){return null},n.remove=function(){}),t.exportTo(n,"ta.util.sessionStorage"),n});
define("ta/registration/RegEvents",["mixins/Events"],function(e){return new e("success")});
define("facebook/authutils",["api-mod","lib/jquery-amd","Logging","ta/Core/TA.Store","ta/util/Deferred","ta/util/SessionStorage","ta/util/Cookie","ta/util/Error","ta/registration/RegEvents"],function(e,t,n,o,i,s,a,r,u){"use strict";var c=6e5,d="fbAutoLoginTime",f=new i,l=!1,g=function(e,t){if(l)return null;var n=t||"v1.0";return FB.init({appId:e,version:n,status:!0,cookie:!0}),l=!0,f.resolve()},p=function(e){f.promise().success(e)},m=function(){a.setOneTimeCookieOnFQDN("FacebookAuthCode2","ConflictedFBAccount"),window.location.reload()},v=function(e){window.__REDUX_STORE__&&e&&__REDUX_STORE__.dispatch({type:"SET_AUTH_STATE",loggedInUserId:e})},h=function(){var e=new i;return S()?(FB.getLoginStatus(function(n){if("connected"===n.status&&n.authResponse){if(o.has("cached.facebookuid"))return void R(o.retrieve("cached.facebookuid"),n.authResponse.userID);var i=new XMLHttpRequest;i.open("POST","/FacebookConnectAjax",!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send("a=autologin&signedRequest="+encodeURIComponent(n.authResponse.signedRequest)),i.onreadystatechange=function(){if(4==i.readyState){if(200!=i.status)return e.reject();if(e.resolve(),i.responseText){var n=t("<div>"+i.responseText+"</div>").find("#fbcajax_data");if(n.length){var o=n.data("fbAutologinTaUserId");o&&v(o)}}u.emit("success")}}}}),e.promise()):e.reject()},R=function(e,t){e!==""+t&&(r.record(null,"Mismatched Facebook uid between cached value and authResponse. cached: "+e+", response: "+t),m())},w=function(){S()&&FB.getLoginStatus(function(e){if("connected"===e.status&&e.authResponse){if(o.has("cached.facebookuid"))return void R(o.retrieve("cached.facebookuid"),e.authResponse.userID);var t=new XMLHttpRequest;t.open("POST","/FacebookConnectAjax",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send("a=refresh&signedRequest="+encodeURIComponent(e.authResponse.signedRequest))}})},b=function(e,n,o){var i=t("form#"+e),s=i.find("."+n).val();return s&&s.match(/.+\@.+\..+/)?void i.submit():void i.find("."+o).removeClass("hidden")},S=function(){if(s.canUseSessionStore())try{var e=(new Date).getTime(),t=sessionStorage.getItem(d);return null==t?(sessionStorage.setItem(d,e),!0):(t=parseInt(t),e-t<c?(n.info("Skipping FB autologin, tried too recently"),!1):(sessionStorage.setItem(d,e),!0))}catch(e){r.record(null,"Error storing FB autologin attempt: "+e)}return!0},k=function(e,t,n){var o=window.fbAsyncInit;window.fbAsyncInit=function(){g(t,n),o&&o()},function(t,n,o){var i,s=t.getElementsByTagName(n)[0];t.getElementById(o)||(i=t.createElement(n),i.id=o,i.src=e,s.parentNode.insertBefore(i,s))}(document,"script","facebook-jssdk")};return{init:g,autoLogin:h,queueForInit:p,refreshToken:w,submitEmailRegistration:b,loadSdkAndInit:k}});
;
define("google/authutils",["api-mod","lib/jquery-amd","Logging","ta/Core/TA.Store","ta/util/Deferred","ta/util/SessionStorage","ta/util/Error","page-model"],function(e,o,t,r,n,i,a,s){"use strict";var c=6e5,l=40185,u="googleOneTapTime",g="hideGoogleOneTap",d=new n,p=s.session.pageServlet.toLowerCase().replace("mobile",""),_=function(){return d.resolve()},f=function(e){d.promise().success(e)},m=function(e,o,t,r){var i=new n;if(!v())return i.reject();if(r)return require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_control","control_"+p)}),i.reject();var s=e.hint({supportedAuthMethods:[o],supportedIdTokenProviders:[{uri:o,clientId:t}],context:"signIn"});return require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_requested","requested_"+p,l)}),null==s?i.reject():(s.then(function(e){require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_selected","selected_"+p,l)});var o=window.location.pathname,t="/RegistrationController?flow=GOOGLE_ONETAP&pid="+l+"&requireSecure=true&forceDesktop=false&fullscreen=true&returnTo="+o;e.idToken&&(t=t+"&google_id_token="+e.idToken),window.location=t,i.resolve()})["catch"](function(e){switch(e.type){case"userCanceled":return document.cookie=g+"=1;domain="+cookieDomain,void require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_closed","closed_"+p,l)});case"noCredentialsAvailable":return;case"requestFailed":case"operationCanceled":case"illegalConcurrentRequest":case"initializationError":case"configurationError":default:return require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_unknown_error","unknown_error_"+p,l)}),void a.record(null,"Unknown error processing Google onetap hint request - type, message: "+e.type+", "+e.message,null,{},"WARN")}}),i.promise())},v=function(){if(i.canUseSessionStore())try{var e=(new Date).getTime(),o=sessionStorage.getItem(u);return null==o?(sessionStorage.setItem(u,e),!0):(o=parseInt(o),e-o<c?(t.info("Skipping Google onetap, tried too recently"),!1):(sessionStorage.setItem(u,e),!0))}catch(e){a.record(null,"Error storing Google onetap attempt: "+e)}return!0};return{init:_,sendHintRequest:m,queueForInit:f}});
define("utils/responsive",["vanillajs"],function(){"use strict";function t(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function n(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function e(n){return function(){return t()>=n}}function r(n){return function(){return t()<=n}}function i(t,n){return function(){return e(t)()&&r(n)()}}var o={largeMonitor:1600,widescreen:1280,desktop:1024,tablet:768,mobile:767},u=Object.keys(o).sort(function(t,n){return o[n]-o[t]}),c={breakpoints:u,widths:o,atLeast:e,atMost:r,between:i,largeMonitor:e(o.largeMonitor),widescreen:e(o.widescreen),desktop:e(o.desktop),tablet:e(o.tablet),mobile:r(o.mobile),desktopOnly:i(o.desktop,o.widescreen-1),tabletOnly:i(o.tablet,o.desktop-1),landscape:function(){return t()>n()},portrait:function(){return n()>t()},currentBreakpoints:function(){return u.filter(function(t){return"function"==typeof c[t]&&c[t]()})},is:function(t,n,e){var r="function"!=typeof t&&c[t]?c[t]:t;return function(t,i){return r()?"undefined"!=typeof t?t:n:"undefined"!=typeof i?i:e}}};return c});
define("cpm/DblClickAPI",["ta/Core/TA.Store","ta/util/Error","utils/responsive"],function(e,t,a){"use strict";function r(){try{var a=e.retrieve("ads.pageTargeting")||{};for(var r in a)googletag.pubads().setTargeting(r,a[r])}catch(e){t.record(e,"DblClickAPI init: unable to add page targeting")}}function o(){var t=e.retrieve("ads.ppid");t&&googletag.pubads().setPublisherProvidedId(t)}function n(){var e=window.navigator.userAgent,t=!e||e.indexOf("Edge")===-1;return{allowOverlayExpansion:!0,allowPushExpansion:!0,sandbox:t}}var i={},g=!1,s=!1;return i.init=function(){if(window.googletag=window.googletag||{cmd:[]},s=!!e.retrieve("ads.earlyAPILoad"),!s&&!googletag.apiReady){var t=document.createElement("script");t.async=!0,t.type="text/javascript",t.src="//securepubads.g.doubleclick.net/tag/js/gpt.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)}g||(g=!0,googletag.cmd.push(function(){o(),s||(r(),googletag.pubads().setSafeFrameConfig(n())),googletag.enableServices()}))},i});
define("utils/throttle",[],function(){return function(t,n){var e,r;return function(){r&&(clearTimeout(r),r=0);var i=e?n-(Date.now()-e):null;if(null!==i&&i>0)return void(r=setTimeout(t.apply.bind(t,this,arguments),i));var u=t.apply(this,arguments);return e=Date.now(),u}}});
define("cpm/AdController",["lib/jquery-amd","utils/throttle","ta/util/Error"],function(e,n,r){"use strict";function t(n){if(n&&n.adElem&&n.adId){if(/inactive/.test(n.adElem.className))return;var r=!1;if(f.length){for(var t=0;t<f.length;t++){var i=f[t];if(i&&i===n){r=!0;break}}r||f.push(n)}else if(f.push(n),!c){c=!0;var o=e(".scrollingModal");o&&o[0]?o[0].addEventListener("scroll",l):e(window).on("scroll",l)}}}function i(){try{for(var n=!1,t=0,i=f.length;t<i;t++){var o=f[t];o&&o.isInView()&&(o.inject(),n=!0,delete f[t])}if(n){var d=[];f.forEach(function(e){"undefined"!=typeof e&&d.push(e)}),f=d}0==f.length&&(c=!1,e(window).off("scroll",l))}catch(n){c=!1,e(window).off("scroll",l);var a=o&&o.id?o.id:"undefined",u="deferAds: Error with defer. ad ID: "+a;r.record(n,u)}}function o(){f=[]}var d={},l=n(i,150),c=!1,f=[],a=!1,u=!0;return d.deferAd=t,d.setInjectionPaused=function(e){a=e},d.injectionPaused=function(){return a},d.setInjectOnScrollUpReady=function(e){u=e},d.injectOnScrollUpReady=function(){return u},d.clearDeferred=o,d});
define("cpm/DCAdSlot",["common/trackingStreams","ta/Core/TA.Store"],function(t,r){"use strict";var e=!0,a=!0,o={};return o.define=function(o,i,n,l,s){try{var d=/^\/5349\/ta.ta/.test(o)&&Array.isArray(i)&&/^gpt-ad-/.test(n);if(!d)throw Error("invalid ad slot params: "+[].slice.call(arguments));var c=googletag.defineSlot(o,i,n);if(c&&Object.keys(c).length>0)return s||c.setForceSafeFrame(!0),c.addService(googletag.pubads()),l||c.setCollapseEmptyDiv(e,a),c}catch(e){var g=r.has("tripads."+n)?" adId is in taStore":" adId not in taStore",u="Unable to create TripAd for target "+n+" with size "+i.map(String).join("|")+" error: "+e.message+g;t.error(u,null,null,null,"WARN")}return null},o});
define("cpm/TestSiteResolver",[],function(){"use strict";function t(){try{var t=window.localStorage,e=JSON.parse(t.getItem("ads.testMode"));return!!e.value}catch(t){return!1}}function e(t){return t=r.indexOf(t)!==-1?t.replace(/.s$/,".test.s"):n}function a(t){var a="string"==typeof t?t.split("/"):[];return a.length>2&&"5349"===a[1]&&(a[2]=e(a[2]),t=a.join("/")),t}var r=["ta.ta.com.s","ta.ta.ca.s","ta.ta.co.uk.s","ta.ta.cn.s"],n="ta.ta.com.test.s",s={};return s.updateAdStubs=function(t){return Array.isArray(t)&&t.forEach(function(t){t.base=a(t.base)}),t},s.isTestModeEnabled=t,s.updateSite=e,s.updateAdBase=a,s});
define("cpm/Adomik",[],function(){"use strict";var r=8;window.Adomik=window.Adomik||{},Adomik.randomAdGroup=Adomik.randomAdGroup||function(){var r=Math.random();switch(!1){case!(r<.09):return"ad_ex"+Math.floor(100*r);case!(r<.1):return"ad_bc";default:return"ad_opt"}};var t=function(t){var n;if(Array.isArray&&Array.isArray(t))try{n=t.toString().split(",").map(Number).filter(function(r){return r>0}).sort(function(r,t){return r-t})[0]>=r}catch(r){}return n?{"ad_group":Adomik.randomAdGroup(),"ad_h":(new Date).getUTCHours().toString()}:{}},n=function(r){Object.values&&Array.isArray(r)&&r.forEach(function(r){var n=r.getSizes().filter(function(r){return 2===Object.keys(r).length}).map(function(r){return Object.values(r)}),a=t(n);for(var o in a)r.setTargeting(o,a[o])})},a={};return a.getAdParams=t,a.addAdomikParams=n,a});
define("cpm/TripAd",["lib/jquery-amd","ns-exporter","cpm/AdController","cpm/DCAdSlot","cpm/TestSiteResolver","cpm/Adomik","ta/Core/TA.Store","ta/util/Error"],function(e,r,t,n,i,a,o,d){"use strict";var s={},l=function(){return window.screen&&window.screen.orientation?window.screen.orientation.type:null},c=function(r,t){if(r&&r.tgt)try{var n=g(r);if(!n)throw new Error("unable to build refresh ad id for "+r.tgt);var i=u(r.tgt),a=i.cloneNode(!1);a.id=a.adId=n,e(a).removeClass("taEmpty"),e(a).attr("style","");var o=i.parentNode;o.replaceChild(a,i),r.tgt=n,delete t.ad_group,delete t.ad_h;var l=s.init(r);if(l.addTargeting(t),l.setInjected(),googletag.display(n),googletag.pubads().isInitialLoadDisabled()){var c=googletag.pubads().getSlots().find(function(e){return e.getSlotElementId()===r.tgt});c&&googletag.pubads().refresh([c])}}catch(e){d.record(e,"error cloning ad for refresh")}},g=function(e){var r;try{var t=e.tgt;if(t.match(/ref\d+/)){var n=parseInt(t.match(/ref(\d+)/)[1],10)+1;r=t.replace(/ref\d+/,"ref"+n)}else r=t+"-ref1"}catch(e){d.record(e,"error building refresh ad id")}return r},u=function(e){return document.getElementById(e)||document.getElementById(e.replace(/-ref\d+/,""))};return s.init=function(r){if(!document.getElementById(r.tgt))return null;var s=function(r){var s=r,g=r.base,f=r.size,p=r.tgt,v=document.getElementById(p);i.isTestModeEnabled()&&(g=i.updateAdBase(g));var h,m={},w=!1,y=!0,b=!1,A=!1,S=e(v).parent(".ad").height()||0,I=window.performance&&window.performance.mark?window.performance:void 0,E=!!r.isHidden,T=function(e){try{e=N(e),e.pos&&(e.pos=j(e.pos));var r=l();window.isTabletOnFullSite&&r&&(e.oriented=/portrait/.test(r)?"p":"l"),m=e;for(var t in e)h.setTargeting(t,e[t])}catch(e){d.record(e,"error applying ad slot targeting")}},_=function(){if(v&&v.getAttribute("data-targeting")){var e=v.getAttribute("data-targeting");if(window.JSON&&JSON.parse)try{var r=JSON.parse(e.replace(/'/g,'"'));T(r)}catch(e){d.record(e,"error applying element ad targeting")}}},j=function(e){var r=[],t={"top":"a","bottom":"b"};return Array.isArray(e)?e.forEach(function(e){t[e]&&(r.push(e),r.push(t[e]))}):t[e]&&(r.push(e),r.push(t[e])),r.length?r:e},N=function(r){var t=JSON.parse(JSON.stringify(m));for(var n in r)if(t[n]!=r[n])if("kw"!=n&&"proptype"!=n)if(t[n]){Array.isArray(t[n])||(t[n]=[t[n]]),Array.isArray(r[n])||(r[n]=[r[n]]);for(var i=t[n].concat(r[n]),a=[],o=i.length-1;o>-1;o--){var d=i.pop();e.inArray(d,a)===-1&&a.push(d)}t[n]=a.reverse()}else t[n]=r[n];else t[n]=r[n];return t},O=function(t){0==t&&(y=!1);try{var n=u(r.tgt);if(e(n).parent(".ad").add(n).hasClass("inactive"))return;if(w){if(!n)throw new Error("ad refresh fail, elem does not exist: "+p);e(n).removeClass("taEmpty"),y?googletag.pubads().refresh([h]):B()}else googletag.cmd.push(function(){I&&0===I.getEntriesByName("start_first_ad").length&&I.mark("start_first_ad"),googletag.display(p),h&&googletag.pubads().isInitialLoadDisabled()&&googletag.pubads().refresh([h]),w=!0})}catch(e){b||(d.record(e,"unable to inject TripAd for target: "+p),b=!0)}},C=function(){var e=o.retrieve("tripads."+p);e&&t.deferAd(e)},B=function(){c(s,m)},J=function(r){return r?e(r).offset().top:void 0},R=function(e){return e?e.getBoundingClientRect().top:void 0},k=function(){if(E)return!0;if(o.retrieve("ads.deferDisabled")===!0)return!0;if(t.injectionPaused())return!1;var r=o.retrieve("ads.preload_screen_count"),n=r?r*window.innerHeight:0,i=u(v.id);if(i&&e(i).is(":visible")&&"hidden"!=e(i).css("visibility")){var a=e(window).scrollTop();if(A){var d=J(i);return void 0!=d&&(t.injectOnScrollUpReady()&&d+S>a)}var s=R(i);return void 0!==s&&(s>=0&&s<window.innerHeight+n)}return!1},D=function(){var r=u(v.id);if(e(r).parents(".ui_overlay").length>0)A=!1;else{var n=e(window).scrollTop(),i=J(r);A=void 0!=i&&(t.injectOnScrollUpReady()&&n>i+S)}};try{if(window["tripads."+p])h=window["tripads."+p],m=r.custom_targeting,delete window["tripads."+p];else{if(o.has("tripads."+p))throw new Error("ad slot has already been created");if(h=n.define(g,f,p),null===h){var U="TripAd.init failed with adStub: "+JSON.stringify(r);d.record(U,null,null,null,"WARN")}T(a.getAdParams(f)),r.custom_targeting&&r.custom_targeting.companion&&h.addService(googletag.companionAds()),r.custom_targeting&&T(r.custom_targeting),_()}}catch(e){return d.record("Unable to create TripAd for target "+p+": "+e.message,null,null,{},"WARN"),null}return{adId:p,adElem:v,setInjected:function(){w=!0},slotTargeting:m,addTargeting:function(e){T(e)},inject:O,refresh:B,injectWhenViewable:function(e){0==e&&(y=!1);try{D(),k()?O(y):C()}catch(e){d.record(e,"unable to inject/defer TripAd")}},defer:C,isInView:k,checkForScrollUpInjection:D}}(r);return s&&s.adId&&o.store("tripads."+s.adId,s),s},s});
define("mobile/lite/ajax-request",["utils/json-to-url","vanillajs"],function(t){function e(t){var e=document.createElement("a");return e.href=t,e.protocol!==window.location.protocol||e.host!==window.location.hostname}return function(s,o){"object"==typeof s&&(o=s,s=o.url),o=o||{};var n=o.method||o.type||"GET",r="string"==typeof o.data?o.data:t(o.data);return new Promise(function(t,a){var i=new XMLHttpRequest;i.onreadystatechange=function(){this.readyState===XMLHttpRequest.DONE&&(200===this.status?(o.success&&o.success(this.responseText,this.status,i),t(this.responseText)):(o.error&&o.error(i,this.status,this.statusText),a(this.responseText)),o.complete&&o.complete(i,this.statusText))},"get"==n.toLowerCase()&&"string"==typeof r&&r.length>0&&(s+=("?"==r[0]?"":"?")+r,r=null),i.open(n,s,!o.synchronous),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e(s)||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(r)})}});
define("data/DynamicAdsLocation",["mobile/lite/ajax-request","page-model","ta/util/Error"],function(e,r,o){"use strict";var t={},a="/data/1.0/dynamicAdsLocationByGeo/",n="GET";return t.request=function(t,i,c,s,d,u){"number"!=typeof t&&"number"!=typeof i&&"function"!=typeof d&&"function"!=typeof u&&o.record("missing/invalid params: "+[].slice.call(arguments));var m={error:{}},f=function(e){try{var r=JSON.parse(e);d(r)}catch(e){m.error.message="Location date parse error",u(m)}},l=function(e){try{m=JSON.parse(e)}catch(e){m.error.message="Location request error"}u(m)},p={"orderId":i,"puid":c,"sessionId":s},y=r.LOC_ID||window.modelLocId;parseInt(y,10)>0&&(p.locationId=y),e({url:a+t,data:p,method:n}).then(f,l)},t});
define("common/Radio",["babel/babel-helpers"],function(e){var t={},n=/\s+/,r=function(){function t(n){e.classCallCheck(this,t),this.channel=n,this.events={},this.replies={}}return e.createClass(t,[{key:"reply",value:function(e,t,r){var i=this;return e.split(n).forEach(function(e){i.replies[e]||(i.replies[e]=[]),i.replies[e].push({callback:t,context:r||i})},this),this}},{key:"request",value:function(e){if(!this.replies[e])return null;var t=this.replies[e];t=t[t.length-1];for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.callback.apply(t.context,r)}},{key:"requestMany",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.replies[e]?this.replies[e].map(function(e){return e.callback.apply(e.context,n)}):null}},{key:"requestAll",value:function(t,n){for(var r=arguments.length,i=Array(r>2?r-2:0),u=2;u<r;u++)i[u-2]=arguments[u];if(!this.replies[t])return!0;i=[n].concat(e.toConsumableArray(i));var s="function"==typeof n?n:function(e){return e===n};return this.replies[t].reduce(function(e,t){return e&&s(t.callback.apply(t.context,i))},!0)}},{key:"requestAny",value:function(t,n){for(var r=arguments.length,i=Array(r>2?r-2:0),u=2;u<r;u++)i[u-2]=arguments[u];if(!this.replies[t])return!1;i=[n].concat(e.toConsumableArray(i));var s="function"==typeof n?n:function(e){return e===n};return this.replies[t].reduce(function(e,t){return e||s(t.callback.apply(t.context,i))},!1)}},{key:"on",value:function(e,t,r){var i=this;return e.split(n).forEach(function(e){i.events[e]||(i.events[e]=[]),i.events[e].push({callback:t,context:r||i})}),this}},{key:"once",value:function(e,t,r){var i=this;return e.split(n).forEach(function(e){i.events[e]||(i.events[e]=[]),i.events[e].push({callback:t,context:r||i,single:!0})}),this}},{key:"off",value:function(e,t){var r=this;return e.split(n).forEach(function(e){r.events[e]&&(r.events[e]=r.events[e].filter(function(e){return t&&e.callback!==t}))}),this}},{key:"trigger",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.events[e])return this.events[e]=this.events[e].filter(function(e){return e.callback.apply(e.callback,n),!e.single}),this}},{key:"clear",value:function(){return this.events={},this.replies={},this}},{key:"requestEvery",get:function(){return this.requestAll}},{key:"requestSome",get:function(){return this.requestAny}},{key:"one",get:function(){return this.once}},{key:"emit",get:function(){return this.trigger}}]),t}();return function(e){return t[e]||(t[e]=new r(e))}});
define("cpm/HACPollingForAds6",["babel/babel-helpers","mobile/lite/ajax-request","common/Radio","common/trackingStreams"],function(e,t,i,n){function r(e,t){n.error(e,t)}function s(e){switch(e||0){case 0:return 10;case 1:case 2:case 3:case 4:return 1e3;case 5:case 6:case 7:return 1500;case 8:case 9:case 10:return 2e3;case 11:return 5e3;case 12:return 1e4;case 13:return 1e4;case 14:return 1e4;default:return-1}}function a(e,t,i){return/^\d+$/.test(e)&&t?new l(e,t,i):void r(null,"a locationId and providerSet must be provided")}var o="/data/1.0/dynamicAdsHotelPricing/",u="GET",c=new i("hotel_pricing_for_ads"),l=function(){function i(t,n,r){e.classCallCheck(this,i),this._requestedLocation=t,this._providerSet=n,this._timeStamp=r,this._pageUrl=o+t,this._requestNum=0,this._timeoutIndex=0,this._ajaxPending,this._queueRequest()}return e.createClass(i,[{key:"_queueRequest",value:function(){var e=s(this._timeoutIndex++),t=this;e>=0&&window.setTimeout(function(){t._ajaxRequest(t._requestNum++)},e)}},{key:"_ajaxRequest",value:function(e){if(!this._ajaxPending){var i={reqNum:this._requestNum,providerSet:this._providerSet};this._ajaxPending=t({url:this._pageUrl,data:i,method:u}).then(this._onSuccess.bind(this),this._onError.bind(this))}}},{key:"_onError",value:function(e){r(null,"Polling request failed for location:"+this._requestedLocation)}},{key:"_onSuccess",value:function(e){var t=" location: "+this._requestedLocation+" providers:"+this._providerSet,i=this._requestedLocation,n=this._providerSet,s=this._timeStamp,a=this._requestNum,o={locationId:i,providerSet:n,msgTimeStamp:s,pollingRequests:a};try{this._ajaxPending=null;var u=JSON.parse(e);if(!u||u.constructor!==Array)throw"Endpoint did not return an Array";var l=u.filter(function(e){return e.displayPrice}),d=u.filter(function(e){return e.isDone});0==u.length?c.emit("polling-complete",o):l.length?(Object.assign(o,l[0]),c.emit("polling-complete",o)):d.length?c.emit("polling-complete",o):this._queueRequest()}catch(e){c.emit("polling-complete",o),r(e,"Dynamic Ads: handling hac response for"+t)}}}]),i}();return{"requestPricing":a}});
define("common/ViewabilityModule",["babel/babel-helpers","ta","ta/Core/TA.Store","common/trackingStreams"],function(e,t,n,i){"use strict";function r(e,n,i){var r=n?n+"s|":"",o=r+e.containerId;o+=e.options.recordAttr.length>0?"|"+e.options.recordAttr:"",n&&t.trackEventOnPage(e.options.recordPageProperties,e.options.recordAction,o,0,!0),E&&console.log(b+","+e.containerId+","+r+","+i)}function o(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}function a(e){return e?e.replace(/[H|h]idden/,"")+"visibilitychange":null}function c(){return!!T&&!document[T]}function l(e){if(d(e))r(e,null,"in view"),e.containerInView||(e.containerInView=!0,e.currentStartTime=(new Date).getTime()),E&&(e.containerElem.style.cssText+="border: 1px solid red");else{if(r(e,null,"NOT in view"),e.containerInView){e.containerInView=!1;var t=(new Date).getTime(),n=t-e.currentStartTime;e.activeTimeSpans.push(n)}E&&(e.containerElem.style.cssText=e.containerElem.style.cssText.replace("border: 1px solid red","border: none"))}}function s(e){var t=(new Date).getTime();if(c())e.containerInView&&(e.currentStartTime=t),r(e,null,"user returned to page, total seconds so far: "+h(e)+"s"),e.checkForDataInterval=window.setInterval(function(){f(e)},e.options.checkForDataMS);else{if(e.containerInView){var n=t-e.currentStartTime;e.activeTimeSpans.push(n)}window.clearInterval(e.checkForDataInterval),r(e,null,"user left page, time spent so far: "+h(e)+"s")}}function u(e){var t=0;if(e&&e.containerElem){var n=e.containerElem.offsetHeight;t=Math.floor(n*e.options.viewableHeightPct)}return t}function d(e){if(e&&e.containerElem){if(0===e.viewableHeightPx)return e.viewableHeightPx=u(e),!1;var t=e.containerElem.getBoundingClientRect(),n=(window.pageYOffset,window.innerHeight);if(e.containerElem.offsetHeight<n){var i=t.top+e.viewableHeightPx;return i>0&&i<n}return n>t.top+H&&0<t.bottom-H}return!1}function h(e){var t=0;return e.activeTimeSpans.forEach(function(e){t+=e}),Math.floor(t/1e3)}function f(e){if(e.options.trackIntervals.length){var t=0;e.containerInView&&(t=Math.floor(((new Date).getTime()-e.currentStartTime)/1e3));var n=h(e)+t,i=e.options.trackIntervals[0];n>=i&&(r(e,i,"sending tracking for "+i+" seconds"),e.options.trackIntervals.shift())}else window.clearInterval(e.checkForDataInterval),window.removeEventListener("scroll",e.scrollHandler),document.removeEventListener(k,e.stateHandler)}function v(t,n){if(t&&"object"==("undefined"==typeof t?"undefined":e["typeof"](t))&&n&&"object"===("undefined"==typeof n?"undefined":e["typeof"](n)))for(var i in n)n.hasOwnProperty(i)&&t.hasOwnProperty(i)&&(t[i]=n[i])}function w(e){var t=e.replace(/[\#,\.,\>,\:]/g," "),n=t.split(" ");return"vw_"+n[n.length-1]}var m={},p=!1,g=[],b="VWBLTY",I="in_view",E=!1,H=300,T=void 0,k=void 0,y=function(){function t(n,i){e.classCallCheck(this,t),this.options={viewableHeightPct:.5,checkForDataMS:2e3,trackIntervals:[1,2,5,10,15,30,45,60,75,90,105,120,150,180,300,600,900],recordAttr:"",recordAction:I,recordPageProperties:b},this.checkForDataInterval=null,this.activeTimeSpans=[0],this.containerId=null,this.containerElem=null,this.viewableHeightPx=0,this.scrollHandler=null,this.stateHandler=null,this.currentStartTime=null,this.containerInView=!1,this.init(n,i)}return e.createClass(t,[{key:"init",value:function(e,t){var n=this;try{if(T&&(v(this.options,t),this.containerElem=document.querySelector(e),this.containerElem)){this.containerId=w(e);var o=this.containerElem.offsetHeight;this.viewableHeightPx=Math.floor(o*this.options.viewableHeightPct),d(this)?(this.currentStartTime=(new Date).getTime(),this.containerInView=!0,r(this,null,"In view start timer")):r(this,null,"Not in view"),this.scrollHandler=function(){l(n)},window.addEventListener("scroll",this.scrollHandler),this.stateHandler=function(){s(n)},document.addEventListener(k,this.stateHandler),this.checkForDataInterval=window.setInterval(function(){f(n)},this.options.checkForDataMS)}}catch(e){i.error(e,"Unable to create Viewable for target "+this.containerId)}}},{key:"disable",value:function(){window.removeEventListener("scroll",this.scrollHandler),document.removeEventListener(k,this.stateHandler),window.clearInterval(this.checkForDataInterval)}}]),t}();return m.init=function(){if(!p&&(p=!0,T=o(),T&&document.body.getBoundingClientRect)){k=a(T);var e=n.retrieve("viewabilityModule.itemSelectors")||[];e.forEach(function(e){var t=new y(e);_viewabilityTrackers.push(t)})}},m.enableDebug=function(e){E=!!e},m.getTotals=function(){var e=_taRetrieve("vwblty.data")||{};for(var t in e)e.hasOwnProperty(t)&&console.log(t+":"+e[t])},m.createPostInitViewable=function(e,t){if(e){var n=new y(e,t);if(n.containerElem)return g.push(n),!0}return!1},m.tryDisableActiveViewables=function(e){var t=g.filter(function(t){return e(t.containerElem.id)}),n=g.filter(function(t){return!e(t.containerElem.id)});return g=n,t.forEach(function(e){return e.disable()}),t.length},m});
define("cpm/MiniScroller",function(){var e,t,r=[],n={},i=function(){require(["@ta/platform.runtime"],function(t){e="IntersectionObserver"in window&&new IntersectionObserver(function(e){var t=e.filter(function(e){return e.isIntersecting});r=t.map(function(e){return e.target})})})},l=function(){0===document.querySelectorAll(".miniscroller").length&&(clearInterval(t),t=null);for(var e=0;e<r.length;e++){var n=r[e],i=n.parentElement,l=i.getBoundingClientRect(),o=-l.top-l.height;i.style.setProperty("--y",o+"px")}};return n.initMiniscroller=function(r,n){var i=document.querySelectorAll('div[data-creative-id="'+r+'"]');t||(t=setInterval(l,10));for(var o=0;o<i.length;o++){var a=i[o].querySelector('div[id^="google_ads_iframe_"]');if(a&&n){var s=document.createElement("img");s.src=n,s.setAttribute("style","position:absolute;will-change:transform;transform:translateX(-50%) translateY(var(--y));z-index:-1;"),s.style.setProperty("left","50%"),s.style.setProperty("height","100vh"),a.className="miniscroller",a.append(s),a.setAttribute("style","will-change:transform;width:fit-content;position:relative;overflow:hidden"),e&&e.observe(a)}}},i(),n});
define("cpm/AdMessager",["data/DynamicAdsLocation","cpm/HACPollingForAds6","common/Radio","common/trackingStreams","common/ViewabilityModule","ta/Core/TA.Event","cpm/MiniScroller"],function(a,e,t,d,i,r,s){"use strict";var n=0===location.pathname.indexOf("/vpages/dynamic_ads")||"#tearsheet"===location.hash,o=n?"https://"+location.hostname:"https://tpc.googlesyndication.com",m="dynads",c="genads",g="natads",l=/gptAd/,u=!1,f=/-ref[0-9]*/,p=new t("hotel_pricing_for_ads");p.on("polling-complete",function(a){y(a)});var I=function(a){if(a&&a.domId){var e=a.domId.replace(f,""),t=i.tryDisableActiveViewables(function(a){return a.replace(f,"")===e});t>1&&d.error("Ad refresh resulted in unusual amount of ads being disabled. The number was: "+t)}},q=function(){u||(i.init(),r.on("onAdRender",I))},y=function(a,e){e&&(a[e]=!0);for(var t=document.querySelectorAll('iframe[src^="'+o+'"]'),d=0;d<t.length;d++){var i=t[d];a.adInView=v(i),a.iframeId=i.id,i.contentWindow.postMessage(a,o)}},v=function(a){var e=!1;if(a.getBoundingClientRect){var t=a.getBoundingClientRect(),d=t.top>=0&&t.top+a.offsetHeight<=window.innerHeight,i=t.left>=0&&t.left+a.offsetWidth<=window.innerWidth;e=d&&i}return e},S=function(a){for(var e=document.querySelectorAll('iframe[src^="'+o+'"]'),t=0;t<e.length;t++){var d=e[t],i={dynamicAdsIdentifyForCollapsing:!0,iframeId:d.id,msgTimeStamp:a};d.contentWindow.postMessage(i,o)}},A=function(a){a.classList?a.classList.add("taEmpty"):a.className=a.className.replace(l,"gptAd taEmpty")},T=function(a,e){S(a.msgTimeStamp),d.error(e)},R={};return R.handleDynamicAdRequests=function(){window.addEventListener("message",function(t){if(t.origin==o){var r="",n="";if(require.defined("page-model")){var g=require("page-model");r=g.session&&g.session.uid,n=g.session&&g.session.sessionId}if(t.data.dynamicAdsLocationRequest)if(t.data.geoId&&t.data.orderId&&t.data.msgTimeStamp){var u=function(a){a.msgTimeStamp=t.data.msgTimeStamp,y(a,"dynamicAdsLocationRequest")},f=function(a){var e=a.error.message+" geoId:"+t.data.geoId+" orderId:"+t.data.orderId;T(t.data,e)};a.request(t.data.geoId,t.data.orderId,r,n,u,f)}else d.error("dynamicAdsLocationRequest, missing request data:"+JSON.stringify(t.data));else if(t.data.dynamicAdsAirlineRequest)if(t.data.geoId&&t.data.orderId&&t.data.origCode&&t.data.destCode&&t.data.msgTimeStamp){var u=function(a){a.msgTimeStamp=t.data.msgTimeStamp,y(a,"dynamicAdsAirlineRequest")},f=function(a){var e=a.error.message+" orderId:"+t.data.orderIdId+" origCode:"+t.data.origCode+" destCode:"+t.data.destCode;T(t.data,e)};require(["trjs!data/DynamicAdsAirline"],function(a){a.request(t.data.geoId,t.data.orderId,t.data.origCode,t.data.destCode,r,n,u,f)})}else d.error("dynamicAdsAirlineRequest, missing request data:"+JSON.stringify(t.data));else if(t.data.dynamicAdsOtaRequest)if(t.data.geoId&&t.data.orderId&&t.data.msgTimeStamp){var u=function(a){a.msgTimeStamp=t.data.msgTimeStamp,y(a,"dynamicAdsOtaRequest")},f=function(a){var e=a.error.message+" geoId:"+t.data.geoId+" orderId:"+t.data.orderId;T(t.data,e)};require(["trjs!data/DynamicAdsOta"],function(a){a.request(t.data.geoId,t.data.locationId,t.data.orderId,r,n,u,f)})}else d.error("dynamicAdsOtaRequest, missing request data:"+JSON.stringify(t.data));else if(t.data.dynamicAdsOpaqueRequestLocal)if(t.data.geoId&&t.data.orderId&&t.data.msgTimeStamp){var u=function(a){a.msgTimeStamp=t.data.msgTimeStamp,y(a,"dynamicAdsOpaqueRequestLocal")},f=function(a){var e=a.error.message+" geoId:"+t.data.geoId+" orderId:"+t.data.orderId;T(t.data,e)};require(["trjs!data/DynamicAdsOpaque"],function(a){a.requestLocal(t.data.geoId,t.data.orderId,r,n,t.data.apiFallback,t.data.provider,u,f)})}else d.error("dynamicAdsOpaqueRequestLocal, missing request data:"+JSON.stringify(t.data));else if(t.data.dynamicAdsOpaqueRequestExternal)if(t.data.geoId&&t.data.provider&&t.data.orderId&&t.data.platform&&t.data.msgTimeStamp){var u=function(a){a.msgTimeStamp=t.data.msgTimeStamp,y(a,"dynamicAdsOpaqueRequestExternal")},f=function(a){var e=a.error.message+" geoId:"+t.data.geoId+" provider:"+t.data.provider+" orderId:"+t.data.orderId;" platform:"+t.data.platform,T(t.data,e)};require(["trjs!data/DynamicAdsOpaque"],function(a){a.requestExternal(t.data.geoId,t.data.provider,t.data.platform,t.data.orderId,r,n,u,f)})}else d.error("dynamicAdsOpaqueRequestExternal, missing request data:"+JSON.stringify(t.data));else if(t.data.dynamicAdsIdentifyForCollapsing)if(t.data.iframeId&&t.data.timeStampVerified){var p=document.getElementById(t.data.iframeId);if(p)for(;p.parentNode;)if(p=p.parentNode,l.test(p.className)){A(p);break}}else d.error("dynamicAdsIdentifyForCollapsing, missing request data:"+JSON.stringify(t.data));else if(t.data.hotelPricingRequest)if(t.data.locationId&&t.data.providerSet&&t.data.msgTimeStamp){e.requestPricing(t.data.locationId,t.data.providerSet,t.data.msgTimeStamp)}else d.error("hotelPricingRequest, missing request data:"+JSON.stringify(t.data));else if(t.data.otaPricingRequest)t.data.isSinglePrice&&t.data.providerSet&&t.data.msgTimeStamp?require(["cpm/OTACachedPricingForAds"],function(a){a.requestPricing(t.data.hotelSet,t.data.providerSet,t.data.msgTimeStamp)}):t.data.hotelSet&&t.data.providerSet&&t.data.msgTimeStamp?require(["cpm/OTAMultiHotelPricingForAds"],function(a){a.requestPricing(t.data.hotelSet,t.data.providerSet,t.data.msgTimeStamp)}):d.error("otaPricingRequest, missing request data:"+JSON.stringify(t.data));else if(t.data.airlinePricingRequest)t.data.airlineId&&t.data.origCode&&t.data.destCode&&t.data.msgTimeStamp?require(["cpm/AirlinePricingForAds"],function(a){a.requestPricing(t.data.airlineId,t.data.origCode,t.data.destCode,t.data.msgTimeStamp)}):d.error("airlinePricingRequest, missing request data:"+JSON.stringify(t.data));else if(t.data.linkPostRequest)if(t.data.geoId&&t.data.orderId&&t.data.socialContentId&&t.data.msgTimeStamp){var u=function(a){a.msgTimeStamp=t.data.msgTimeStamp,y(a,"linkPostRequest")},f=function(a){var e=a.error.message+" geoId:"+t.data.geoId+" orderId:"+t.data.orderId+" linkId: "+t.data.socialContentId;T(t.data,e)};require(["trjs!data/SocialAds"],function(a){a.requestLinkPost(t.data.geoId,t.data.orderId,t.data.socialContentId,r,n,u,f)})}else d.error("linkPostRequest, missing request data:"+JSON.stringify(t.data));else if(t.data.tripRequest)if(t.data.geoId&&t.data.orderId&&t.data.socialContentId&&t.data.msgTimeStamp){var u=function(a){a.msgTimeStamp=t.data.msgTimeStamp,y(a,"tripRequest")},f=function(a){var e=a.error.message+" geoId:"+t.data.geoId+" orderId:"+t.data.orderId+" tripId: "+t.data.socialContentId;T(t.data,e)};require(["trjs!data/SocialAds"],function(a){a.requestTrip(t.data.geoId,t.data.orderId,t.data.socialContentId,r,n,u,f)})}else d.error("tripRequest, missing request data:"+JSON.stringify(t.data));else if(t.data.dynamicAdsTrackingRequest){if(t.data.iframeId){var I=document.getElementById(t.data.iframeId);if(I&&I.classList&&I.parentNode.classList.add("taDynamic"),"impression"===t.data.action&&I.closest){var q=I.closest(".gptAd, .inline_ad_wrapper");if(q&&q.id){var v={recordAttr:t.data.context,recordAction:"ad_in_view",recordPageProperties:m};i.createPostInitViewable("#"+q.id,v)||d.warn("dynamicAdsTrackingRequest, logging impression, but failed to set up viewability tracker"+ +JSON.stringify(t.data))}else d.error("dynamicAdsTrackingRequest, logging impression, but found no parent with adInner class. Viewability tracking will fail:"+JSON.stringify(t.data))}}if(t.data.action&&"boolean"==typeof t.data.noninteraction){var R=t.data.context||"",O=t.data.value||0;d.trackEvent(m,t.data.action,R,O,t.data.noninteraction)}else d.error("dynamicAdsTrackingRequest, missing request data:"+JSON.stringify(t.data))}else if(t.data.dynamicAdsError)if(t.data.action){var R=t.data.context||"",O=t.data.value||0,N="DynamicAds:"+t.data.action+" loc:"+O+" context:"+R;d.error(N),d.trackEvent(m,t.data.action,R,O,!0),t.data.msgTimeStamp&&S(t.data.msgTimeStamp)}else d.error("dynamicAdsError, missing request data:"+JSON.stringify(t.data));else if(t.data.genericAdsTrackingRequest)if(t.data.action&&"boolean"==typeof t.data.noninteraction){var R=t.data.context||"",O=t.data.value||0;d.trackEvent(c,t.data.action,R,O,t.data.noninteraction)}else d.error("genericAdsTrackingRequest, missing request data:"+JSON.stringify(t.data));else"miniscroller"===t.data.cpmMessageType&&t.data.creativeId&&t.data.backgroundURL&&s.initMiniscroller(t.data.creativeId,t.data.backgroundURL)}},!1)},R.handleNativeAdRequests=function(){window.addEventListener("message",function(a){if(a.origin==o)if("NativeAdsTracking"===a.data.messageType)if(a.data.action){var e=a.data.context||"",t=a.data.value||0;d.trackEvent(g,a.data.action,e,t,!0)}else d.error("nativeAdsError, missing request data:"+JSON.stringify(a.data));else if("NativeAdsError"===a.data.messageType)if(a.data.action){var e=a.data.context||"",t=a.data.value||0,i="NativeAds:"+a.data.action+" context:"+e;d.error(i),d.trackEvent(g,a.data.action,e,t,!0)}else d.error("nativeAdsError, missing request data:"+JSON.stringify(a.data))},!1)},q(),R});
define("ta/Core/TA.PageVisibility",["vanillajs"],function(e){"use strict";function n(){a=!1;for(var e in s)s.hasOwnProperty(e)&&s[e]()}function t(){a=!0;for(var e in f)f.hasOwnProperty(e)&&f[e]()}function d(){var e=document[c]?f:s;for(var n in e)e.hasOwnProperty(n)&&e[n]()}function i(){"undefined"==typeof document[c]?document.addEventListener?(document.addEventListener("focus",n,!1),document.addEventListener("blur",t,!1)):(document.attachEvent("onfocus",n),document.attachEvent("onblur",t)):document.addEventListener(r,d),m=!0}function o(){"undefined"==typeof document[c]?document.removeEventListener?(document.removeEventListener("focus",n,!1),document.removeEventListener("blur",t,!1)):(document.detachEvent("onfocus",n),document.detachEvent("onblur",t)):document.removeEventListener(r,d),a=!1,m=!1}function u(e,n){var t=e.indexOf(n);return t>=0?e.splice(t,1):null}var c,r,f=[],s=[],m=!1,a=!1;return"undefined"!=typeof document.hidden?(c="hidden",r="visibilitychange"):"undefined"!=typeof document.mozHidden?(c="mozHidden",r="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(c="msHidden",r="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(c="webkitHidden",r="webkitvisibilitychange"),{addFocusListener:function(e){s.push(e),m||i()},addBlurListener:function(e){f.push(e),m||i()},removeFocusListener:function(e){e?u(s,e):s.length=0,0===s.length&&0===f.length&&o()},removeBlurListener:function(e){e?u(f,e):f.length=0,0===s.length&&0===f.length&&o()},hidden:function(){return"undefined"!=typeof document.hidden?document.hidden:a}}});
define("cpm/AdUtils",["ta/Core/TA.Store","common/trackingStreams","cpm/TripAd"],function(t,e,r){"use strict";function a(e){var r=e?t.retrieve("ads."+e+".adStubs"):t.retrieve("ads.adStubs");return r&&r.adTypes?r.adTypes:null}function i(i,n,d){if(d){var o=i&&i.tgt||"";return void e.error("calling legacy JS from Mobile Web for: "+o)}var l=r,u=null;if(i)try{if(i.tgt){var c="tripads."+i.tgt;if(t.has(c)){u=t.retrieve(c);var g=document.getElementById(u.adId)||document.getElementById(i.tgt.replace(/-ref\d+/,""));g&&g.id?(u.adElem=g,u.adId=u.id=g.id):u=null}else try{u=l.init(i)}catch(t){return null}}else{var s=i,f=a(n);if(f)for(var v=0;v<f.length;v++){var m=f[v];if(m.tgt&&/-ref\d+/.test(m.tgt)&&!/-ref\d+/.test(s)&&m.tgt.replace(/-ref\d+/,"")==s||m.tgt===s){var p=document.getElementById(s);p&&(p.id=s=m.tgt)}if(m.tgt===s)try{var y="tripads."+m.tgt;if(t.has(y)){u=t.retrieve(y);break}u=l.init(m);break}catch(t){return null}}}}catch(t){var b="string"==typeof i?i:i.tgt;e.error(t,"unable to get ad for id: "+b)}return u}function n(t,e,r){var a=t&&t.elemIds,n=t&&!!t.isNewContext;a&&(e(),googletag.cmd.push(function(){a.forEach(function(e){var a=document.getElementById(e);if(a){var d,o=t.modalServlet||a.getAttribute("data-ajax-servlet");d=o?i(e,o,r):i(e,void 0,r),d&&(t.targeting&&d.addTargeting(t.targeting),a.classList&&a.classList.remove("delayAd"),t.modalServlet?d.inject(n):d.injectWhenViewable(n))}})}))}function d(t){u&&l.mark(t)}function o(t,e,r){if(u){this.perfMark(r),l.measure(t,e,r);var a=l.getEntriesByName(t)[0];if(a)return parseInt(a.duration,10)}}var l=window.performance,u=l&&l.mark;return{getAdStubs:a,getAd:i,queueForInjection:n,perfMark:d,perfMeasure:o}});
define("cpm/DesktopAds",["lib/jquery-amd","cpm/DblClickAPI","cpm/AdController","cpm/TripAd","cpm/AdMessager","ns-exporter","utils/throttle","ta/Core/TA.Event","ta/Core/TA.Store","common/trackingStreams","ta/Core/TA.PageVisibility","common/Radio","cpm/AdUtils"],function(e,t,n,a,r,o,i,d,l,s,c,g,u){"use strict";function v(){d.on("ads.queueForInjection",ce),g("ads").on("inject",ce),d.on("ads.injectAjaxAds",H),document.addEventListener("cpmModalDisplayRequest",f),W.refresh_on_change_dates&&g("wcDateEventsRadio").on("dateSelected",ue),g("ads").on("refresh",ge),window.isTabletOnFullSite&&e(window).on("orientationchange",D),c.addFocusListener(x),G>0&&window.addEventListener("scroll",i(T,ne)),d.on("onOverlayClose",D),d.on("page-changes-pending",b),d.on("page-polling-complete",j),"RoadTripMap"===window.pageServlet||"RoadTripGuide"===window.pageServlet?d.on("adSizeChanged",ge):"Hotels"===window.pageServlet?(d.on("adSizeChanged",ge),d.on("responsiveAdSizeChanged",ge),d.on("adsVisibilityChanged",ge)):"Attractions"===window.pageServlet?(d.on("onAttractionFilterChange",ge),re.on("refreshAds",ge)):"SmartDeals"===window.pageServlet||"Vacation_Packages"===window.pageServlet?(d.on("adSizeChanged",ge),d.on("responsiveAdSizeChanged",ge)):"Restaurant_Review"===window.pageServlet?(d.on("review_filters.filter_changed",ge),d.on("review_keyword_search.tag_toggled",ge)):"ThemePark"===window.pageServlet?d.on("onHACUpdateComplete",ge):"VRACSearch"===window.pageServlet&&l.retrieve("vrDblClickAdCallsEnabled")?d.on("onVRACSearchFilterChange",ge):"Tourism"===window.pageServlet?(d.on("scrollingTabs_Start",_),d.on("scrollingTabs_End",C)):"Hotel_Review"===window.pageServlet||"Attraction_Review"===window.pageServlet||"Restaurant_Review"===window.pageServlet?(d.on("responsiveAdSizeChanged",ge),d.on("scrollingTabs_Start",_),d.on("scrollingTabs_End",C),d.on("ReviewExpanded",ge)):"Airlines"===window.pageServlet?d.on("airlinesPlacementLoad",ge):"Home"===window.pageServlet?d.on("homePageBannerRefresh",ge):"Search"===window.pageServlet?(d.on("adSizeChanged",ge),d.on("adsVisibilityChanged",ge)):"Cruises"===window.pageServlet||"Cruise_Review"===window.pageServlet||"ShowUserReviews_Cruises_Responsive"===window.pageServlet?(p("Setting up observers for cruise."),d.on("cruiseSearchComplete",ge),d.on("responsiveAdSizeChanged",ge)):"CheapFlightsSearchResults"===window.pageServlet&&(p("Setting up observers for flights overlay."),d.on("onOverlayOpen",ge),d.on("onRightRailScroll",ge))}function f(e){var t=e&&e.detail;if(t&&t.modalServlet){t.targeting=t.targeting||{};var n=l.retrieve("ads."+t.modalServlet.toLowerCase()+".pageTargeting");n&&(t.targeting=n)}t.isNewContext=!0,t&&t.elemIds&&u.queueForInjection(t,F)}function p(e){window.taLogDebug&&console.log(e)}function m(t){if(se&&!ie)try{if(e.inArray(t,de)>-1){ie=!0,se.mark("end_first_ad"),se.measure("total_time_to_render","start_load_ads_js","end_first_ad"),se.measure("ad_render_time","start_first_ad","end_first_ad");var n=se.getEntriesByName("total_time_to_render")[0].duration,a=se.getEntriesByName("ad_render_time")[0].duration;s.trackEvent("ad_perf","AD_LOAD_TIME",Math.floor(n)+"|"+Math.floor(a),0,!0)}}catch(e){s.trackEvent("ad_perf","AD_LOAD_FAILURE","Failed to record performance for ad in slot: "+t,!0)}}function w(t){var n=t&&t.slot?t.slot.getSlotElementId():null,a=t&&t.creativeId,r=t&&t.advertiserId;if(n&&n.indexOf("slot:")>-1)return void(n.indexOf("slot:3x1:globalnav")===-1&&n.toLowerCase().indexOf("nova")===-1&&n.toLowerCase().indexOf("horizon")===-1&&s.error("Trying to use Lithium ads with legacy ad server. Ad ID: "+n));Z||(Z=(new Date).getTime()),m(n),$=(new Date).getTime(),A(t),h(r,n),d.fireEvent("onAdRender",{"domId":n,"advertiserId":r,"creativeId":a}),g("ads").emit("ad-update",{id:n,isRendered:!0,isViewable:!S(r,n),eventType:"SlotRenderEnded",originalEvent:t});var o=e("#"+n);o.hasClass("taEmpty")||o.parent(".ad").addClass("loaded")}function h(t,n){S(t,n)?e("#"+n).addClass("taEmpty").removeClass("loaded"):e("#"+n).addClass("loaded").removeClass("taEmpty")}function S(e,t){return t&&e&&e===Y&&le.indexOf(t)===-1}function A(t){try{if(t&&t.slot&&t.advertiserId){var n=e("#"+t.slot.getSlotElementId());n.attr("data-creative-id",t.creativeId||"N/A"),n.attr("data-campaign-id",t.campaignId||"N/A"),n.attr("data-advertiser-id",t.advertiserId),n.on("mouseout",function(){document.activeElement&&"IFRAME"==document.activeElement.tagName&&top.focus()})}}catch(e){}}function _(){n.setInjectionPaused(!0)}function C(){n.setInjectionPaused(!1)}function y(){n.setInjectOnScrollUpReady(!0),e(window).off("scroll",y)}function I(){var t=0;if(window.location.hash){var a=document.getElementById(window.location.hash);if(a){var r=e(a).offset().top;if(r>0&&(t=l.has("scrollingTabs.scrollOnPageLoad")?l.retrieve("scrollingTabs.scrollOnPageLoad"):r,t>0)){var o=e(window).scrollTop();0==o&&(n.setInjectOnScrollUpReady(!1),e(window).on("scroll",y))}}}return t}function E(t,n){var a=!1;if(t){if(a=!0,e(t).parent(".ad.inactive").length||e(t).is(":hidden"))return!1;if(n&&n.slotTargeting&&n.slotTargeting.disable_event_refresh)return 0===e(t).children().length}return a}function R(t){if(t){var n=e(t.adElem);n.length&&t.injectWhenViewable(!1)}}function T(){var e=(new Date).getTime();e-$>G&&(p("timed refresh!"),D()),$=e}function b(){p("polling in progress"),ae=!1}function j(){ae=!0,p("polling complete"),Q?(Q=!1,d.queueForReady(O)):D()}function D(){ae&&window.setTimeout(q,1)}function x(){var e=(new Date).getTime();e-$>te&&(p("event refresh!"),D())}function q(){p("executing _refreshAllAds"),F(),n.clearDeferred(),googletag.cmd.push(function(){try{var e=u.getAdStubs();if(e){var t=(new Date).getTime();Z&&t-Z>ee&&(googletag.pubads().updateCorrelator(),Z=void 0);for(var n=0;n<e.length;n++){var a=e[n],r=document.getElementById(a.tgt)||document.getElementById(a.tgt.replace(/-ref\d+/,"")),o=u.getAd(a);r&&o&&E(r,o)&&(r.classList&&r.classList.remove("taEmpty"),R(o))}}}catch(e){s.error(e,"error refreshing all ads")}})}function L(){I();var t=u.getAdStubs();if(t&&t.length)for(var n=0;n<t.length;n++){var r=t[n];if(r.tgt){var o=document.getElementById(r.tgt);if(o&&!e(o).hasClass("delayAd"))try{var i=a.init(r);i&&(i.checkForScrollUpInjection(),i.isInView()?(de.push(i.adId),i.inject()):i.defer())}catch(e){s.error(e,"unable to create TripAd object for "+r.tgt)}}}}function O(){var e={isNewContext:!1},t=V(oe);t.length&&(e.elemIds=[],t.forEach(function(t){e.elemIds=e.elemIds.concat([].map.call(document.querySelectorAll("#"+t+" .gptAd.delayAd:not(.inactive)"),function(e){return e.id}))}),e.elemIds.length&&u.queueForInjection(e,F))}function F(){J||(t.init(!1),v(),J=!0)}function N(e){W=e&&e.gptConfig||{},G=W.timed_refresh_after_15s?15e3:0}function k(e){return!(!e||!e.isUpdatePending)&&(!e.isUpdatePending()&&document.querySelectorAll(oe).length)}function P(e){if(e&&e.dataset){for(var t=e;t.parentNode&&!t.dataset.placementName;)t=t.parentNode;return t.id&&t.dataset.placementName?t.id:null}return null}function V(e){var t=document.querySelectorAll(e),n=[];if(t.length){var a=P(t[0]);a&&n.push(a);var r=P(t[t.length-1]);r&&r!==a&&n.push(r)}return n}function z(){googletag.cmd.push(function(){if(googletag.pubads().addEventListener("slotRenderEnded",w),L(),K=!0,require.defined("ta/page")){var e=require("ta/page");k(e)&&j()}})}function U(e){N(e),F();var t=document.querySelectorAll(".gptAd");t.length>0&&(K||z())}function M(e,t){var n={};n.elemIds=e,n.isNewContext=t,u.queueForInjection(n,F)}function B(e,t,n){var a={};a.servlet=e,a.selector=t,a.isNewContext=n,H(a)}function H(t){if(t&&t.servlet&&t.selector){var n=t.servlet,a=e(t.selector),r=!!t.isNewContext;a.removeClass("taEmpty"),a.css("display",""),F(),googletag.cmd.push(function(){if("string"==typeof n){var t="ads."+n.toLowerCase(),o=l.retrieve(t+".adStubs"),i=l.retrieve(t+".pageTargeting");o&&o.length&&a.length&&e.each(a,function(e,t){for(var n=!1,a=0;a<o.length;a++){var d=o[a];if(d&&d.tgt){var l=d.tgt.split("-"),c=l.slice(0,l.length-1).join("-");if(t.id.indexOf(c)>-1){d.tgt=t.id,n=d;break}}}if(n)try{var g=u.getAd(n);g&&(i&&g.addTargeting(i),g.injectWhenViewable(r))}catch(e){s.error(e,"unable to inject ajax ad for: "+n.tgt)}})}})}}var W,G,J=!1,K=!1,Q=!0,X={},Y=55978451;r.handleDynamicAdRequests(),r.handleNativeAdRequests();var Z,$=(new Date).getTime(),ee=3e4,te=1e4;p("_minTimedRefreshAllMS is "+G);var ne=300,ae=!0,re=g("AttractionOverviewResponsive"),oe=".listing .meta_listing",ie=!1,de=[],le=["gpt-ad-2x1"],se=window.performance&&window.performance.mark?window.performance:void 0,ce=function(e){u.queueForInjection(e,F)},ge=i(D,ne),ue=function(e){setTimeout(function(){document.querySelector('div[data-test-target="trip-search-open"]')||q(e)},1)};return X.injectAjaxAds=B,X.queueForInjection=M,X.disableRefresh=function(){ae=!1},X.collapseAd=function(t){t&&e(t.parentNode).parent(".gptAd").addClass("taEmpty")},X.initDoubleClick=U,o.exportTo(X,"ta.common.ads"),X});
