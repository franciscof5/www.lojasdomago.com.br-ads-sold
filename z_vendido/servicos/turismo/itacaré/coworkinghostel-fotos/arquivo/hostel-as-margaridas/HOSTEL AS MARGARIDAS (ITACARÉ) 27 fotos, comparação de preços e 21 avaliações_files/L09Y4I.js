(this.$WP=this.$WP||[]).push(["L09Y4I",(e,i)=>{"use strict";var a,t,l,d,n,o,r,u,s,I,c,m,g,C,v,A,b,y,E,f,p,S,M,L,_,h,N,w,R,T,V,P,D,G,W,O,k,B,j,Z,U,x,Y,H,F,K,Q,z,J,q,X,$,ee,ie,ae,te,le,de,ne,oe,re,ue,se,Ie,ce,me,ge,Ce,ve,Ae,be,ye,Ee,fe,pe,Se,Me,Le,_e,he,Ne,we,Re,Te={referenceCompoundMediaId:null,media:null,selectedIndex:null,addedToHistory:!1,sort:"ML"},Ve=(e,i)=>{switch(i.type){case"ALBUM":return Object.assign({},e,{albumId:i.albumId,typeId:g[C(v().mediaGroup)],categoryId:i.categoryId?i.categoryId:i.albumId,media:void 0,referenceCompoundMediaId:i.referenceCompoundMediaId});case"CATEGORY":return Object.assign({},e,{categoryId:i.categoryId,referenceCompoundMediaId:void 0,media:void 0});case"TYPE":return Object.assign({},e,{typeId:i.typeId,referenceCompoundMediaId:void 0,media:void 0});case"SORT":return Object.assign({},e,{sort:i.sort,referenceCompoundMediaId:void 0,media:void 0});case"DETAIL":return Object.assign({},e,{selectedIndex:i.selectedIndex,media:i.media});case"INVALIDATE_REFERENCE_MEDIA":return Object.assign({},e,{referenceMedia:void 0,referenceCompoundMediaId:void 0});case"UPDATE_REFERENCE_MEDIA":return Object.assign({},e,{referenceMedia:i.referenceMedia,media:{media:i.referenceMedia,loading:!1}});case"DETAIL_DISMISS":return Object.assign({},e,{media:e.referenceMedia?{loading:!1,media:e.referenceMedia}:null});case"UPDATE_LOCATION_INFO":return Object.assign({},e,{locationName:i.locationName,locationTotalMediaCount:i.locationTotalMediaCount});case"OPEN":return Object.assign({},e,{},i.state);case"RESET_STATE":return Object.assign({},e,{},Te);default:return e}},Pe=({renderMediaViewer:e,locationId:i})=>d(I,{query:he,variables:{locationId:i}},({fetching:a,data:t})=>{var l,n,o;if(a||!t)return d(De,{renderMediaViewer:e,locationId:i,locationName:""});var r=null==t||null==(l=t.locations)||null==(n=l[0])?void 0:n.name,u=null==t||null==(o=t.locations)?void 0:o[0].mediaCount;return d(De,{renderMediaViewer:e,locationId:i,locationName:r,locationTotalMediaCount:u})}),De=({renderMediaViewer:e,locationId:i,locationName:l,locationTotalMediaCount:s})=>{var I,c=L(),[m]=a(V()),[g,C]=a(Ce(m)),[v]=a(((e,i)=>{if(ve(i)){var a=P(D(i));return a.locationId=e,a}return G(i)})(i,m)),[A,b]=n(Ve,Object.assign({},v,{locationId:i})),y=o(me("media-viewer")),E=o(!1);((e,i)=>{var[l,d]=a("");t(()=>{if(e){var a=w(i);d(a),R(i)}else d(""),T()},[e,i,i.selectedIndex])})(g,A);var[f,p]=a(null);t(()=>{var e=e=>{if(!e.state||!("openMediaViewer"in e.state))return e.state&&"backToGallery"in e.state?(b({type:"DETAIL_DISMISS"}),void("media"in e.state&&p(e.state.media))):void b({type:"DETAIL_OPEN",media:{loading:!1,forwardableMedia:f},selectedIndex:A.selectedIndex||0});C(!1)};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[f,A.selectedIndex]),t(()=>{g&&c(_.MV_OPEN,{locationId:i,albumId:A.albumId,categoryId:A.categoryId,typeId:A.typeId})},[g,A.albumId,A.categoryId,i,A.typeId]),t(()=>b({type:"UPDATE_LOCATION_INFO",locationName:l,locationTotalMediaCount:s}),[l,s]);var S=r(()=>e=>{var a=P(e);a.referenceCompoundMediaId&&a.referenceCompoundMediaId.id<0&&(a.referenceCompoundMediaId=null);var t=w(a);window.history.replaceState({openMediaViewer:!0},document.title,null),window.history.pushState(null,document.title,t),E.current=!0,C(!0),b({type:"OPEN",state:Object.assign({locationId:i},a)})},[i]),M=u(()=>{E.current&&(A.addedToHistory?window.history.go(-2):window.history.back(),E.current=!1),c(_.CLOSE_CLICK,{locationId:i,albumId:A.albumId,categoryId:A.categoryId,typeId:A.typeId}),C(!1),b({type:"RESET_STATE"})},[A.addedToHistory,A.albumId,A.categoryId,i,A.typeId,c]),N=r(()=>({close:M,mediaViewerState:A,dispatchMVAction:b}),[M,A,b]);t(()=>{var e=y.current;return e.on("open",S),()=>e.off("open",S)},[S]);var W={locationId:i,albumId:A.albumId,categoryId:A.categoryId,typeId:A.typeId,mediaId:null==(I=A.referenceCompoundMediaId)?void 0:I.id,sort:A.sort};return d(h.Provider,{value:W},g?e(N):null,d(ge,{keyName:"Escape",callback:M}))},Ge=()=>90===Math.abs(window.orientation%180),We=({close:e,mediaViewerState:i,dispatchMVAction:l,businessContact:n,offer:I,scrollHideCommerce:L})=>{var h,w,R,T,V,P,D=A(i.albumId),G=N(),{localize:j}=k(),[Z,U]=a(!1),F=o(!1),{locationId:ce,albumId:me,categoryId:ge,sort:Ce,typeId:ve,referenceCompoundMediaId:Ae}=i,be=te("mv","mvh",ce),ye=te("mv","mvqa",ce),[Ee,fe]=a(Ge()),pe=u((e,i)=>{var a=b(C(e),j),t=d("span",null,j.string("mv_photos_from_with_count",{source:a,count:i}));return{id:g[e],displayLabel:t}},[j]);t(()=>{var e=()=>{fe(Ge())};return window.addEventListener("orientationchange",e),()=>{window.removeEventListener("orientationchange",e)}},[]);var Se=r(()=>e=>{var i,a="",t=null==e||null==(i=e.mediaAlbum)?void 0:i.album;if(t)if(200!==e.mediaAlbum.status)a=de;else if(0===t.totalMediaCount)a=le;else{var l;a=(null==(l=t.mediaList)?void 0:l[0])?oe:ne}else a=le;be(a)},[be]),Me=r(()=>e=>{var i=null==e?void 0:e.mediaWindow;if(i){var a="";if(200!==(null==i?void 0:i.status))a=de;else{var t,l,d,n,o=null==i||null==(t=i.windowPanes)||null==(l=t[0])||null==(d=l.albums)?void 0:d[0];a=o&&0!==o.totalMediaCount?(null==o||null==(n=o.mediaList)?void 0:n[0])?oe:ne:le}ye(a)}},[ye]),Le={locationId:ce,albumId:me,client:"mv",dataStrategy:"mvh",filter:y(ve),subAlbumId:ge,referenceMediaId:Ae,photos360Enabled:z()},[_e]=c({query:re,variables:Le}),he=u(e=>{l({type:"SORT",sort:e}),G(_.SORT_TYPE_CHANGE,{sort:e})},[l,G]),{fetching:Ne,data:we}=_e,Re=null==we||null==(h=we.mediaAlbum)?void 0:h.status,Te=Ne?null:null==we||null==(w=we.mediaAlbum)?void 0:w.album,{totalMediaCount:Ve}=Te||{};Re&&Re>=400&&i.referenceCompoundMediaId&&l({type:"INVALIDATE_REFERENCE_MEDIA"}),t(()=>{Ne||Se(we)},[Ne,we,Se]);var Pe=null==Te||null==(R=Te.mediaList)?void 0:R[0],De=(null==Te?void 0:Te.offset)||0;t(()=>{Pe&&l({type:"UPDATE_REFERENCE_MEDIA",referenceMedia:Pe})},[l,Pe]);var We=r(()=>({locationId:ce,albumId:me,subAlbumId:ge,client:"mv",dataStrategy:Ce===E.RECENCY?"mr":"m",filter:y(ve),offset:0,limit:50,photos360Enabled:z()}),[ce,me,ge,Ce,ve]),[Oe,ke]=ue({query:se,variables:We}),Be=Object.keys(Oe).length,je=u(e=>e<=De?e-1:e,[De]),Ze=u(e=>{var i=Math.abs(Math.floor(e/50));return(null==Oe?void 0:Oe[i])?null==Oe?void 0:Oe[String(i)]:(ke({offset:50*i,limit:50}),{fetching:!0,data:null})},[ke,Oe]);t(()=>{G(_.GALLERY_VIEW_PHOTOS_SEEN,{photosSeen:Oe?50*Be:0})},[Oe,Be,G]),t(()=>{G(_.GALLERY_VIEW,{isMWRedesign:!0}),F.current=!1},[me,G]);var Ue=u(e=>{var i,a,t;if(0===e&&Ce!==E.RECENCY)return Pe;var l=Ce!==E.RECENCY?je(e):e,d=Ze(l);return(null==d?void 0:d.fetching)?null:null==d||null==(i=d.data)||null==(a=i.mediaAlbumPage)||null==(t=a.mediaList)?void 0:t[l%50]},[je,Ze,Pe,Ce]),xe=u((e,i,a)=>{var t=e&&e.photoSizes&&x(i,a,e.photoSizes,{getImageBasedOnClientInfo:!0,allowedStretch:.6});return t?d(s,null,d("img",{className:"_2GD9rEH2",src:t.url}),Q(e,!1,(e=>"pano"===e.type?"pano":"v"===e.type?"video_large":null)(e))):d("div",null)},[]),Ye=u((e,i,a)=>{var t=Ue(e);return t?xe(t,i,a):null},[Ue,xe]),He=e=>{U(e)},Fe=u(e=>{var i=Ue(e),a=Ve||0;return i?d(K,{key:""+i.id,media:i,shareUrl:W(i),totalMediaInfo:{selectedIndex:e,totalCount:a},onFullscreenMedia:He,onSwipeRight:()=>{},onSwipeLeft:()=>{},innateTranslations:!1,businessContact:n,locationId:ce}):null},[n,Ue,Ve,ce]),Ke=e=>{if(e<0)l({type:"DETAIL_DISMISS"});else{var i=Ue(e);l({type:"DETAIL",media:i?{media:i,loading:!1}:{loading:!0},selectedIndex:e})}},Qe={locationId:ce,client:"mv",filter:v(),configuration:"mvqa",photos360Enabled:z()},[ze]=c({query:Ie,variables:Qe}),{data:Je,fetching:qe}=ze;qe||Me(Je);var Xe=null==Je||null==(T=Je.mediaWindow)||null==(V=T.windowPanes)||null==(P=V[0])?void 0:P.albums,$e=Xe?Xe.map(e=>{var i,a;return{id:e.albumId,titleNode:d(q,{count:e.totalMediaCount,title:e.name}),thumbnailNode:d(Y,{width:"100%",height:"100%",sources:(null==(i=e.mediaList)||null==(a=i[0])?void 0:a.photoSizes)||[]})}}):[{id:-1,titleNode:d("div",null),thumbnailNode:d(m,{width:"100%",height:"100%"})},{id:-2,titleNode:d("div",null),thumbnailNode:d(m,{width:"100%",height:"100%"})},{id:-3,titleNode:d("div",null),thumbnailNode:d(m,{width:"100%",height:"100%"})},{id:-4,titleNode:d("div",null),thumbnailNode:d(m,{width:"100%",height:"100%"})},{id:-5,titleNode:d("div",null),thumbnailNode:d("div",null)}],ei=e=>{var i,a,t,d=Xe&&(null==(i=Xe.filter(i=>i.albumId===e))||null==(a=i[0])||null==(t=a.mediaList)?void 0:t[0]),n=d?{id:d.mediaId,type:d.type}:null;l(999===e?{type:"ALBUM",albumId:101,referenceCompoundMediaId:n,categoryId:999}:{type:"ALBUM",referenceCompoundMediaId:n,albumId:e})},[ii,ai]=a(!1),ti=o(null),li=B(ce,me,"mv",v(),D,z()),di=u(e=>{l({type:"TYPE",typeId:e}),G(_.GALLERY_VIEW_TYPE_CLICK,{typeId:e}),G(_.SOURCE_FILTER_CLICK,{typeId:e})},[l,G]),ni=u(e=>{l({type:"CATEGORY",categoryId:e}),G(_.GALLERY_VIEW_CATEGORY_CLICK,{categoryId:e}),G(_.ADVANCED_FILTER_CLICK,{categoryId:e})},[l,G]),oi=r(()=>{var e,i,a,t,l,n=null==Je||null==(e=Je.mediaWindow)||null==(i=e.windowPanes)||null==(a=i[0])?void 0:a.albums;if(li&&(null==(t=li.mediaWindow)||null==(l=t.windowPanes[0])?void 0:l.albums)&&n){var o,{albums:r}=li.mediaWindow.windowPanes[0];if(me===f.TRAVELER_ALBUM){var u=n&&n.find(e=>e.albumId===f.TRAVELER_ALBUM);o={mediaCounts:{TRAVELER:null==u?void 0:u.totalMediaCount}}}else o=r.find(e=>e.albumId===ge);var s=o?o.mediaCounts:null;if(s){var I=[];Object.keys(s).includes(p.all2)&&s[p.all2]>0?I.push(pe(p.all2,s[p.all2])):Object.keys(s).includes(p.all)&&s[p.all]>0&&I.push(pe(p.all,s[p.all])),Object.keys(s).includes(p.traveler)&&s[p.traveler]>0&&I.push(pe(p.traveler,s[p.traveler])),Object.keys(s).includes(p.mgmt)&&s[p.mgmt]>0&&I.push(pe(p.mgmt,s[p.mgmt])),Object.keys(s).includes(p.staff)&&s[p.staff]>0&&I.push(pe(p.staff,s[p.staff])),2===I.length&&I.shift();var c=ve||I[0].id;return d(X,{title:j.string("mv_mw_filter_source_section_header"),selectedKeys:[c],onSelect:di,options:I,key:"SOURCE_SECTION"})}return null}return null},[pe,li,Je,me,ge,ve,di,j]),ri=r(()=>{var e,i,a,t=null==li||null==(e=li.mediaWindow)||null==(i=e.windowPanes)||null==(a=i[0])?void 0:a.albums;if(t){var l,n=t;if(l=ve===g.ALL_INCLUDING_RESTRICTED||ve===g.ALL_UNRESTRICTED?S(g.ALL_UNRESTRICTED):S(ve),M.has(me)||ge===f.PANO_ALBUM){var o=t.find(e=>e.albumId===ge);o&&(n=[o])}var r=n.filter(e=>e.mediaCounts[l]>0).reduce((e,i)=>{if(!(me!==f.VIDEO&&i.albumId===f.VIDEO||ge!==f.PANO_ALBUM&&i.albumId===f.PANO_ALBUM)){var a=d("div",null,i.name," (",i.mediaCounts[S(ve||1)],")");e.push({id:i.albumId,displayLabel:a})}return e},[]);return d($,{title:j.string("mv_mw_filter_category_section_header"),selectedKeys:[ge],onSelect:ni,options:r,key:"FILTER_SECTION"})}return null},[li,me,ge,ve,ni,j]),ui=[];oi&&ui.push(oi),ri&&ui.push(ri);var si=d(ee,{onReset:()=>ei(me),key:"FILTER_BUTTON"},ui),Ii=[{id:E.ML,displayLabel:d(O,{id:"hr_mediaviewer_filter_by_featured"})},{id:E.RECENCY,displayLabel:d(O,{id:"hr_mediaviewer_filter_by_recency"})}],ci=d(ie,{sortOptions:Ii,onSelect:he,selectedSortKey:Ce||E.ML,key:"SORT_BUTTON"}),[mi,gi]=a("mosaic"),Ci=d(ae,{selectedLayout:mi,onSelect:gi,key:"LAYOUT_BUTTON"});return d("div",{className:"_24rTldzw"},d(H,{galleryRenderer:Ye,fullRenderer:Fe,totalCount:(null==Te?void 0:Te.totalMediaCount)||20,quickAlbumsDefinition:$e||null,selectedAlbumId:999===ge?999:me,actionHandler:i=>{var a,t,l,d;"CLOSE"===i.type?e():"ALBUM"===i.type?i.albumId>=0&&ei(i.albumId):"FULLSCREEN_CLOSE"===i.type?(d=i.closeType,G(_.DETAIL_VIEW_DISMISS,{mvDetailViewCloseType:"controls"===d?"album_change":d}),L?(clearTimeout(ti.current),ti.current=setTimeout(()=>{ai(!0)},500)):ai(!0)):"FULLSCREEN_NAV"===i.type?Ke(i.newIndex):"GALLERY_CLICK"===i.type?(clearTimeout(ti.current),ii&&ai(!1),a=i.selectedIndex,t=i.offset,l=i.mode,G(_.GALLERY_VIEW_THUMBNAIL_CLICK,{tileDetails:{offset:t,mode:l},isMWRedesign:!0}),Ke(a)):"SCROLL"===i.type&&(L&&(ii&&ai(!1),clearTimeout(ti.current),ti.current=setTimeout(()=>{ai(!0)},750)),!F.current&&i.position>0&&(G(_.GALLERY_VIEW_SCROLL_ENGAGEMENT),F.current=!0))},titleNode:e=>d(J,{onBack:e,offerNode:I&&Ee&&I(!0)}),disableFullscreenNavigation:Z,disableFullscreenClose:Z,mobileButtonMenus:[ci,si,Ci],layoutStyle:mi,useHero:Ce!==E.RECENCY&&"mosaic"===mi}),d("div",{className:`_2-E6e7H8 ${ii?"":"_3sqBGrY_"} ${L?"":"DOjek5Qk"}`},I&&!Ee&&I(!1)))},Oe=(e,i,a)=>({close:t,mediaViewerState:l,dispatchMVAction:n})=>d(we,{close:t,mediaViewerState:l,dispatchMVAction:n,businessContact:e,offer:i,scrollHideCommerce:a}),ke=({offer:e,businessContact:i,close:a,mediaViewerState:t,dispatchMVAction:l})=>d(we,{close:a,mediaViewerState:t,dispatchMVAction:l,businessContact:i,offer:e,scrollHideCommerce:!0}),Be=({businessContact:e,offer:i,scrollHideCommerce:a})=>d(Ne,{renderMediaViewer:Oe(e,i,a)}),je=({close:e,mediaViewerState:i,dispatchMVAction:l,offer:n,businessContact:s})=>{var I,g,C,b,p,S,{localize:M}=k(),h=N(),w=L(),R=o(null),T=r(()=>me("mediaviewer-ads"),[]),V=u(()=>{T.emit("refreshAds")},[T]),P=d("div",{ref:e=>{R.current=e}},d(pe,{size:"300x250",modalServlet:"LocationPhotoAlbum",radio:T})),{locationId:D,albumId:G,categoryId:O,typeId:x,referenceCompoundMediaId:H,media:Q,sort:J}=i,[X,$]=a("m"),ee=A(G),ie=te("mv","mvh",D),ae=te("mv","mvqa",D),ce=r(()=>e=>{var i,a="",t=null==e||null==(i=e.mediaAlbum)?void 0:i.album;if(t)if(200!==e.mediaAlbum.status)a=de;else if(0===t.totalMediaCount)a=le;else{var l;a=(null==(l=t.mediaList)?void 0:l[0])?oe:ne}else a=le;ie(a)},[ie]),ge=r(()=>e=>{var i=null==e?void 0:e.mediaWindow;if(i){var a="";if(200!==(null==i?void 0:i.status))a=de;else{var t,l,d,n,o=null==i||null==(t=i.windowPanes)||null==(l=t[0])||null==(d=l.albums)?void 0:d[0];a=o&&0!==o.totalMediaCount?(null==o||null==(n=o.mediaList)?void 0:n[0])?oe:ne:le}ae(a)}},[ae]),Ce={locationId:D,albumId:G,client:"mv",dataStrategy:"mvh",filter:y(x),subAlbumId:O,referenceMediaId:H,photos360Enabled:z()},[ve]=c({query:re,variables:Ce}),{fetching:_e,data:he}=ve,Ne=null==he||null==(I=he.mediaAlbum)?void 0:I.status,we=_e?null:null==he||null==(g=he.mediaAlbum)?void 0:g.album;Ne&&Ne>=400&&H&&l({type:"INVALIDATE_REFERENCE_MEDIA"}),t(()=>{_e||ce(he)},[he,_e,ce]);var Re=null==we||null==(C=we.mediaList)?void 0:C[0],Te=(null==we?void 0:we.offset)||0,Ve=r(()=>({locationId:D,albumId:G,subAlbumId:O,client:"mv",dataStrategy:X,filter:y(x),offset:0,limit:20,photos360Enabled:z()}),[D,G,X,O,x]),[Pe,De]=ue({query:se,variables:Ve}),Ge=Object.keys(Pe).length,We=u(e=>{var i=Math.abs(Math.floor(e/20));return(null==Pe?void 0:Pe[i])?null==Pe?void 0:Pe[String(i)]:(De({offset:20*i,limit:20}),{fetching:!0,data:null})},[De,Pe]),Oe=o(!0),{fetching:ke}=Pe[0],Be=!!(null==Q?void 0:Q.media);t(()=>{Be||ke||(h(_.GALLERY_VIEW_PHOTOS_SEEN,{photosSeen:20*Ge}),Oe.current?Oe.current=!1:V())},[ke,Be,Ge,V,h]);var je=u(e=>{var i,a,t;if(e===Te&&J!==E.RECENCY)return Re;var l=e,d=We(l);return(null==d?void 0:d.fetching)?null:null==d||null==(i=d.data)||null==(a=i.mediaAlbumPage)||null==(t=a.mediaList)?void 0:t[l%20]},[We,Re,Te,J]),Ze=o(Object.assign({},ye)),[Ue,xe]=a(!1),Ye=e=>{xe(e)},He=G;be.has(O)?He=O:2===i.typeId&&(He=107);var[Fe,Ke]=a(He),[Qe,ze]=a("grid"),Je=o(!1),qe={locationId:D,client:"mv",filter:v(),configuration:"mvqa",photos360Enabled:z()},[Xe]=c({query:Ie,variables:qe}),{data:$e,fetching:ei}=Xe;ei||ge($e);var ii=null==$e||null==(b=$e.mediaWindow)||null==(p=b.windowPanes)||null==(S=p[0])?void 0:S.albums,ai=ii&&ii.map(e=>{var i,a;return{id:e.albumId,titleNode:d(q,{count:e.totalMediaCount,title:e.name}),thumbnailNode:d(Y,{width:"100%",height:"100%",sources:(null==(i=e.mediaList)||null==(a=i[0])?void 0:a.photoSizes)||[]})}}),ti=B(D,G,"mv",v(),ee,z()),li=u(e=>{l({type:"TYPE",typeId:e}),h(_.GALLERY_VIEW_TYPE_CLICK,{typeId:e}),h(_.SOURCE_FILTER_CLICK,{typeId:e})},[l,h]),di=u(e=>{l({type:"CATEGORY",categoryId:e}),h(_.GALLERY_VIEW_CATEGORY_CLICK,{categoryId:e}),h(_.ADVANCED_FILTER_CLICK,{categoryId:e})},[l,h]),ni=u((e,i,a)=>{var t=e&&e.find(e=>e.albumId===a);return t||i!==f.PANO_ALBUM||(t=e&&e.find(e=>e.albumId===f.PANO_ALBUM)),t},[]);t(()=>{$(J===E.RECENCY?"mr":"m")},[J]);var oi=u(e=>{l({type:"SORT",sort:e}),h(_.SORT_TYPE_CHANGE,{sort:e})},[l,h]),[ri,ui]=a(96),[si,Ii]=a(!1),ci=e=>{ui(e)},mi=e=>{Ii(e)},gi=u(()=>{var e,i,a,t,l,n=null==$e||null==(e=$e.mediaWindow)||null==(i=e.windowPanes)||null==(a=i[0])?void 0:a.albums;if(ti&&(null==(t=ti.mediaWindow)||null==(l=t.windowPanes[0])?void 0:l.albums)&&n){var o,{albums:r}=ti.mediaWindow.windowPanes[0];if(G===f.TRAVELER_ALBUM){var u=n&&n.find(e=>e.albumId===f.TRAVELER_ALBUM);o={mediaCounts:{TRAVELER:null==u?void 0:u.totalMediaCount}}}else o=r.find(e=>e.albumId===O);var s=o?o.mediaCounts:null;if(s){var I,c,g,C=ni(n,O,G),v=d("div",{className:"_3dQ704vv"},d("div",null,(null==C?void 0:C.name)||""),d("div",{className:"esecCQcB"},d("div",{className:"_324Aznq8 Znt4eMyJ",onClick:()=>{"mosaic"===Qe&&(h(_.GRID_VIEW_CLICK),ze("grid"))}},d(Ae,{name:"gallery",size:20,color:"grid"===Qe?"primaryIcon":"onDarkIcon"})),d("div",{className:"_324Aznq8 _1ZBMbu-b",onClick:()=>{"grid"===Qe&&(h(_.FLEXGRID_VIEW_CLICK),ze("mosaic"))}},"grid"===Qe&&d("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYxLjIgKDg5NjUzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT5GbGV4SWNvbi1JZGxlPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9IkZsZXhJY29uLUlkbGUiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJVbmV2ZW5JY29uIj4KICAgICAgICAgICAgPHJlY3QgaWQ9IkJvdW5kaW5nQm94IiBmaWxsPSIjRkZGRkZGIiB4PSIwIiB5PSIwIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiPjwvcmVjdD4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjAwMDAwMCwgMi4wMDAwMDApIiBmaWxsPSIjRDZENkQ2Ij4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtQ29weS00IiB4PSIwIiB5PSIwIiB3aWR0aD0iMTAuNSIgaGVpZ2h0PSI3LjUiIHJ4PSIxIj48L3JlY3Q+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktNiIgeD0iNi41IiB5PSI5IiB3aWR0aD0iMTAuNSIgaGVpZ2h0PSI4IiByeD0iMSI+PC9yZWN0PgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS1Db3B5LTUiIHg9IjEyIiB5PSIwIiB3aWR0aD0iNSIgaGVpZ2h0PSI3LjUiIHJ4PSIxIj48L3JlY3Q+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktNyIgeD0iMCIgeT0iOSIgd2lkdGg9IjUiIGhlaWdodD0iOCIgcng9IjEiPjwvcmVjdD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"}),"mosaic"===Qe&&d("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYxLjIgKDg5NjUzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT5GbGV4SWNvbi1Gb2N1c2VkPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9IkZsZXhJY29uLUZvY3VzZWQiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJVbmV2ZW5JY29uIj4KICAgICAgICAgICAgPHJlY3QgaWQ9IkJvdW5kaW5nQm94IiBmaWxsPSIjRkZGRkZGIiB4PSIwIiB5PSIwIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiPjwvcmVjdD4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjAwMDAwMCwgMi4wMDAwMDApIiBmaWxsPSIjMDc4MTcxIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtQ29weS00IiB4PSIwIiB5PSIwIiB3aWR0aD0iMTAuNSIgaGVpZ2h0PSI3LjUiIHJ4PSIxIj48L3JlY3Q+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktNiIgeD0iNi41IiB5PSI5IiB3aWR0aD0iMTAuNSIgaGVpZ2h0PSI4IiByeD0iMSI+PC9yZWN0PgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS1Db3B5LTUiIHg9IjEyIiB5PSIwIiB3aWR0aD0iNSIgaGVpZ2h0PSI3LjUiIHJ4PSIxIj48L3JlY3Q+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktNyIgeD0iMCIgeT0iOSIgd2lkdGg9IjUiIGhlaWdodD0iOCIgcng9IjEiPjwvcmVjdD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"}))));return d("div",{className:"_1RCFZq6C"},d(Me,{header:v,key:"MVControlsContainer",onHeightChange:ci,filterExpand:si},d("div",{className:"_2mKWJSa9"},d("div",{className:"_2CEQhOCR"},d("div",{className:"_3XEUhkVP"},M.string("hr_mediaviewer_filter_by_label")),d("div",{className:"_1L6_jOa9"},d(j,{selectedSourceId:x,sourceCounts:s,onSelect:li}),d(Z,{albums:null==ti||null==(I=ti.mediaWindow)||null==(c=I.windowPanes)||null==(g=c[0])?void 0:g.albums,selectedTypeId:x,onSelect:di,selectedFilterId:O,selectedAlbumId:G,onExpandChange:mi}))),fe("hr_mv_recency_sort_reverse_test")?null:d("div",null,d("div",{className:"_3XEUhkVP"},M.string("hr_mediaviewer_sort_by_label")),d(U,{selectedSort:void 0!==J?J:E.ML,onSelect:oi})))))}}return d("div",{className:"_1RCFZq6C",key:"MVControlsContainer"},d(Me,{header:"",loading:!0,onHeightChange:ci,filterExpand:si},d(m,{height:"100%"})))},[ti,O,x,G,J,di,li,oi,$e,Qe,ni,M,h,si]),Ci=o(null===H);!Ci.current&&Ze.current.setSelectedIndex&&we&&(we.offset||0===we.offset)&&(Ze.current.setSelectedIndex(we.offset),Ci.current=!0);var vi=o(0),Ai=u(i=>{if(i.type===F.close)e();else if(i.type===F.albumSelect){var a,t,d,n=ii&&(null==(a=ii.filter(e=>e.albumId===i.albumId))||null==(t=a[0])||null==(d=t.mediaList)?void 0:d[0]),o=n?{id:n.mediaId,type:n.type}:null;i.albumId===f.PANO_ALBUM?l({type:"ALBUM",albumId:f.ALL_ALBUMS,referenceCompoundMediaId:o,categoryId:f.PANO_ALBUM}):l({type:"ALBUM",referenceCompoundMediaId:null,albumId:i.albumId}),Ke(i.albumId),V(),h(_.GALLERY_VIEW_ALBUM_CLICK,{albumId:i.albumId})}else if(i.type===F.galleryItemClicked)if(i.selectedIndex<0)l({type:"DETAIL_DISMISS"});else{var r=je(i.selectedIndex);l({type:"DETAIL",media:r?{media:r,loading:!1}:{loading:!0},selectedIndex:i.selectedIndex}),h(_.DETAIL_VIEW_GALLERY_CLICK,{tileDetails:{offset:i.offset,mode:i.mode},isMWRedesign:!0}),"grid"===Qe&&h(_.GRID_VIEW_ITEM_CLICK),V(),xe(!1)}else if(i.type===F.fullscreenNav){var u=je(i.newIndex);l({type:"DETAIL",media:u?{media:u,loading:!1}:{loading:!0},selectedIndex:i.newIndex}),vi.current++,vi.current>=5&&(V(),vi.current=0)}else i.type===F.fullscreenClose?(h(_.DETAIL_VIEW_DISMISS,{mvDetailViewCloseType:"controls"===i.closeType?"album_change":i.closeType}),h(_.VIEW_GALLERY_BUTTON_CLICK),l({type:"INVALIDATE_REFERENCE_MEDIA"}),V()):i.type===F.scroll&&(!Je.current&&i.position>0&&(h(_.GALLERY_VIEW_SCROLL_ENGAGEMENT),Je.current=!0),!1!==si&&Ii(!1))},[e,l,je,Qe,ii,V,h,si]);t(()=>{Ze.current.backToTop(),Ze.current.closeDetail(),w(_.GALLERY_VIEW,{locationId:D,albumId:G,categoryId:O,typeId:x},{isMWRedesign:!0}),Je.current=!1},[G,x,O,J,D,w]);var bi=d("div",{className:"_3duVh3Qw"},d(Ee,{layout:Qe}));return d(Se,{close:e,galleryRenderer:(e,i,a)=>{var t=je(e);return t?d(Le,{media:t,width:i,height:a}):null},fullRenderer:e=>{var i=je(e),a=(null==we?void 0:we.totalMediaCount)||0;return i?d(K,{media:i,shareUrl:W(i),totalMediaInfo:{selectedIndex:e,totalCount:a},onSwipeRight:()=>{},onSwipeLeft:()=>{},innateTranslations:!1,businessContact:s,onFullscreenMedia:Ye,locationId:D}):null},galleryOffsetTop:ri-2,controlsRenderer:gi,totalCount:(null==we?void 0:we.totalMediaCount)||0,quickAlbumsDefinition:ai,selectedAlbumId:Fe,actionHandler:Ai,onTileGalleryControls:e=>{Ze.current=e},disableFullscreenNavigation:Ue,disableFullscreenClose:Ue,titleText:i.locationName&&M.string("PhotocC_ffffe1a6",{1:i.locationName}),headerComponent:n,auxiliaryComponent:P,layoutStyle:Qe,detailCloseButton:bi,useHero:!1})},Ze=(e,i)=>({close:a,mediaViewerState:t,dispatchMVAction:l})=>d(Re,{close:a,offer:e,mediaViewerState:t,dispatchMVAction:l,businessContact:i}),Ue=({offer:e,businessContact:i,close:a,mediaViewerState:t,dispatchMVAction:l})=>d(Re,{close:a,offer:e,mediaViewerState:t,dispatchMVAction:l,businessContact:i}),xe=({offer:e,businessContact:i})=>d(Ne,{renderMediaViewer:Ze(e,i)}),Ye=({businessContact:e,offer:i,scrollHideCommerce:a})=>d(_e,{mobileRenderer:()=>d(Be,{businessContact:e,offer:i,scrollHideCommerce:a}),desktopRenderer:()=>d(xe,{businessContact:e,offer:i?()=>i(!0):null})}),He=({businessContact:e,offer:i,close:a,mediaViewerState:t,dispatchMVAction:l})=>d(_e,{mobileRenderer:()=>d(ke,{businessContact:e,offer:i,close:a,mediaViewerState:t,dispatchMVAction:l}),desktopRenderer:()=>d(Ue,{businessContact:e,offer:i?()=>i(!0):null,close:a,mediaViewerState:t,dispatchMVAction:l})});return[()=>{(he=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"MVLocationQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"mediaCount"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":123}}')).__key=0x5d0024840f3b,he.loc.source={body:"5d0024840f3b"},Ne=l(ce(e=>({locationId:e.page.detailId}))(Pe)),we=l(We),Re=l(je),e({MASResponsiveMediaViewer:Ye,MASResponsiveMediaViewerWithoutOpener:He})},[e=>(a=e.useState,t=e.useEffect,l=e.memo,d=e.createElement,n=e.useReducer,o=e.useRef,r=e.useMemo,u=e.useCallback,s=e.Fragment),e=>(I=e.Query,c=e.useQuery),e=>m=e.default,e=>(g=e.mediaGroupIds,C=e.getMediaGroupForString,v=e.getMediaFilterToRetrieveAllPhotos,A=e.getRHRFiltersWindowConfig,b=e.getTitleForMediaGroup,y=e.getFilter,E=e.mediaSortType,f=e.AlbumTypes,p=e.mediaGroups,S=e.getMediaGroupStringForId,M=e.categoryIdsThatAreAlbumIdsSet),e=>(L=e.useMVTrackingWithoutContext,_=e.trackedPageActions,h=e.MVTrackingContext,N=e.useMVTracking),e=>(w=e.generateUrlHashString,R=e.updateHash,T=e.removeHash,V=e.getHash,P=e.initDefaults,D=e.generateMediaViewerStateFromPVRoute,G=e.generateMediaViewerState,W=e.getShareUrl),e=>(O=e.default,k=e.useLocalize),e=>(B=e.useMASFilters,j=e.SourceFilterDropdown,Z=e.AlbumPills,U=e.SortDropdown),e=>(x=e.getSource,Y=e.ResponsiveImage),e=>(H=e.default,F=e.mvActions),e=>K=e.MWDetailViewer,e=>Q=e.getOverlay,e=>z=e.photos360Enabled,e=>J=e.default,e=>(q=e.StockTitle,X=e.ListSection,$=e.ButtonSection,ee=e.Filter,ie=e.Sort,ae=e.Layout),e=>(te=e.useMediaTracking,le=e.NO_PHOTO,de=e.ERROR_MSG,ne=e.PRIMARY_MISSING,oe=e.PRIMARY_OK),e=>(re=e.albumQuery,ue=e.usePaginatedQuery,se=e.albumPageQuery,Ie=e.quickAlbumsQuery),e=>ce=e.connect,e=>me=e.default,e=>ge=e.default,e=>(Ce=e.shouldShow,ve=e.shouldRedirect),e=>Ae=e.default,e=>be=e.categoryIdsThatAreAlbumIdsSet,e=>ye=e.DEFAULT_CONTROLS,e=>Ee=e.GalleryButton,e=>fe=e.featureIsEnabled,e=>pe=e.default,e=>Se=e.DesktopViewer,e=>Me=e.ControlsContainer,e=>Le=e.default,e=>_e=e.default]]},["cDcdfi","5X2em-","Xi-2HZ","wc54S1","yOERmA","NGK_95","0DsHEV","5lGCzf","KwOV1Z","1yAwqb","pCKTMp","rRp3WS","h179JP","D5Fhp2","UuUmq4","zdk9wF","n4rOEs","h74DsO","l6BSGt","8xs-IB","C8GEiR","OMqGt0","IG-DHB","vYoxP4","egvnuD","-i3PJS","imu6sZ","EwqHnS","xTNd-J","MTPLEG","RZRW7o"]]);
