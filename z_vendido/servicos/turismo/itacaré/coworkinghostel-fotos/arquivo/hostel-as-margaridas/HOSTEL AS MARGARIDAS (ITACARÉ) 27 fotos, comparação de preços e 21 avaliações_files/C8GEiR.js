(this.$WP=this.$WP||[]).push(["C8GEiR",(e,a)=>{"use strict";var t,d,n,i,r,o,l,c,s,u,I,m,p,y,v,f,M,g,b,w,L,T,A,O,E,S,h,k,C,N,V,_,x=e=>e.indexOf("#"+N)>=0||e.indexOf(p)>=0,G=e=>e.indexOf(p)>=0,R=(e,a,t)=>{var d=(e=>{if(!e)return L.ALL_ALBUMS;switch(e){case L.FAVORITE_PHOTOS:case L.HOTEL_AND_AMENITIES:case L.POOL_AND_BEACH:case L.ROOM_AND_SUITE_ALBUM:case L.VIDEO:case L.ALL_ALBUMS:return e;default:return L.ALL_ALBUMS}})(a),n=(e=>{if(!e)return L.ALL_ALBUMS;switch(e){case L.TRAVELER_ALBUM:return L.ALL_ALBUMS;default:return e}})(a),i=(e=>{var a=T(A().mediaGroup);if(!e)return a;switch(e){case L.TRAVELER_ALBUM:return O.TRAVELER;default:return a}})(a),r=((e,a)=>{if(!e||e<=0)return null;var t="p";return a===L.VIDEO&&(t="v"),a===L.PANO_ALBUM&&(t="pano"),{id:e,type:t}})(t,a);new I("media-viewer").emit("open",{locationId:e,albumId:d,categoryId:n,typeId:i,referenceCompoundMediaId:r})},H={referenceCompoundMediaId:null,referenceGalleryIndex:null,media:null,selectedIndex:null,addedToHistory:!1},D=(e,a)=>{switch(a.type){case E.setAlbum:return Object.assign({},e,{albumId:a.albumId,typeId:O[S(A().mediaGroup)],categoryId:a.albumId,media:void 0,referenceCompoundMediaId:void 0,referenceGalleryIndex:void 0});case E.setCategory:return Object.assign({},e,{categoryId:a.categoryId,referenceCompoundMediaId:void 0,media:void 0,referenceGalleryIndex:void 0});case E.setType:return Object.assign({},e,{typeId:a.typeId,referenceCompoundMediaId:void 0,media:void 0,referenceGalleryIndex:void 0});case E.openDetail:return Object.assign({},e,{selectedIndex:a.selectedIndex,media:a.media,referenceGalleryIndex:a.referenceGalleryIndex?a.referenceGalleryIndex:e.referenceGalleryIndex,addedToHistory:a.addedToHistory});case E.updateSelectedMedia:return Object.assign({},e,{selectedIndex:a.selectedIndex,media:a.media});case E.updateSelectedMediaObject:return Object.assign({},e,{media:a.media});case E.updateLocationInfo:return Object.assign({},e,{locationName:a.locationName,locationTotalMediaCount:a.locationTotalMediaCount});case E.openGallery:return Object.assign({},e,{media:void 0,referenceCompoundMediaId:void 0,addedToHistory:a.addedToHistory});case E.openViewer:return Object.assign({},e,{},a.state);case E.resetState:return Object.assign({},e,{},H);default:return e}},j=({renderMediaViewer:e,locationId:a})=>d(s,{query:V,variables:{locationId:a}},({fetching:t,data:n})=>{var i,r,o;if(t||!n)return d(P,{renderMediaViewer:e,locationId:a,locationName:""});var l=null==n||null==(i=n.locations)||null==(r=i[0])?void 0:r.name,c=null==n||null==(o=n.locations)?void 0:o[0].mediaCount;return d(P,{renderMediaViewer:e,locationId:a,locationName:l,locationTotalMediaCount:c})}),P=({renderMediaViewer:e,locationId:a,locationName:t,locationTotalMediaCount:s})=>{var u,p=h(),[L,T]=n(!1),[A,O]=n(""),E=y(),[S,N]=i(D,Object.assign({},E,{referenceCompoundMediaId:E.referenceCompoundMediaId,locationId:a})),V=r(I("media-viewer")),_=r(!1),[R,H]=n(null);if(o(()=>{var e=e=>{if(!e.state||!("openMediaViewer"in e.state))return e.state&&"backToGallery"in e.state?(N({type:"GALLERY",addedToHistory:!1}),void("media"in e.state&&H(e.state.media))):void N({type:"DETAIL",media:{loading:!1,forwardableMedia:R},selectedIndex:S.selectedIndex||0,addedToHistory:!0})},a=()=>O(v());return a(),window.addEventListener("popstate",e),window.addEventListener("popstate",a),window.addEventListener("hashchange",a),()=>{window.removeEventListener("popstate",e),window.removeEventListener("popstate",a),window.removeEventListener("hashchange",a)}},[R,S.selectedIndex]),o(()=>{L&&p(k.MV_OPEN,{locationId:a,albumId:S.albumId,categoryId:S.categoryId,typeId:S.typeId})},[L,a,S.albumId,S.categoryId,S.locationId,S.typeId]),o(()=>N({type:"UPDATE_LOCATION_INFO",locationName:t,locationTotalMediaCount:s}),[t,s]),o(()=>{if(L){var e=f(S);O(e),M(S)}},[L,S]),L!==x(A)&&(T(!L),!1===x(A)&&N({type:"RESET_STATE"})),G(A)){var j=g(b(A));j.locationId=a;var P=f(j);O(P)}var B=l(()=>e=>{var t=g(e);t.referenceCompoundMediaId&&t.referenceCompoundMediaId.id<0&&(t.referenceCompoundMediaId=null),N({type:"OPEN",state:Object.assign({locationId:a},t)});var d=f(t);O(d),window.history.replaceState({openMediaViewer:!0},document.title,null),window.history.pushState(null,document.title,null),_.current=!0},[a]),U=c(()=>{_.current?(S.addedToHistory?window.history.go(-2):window.history.back(),_.current=!1):(w(),O(v())),N({type:"RESET_STATE"}),p(k.CLOSE_CLICK,{locationId:a,albumId:S.albumId,categoryId:S.categoryId,typeId:S.typeId})},[S.addedToHistory,S.albumId,S.categoryId,S.typeId,a,p]),F=l(()=>({close:U,mediaViewerState:S,dispatchMVAction:N}),[U,S,N]);o(()=>{var e=V.current;return e.on("open",B),()=>e.off("open",B)},[B]);var W={locationId:a,albumId:S.albumId,categoryId:S.categoryId,typeId:S.typeId,mediaId:null==(u=S.referenceCompoundMediaId)?void 0:u.id,sort:S.sort};return d(C.Provider,{value:W},L?e(F):null,d(m,{keyName:"Escape",callback:U}))};return[()=>{(V=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"MVLocationQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"mediaCount"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":123}}')).__key=0x5d0024840f3b,V.loc.source={body:"5d0024840f3b"},_=t(u(e=>({locationId:e.page.detailId}))(j)),e({MVOpener:_,openMediaViewer:R,shouldRedirect:G,shouldShow:x})},[e=>(t=e.memo,d=e.createElement,n=e.useState,i=e.useReducer,r=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useCallback),e=>s=e.Query,e=>u=e.connect,e=>I=e.default,e=>m=e.default,e=>(p=e.oldHashRouteStart,y=e.getMediaViewerState,v=e.getHash,f=e.generateUrlHashString,M=e.updateHash,g=e.initDefaults,b=e.generateMediaViewerStateFromPVRoute,w=e.removeHash),e=>(L=e.AlbumTypes,T=e.getMediaGroupIdForString,A=e.getMediaFilterToRetrieveAllPhotos,O=e.mediaGroupIds,E=e.mvActions,S=e.getMediaGroupForString),e=>(h=e.useMVTrackingWithoutContext,k=e.trackedPageActions,C=e.MVTrackingContext),e=>N=e.defaultFragmentPrefix]]},["cDcdfi","5X2em-","h74DsO","l6BSGt","8xs-IB","NGK_95","wc54S1","yOERmA","eh0n4_"]]);
