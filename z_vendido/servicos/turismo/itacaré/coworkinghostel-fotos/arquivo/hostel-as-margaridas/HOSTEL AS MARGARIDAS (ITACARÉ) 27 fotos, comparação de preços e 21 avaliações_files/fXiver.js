(this.$WP=this.$WP||[]).push(["fXiver",(e,t)=>{"use strict";var i,n,o,s,r,a,d,l,c,p,_,u,m,g,f={stagingProcs:[],ssrQueriesList:[],listingFields:["sponsoredListingData","delayedPartnerNotificationUrl"],offerFields:[]},y=(e,t,i,n,o)=>{var s={};e&&(s={placement_slot_name:e.sponsoredPlacementSlot.name,location_id:e.locationId,sponsored_type:e.sponsoredType,sl_line_item_id:e.slLineItemId,page_geo_id:t,chosen_location_id:e.locationId,listing_key:e.listingKey,trip_ads_select_guid:e.tripAdsSelectRequestGuid,trip_ads_id:e.tripAdsId}),a(i,n,Object.assign({},s,{},o))},v=(e,t)=>{e.tripAdsSelectRequestGuid&&t(e.tripAdsSelectRequestGuid,"")};return[()=>{m=class extends n{constructor(...e){super(...e),this.render=()=>null}componentDidMount(){var{sponsoredListingData:e,delayedPartnerNotificationUrl:t}=this.props;((e,t)=>{var i,n,o;if(t&&(n=t,(o=document.getElementById("SP_PARTNER_NOTIFICATION_IFRAME"))||((o=document.createElement("iframe")).setAttribute("id","SP_PARTNER_NOTIFICATION_IFRAME"),o.setAttribute("style","position: absolute; visibility: hidden; right: 0; bottom: 0; width: 1px; height: 1px"),_(u.ALL,()=>{document.body&&o&&document.body.appendChild(o)})),o.src=n),e){var s=r().getState();(null==s||null==(i=s.meta)?void 0:i.lineItemsByLoc)&&(((e,t)=>{y(e,t,"impression","paid_backup_sponsored_listing_displayed",{})})(e,s.page.geoId),d(e.partnerImpressionNotificationURL),v(e,l))}})(e,t),e&&globalThis.require(["commerce/offerclick"],t=>{t.on("afterClick",t=>{var i=function(e,t){if(null==e)return{};var i,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}(t,["url"]);((e,t)=>{var i;if(e){var n=r().getState();if(null==n||null==(i=n.meta)?void 0:i.lineItemsByLoc){((e,t,i)=>{var n=t.isBooking?"paid_backup_sponsored_ib_click":"paid_backup_sponsored_meta_click";y(e,i,"action",n,t)})(e,t,n.page.geoId);var o=((e,t)=>"DISCOVERY_META_PREFERENCE"===e.sponsoredType&&"1"===t.slot)(e,t);o&&((e,{route:t},i,n,o)=>{if(e){var r={area:e.sponsoredPlacementSlot.name,click_type:i,dest:n,from:t.page,is_backfill:!0,listing_key:e.listingKey,location_id:e.locationId,sl_line_item_id:e.slLineItemId,trip_ads_id:e.tripAdsId,auction_offer_key:o};fetch("/SponsoredListingCommerce/1.0/increment_click_metric",{method:"POST",headers:{"content-type":"application/json","x-requested-by":window.JS_SECURITY_TOKEN},credentials:"same-origin",body:JSON.stringify(r)}).then(e=>(e.ok||s.debug("Did not get an ok. got: "+e.statusText),e)).catch(e=>{s.error("Error sending commerce click: "+e.message)})}})(e,n,"META",t.providerName,t.ttAOK),v(e,o?c:p)}}})(e,i)})})}},g=o(f,"HR_MainCommerce",e=>{var t,n;return i(m,{sponsoredListingData:null==e||null==(t=e.listing)?void 0:t.sponsoredListingData,delayedPartnerNotificationUrl:null==e||null==(n=e.listing)?void 0:n.delayedPartnerNotificationUrl})}),e("default",g)},[e=>(i=e.createElement,n=e.Component),e=>o=e.bindToHotelReview,e=>s=e.default,e=>r=e.getStore,e=>a=e.trackEventWithContext,e=>(d=e.notifyPartner,l=e.logTripAdsImpressionEvent,c=e.logTripAdsClickEvent,p=e.logTripAdsClickUnpaidEvent),e=>(_=e.requestConsent,u=e.CategoriesEnum)]]},["cDcdfi","ts_HYm","4LU1Ax","aunxON","Jk5sjx","OaSLlg","lMO0v3"]]);
