(this.$WP=this.$WP||[]).push(["1pCAFN",(e,i)=>{"use strict";var t,n,a,r,s,l,o,d,c,m,u,k,p,v,_,b,f,h,g,y,N,T,S={sms:19907,email:55593,clipboard:19905},I=({url:e,itemType:i,itemId:a,action:r,type:s,children:l,disableMcidTracking:o})=>{var{domainName:m}=n(c),u=e.startsWith("/")?`https://${m}${e}`:e,k=d({module:"ShareCta",action:r,context:`${i}|${a}|${u}`,value:s&&"repost_action"!==s?S[s]:void 0});return t.createElement("div",{onClick:k},l(s&&"repost_action"!==s&&!o?((e,i,t)=>{if("LinkPost"===i)return e;var n=`${-1!==e.indexOf("?")?"&":"?"}m=${t}`;return-1!==e.indexOf("#")?e.replace("#",n+"#"):`${e}${n}`})(u,i,S[s]):u))},A=({iconName:e,localizedText:i,onClickFunction:a,size:r})=>{var{cdnPrefix:l}=n(c);return t.createElement("li",{onClick:a,className:k("_3JDcFqle",{Fk50IqWd:"small"===r,_3idHdbyJ:"large"===r})},e.startsWith("/")?t.createElement("img",{src:`${l}${e}`,className:k("Aww4xCHf",{Fk50IqWd:"small"===r,_3idHdbyJ:"large"===r})}):t.createElement(s,{name:e,color:p("cx_brand_refresh_degreen")?"primaryIcon":"bubbleIcon",size:"large"===r?20:18}),t.createElement("span",{className:"_1Su_kTAs"},i))},x=({url:e,itemType:i,size:t})=>{var n,{localize:r}=o();return n="LinkPost"===i?r.string("share_sms_link"):"ReadTrip"===i?r.string("trips_share_email_subject"):"WriteTrip"===i?r.string("trips_collaborate_invite_email_subject"):r.string("link_share_sms_checkthisout"),a(A,{iconName:"text-message",localizedText:r.string("link_share_option_sms"),size:t,onClickFunction:()=>((e,i)=>{var t=`${i} ${e}`;t.length>140&&(t=e),window.location.href="sms:?&body="+encodeURIComponent(t)})(e,n)})},D=["Restaurant_Review","Attraction_Review","MobileAttraction_Review","AttractionProductReview","MobileAttractionProductReview","Hotel_Review","MobileHotel_Review"],C=({url:e,subject:i,firstSentence:t,textBeforeLink:n,textAfterLink:r,size:s})=>{var{localize:l}=o();return a(A,{iconName:"email",localizedText:l.string("link_share_option_email"),size:s,onClickFunction:()=>((e,i,t,n,a,r)=>{var s=encodeURIComponent(i),l=encodeURIComponent(a),o=encodeURIComponent(r),d=encodeURIComponent(t||e("share_email_subject")),c=`${n||e("link_share_sms_checkthisout")}%0D%0A%0D%0A${l?l+"%0D%0A":""}${s}%0D%0A${o?o+"%0D%0A":""}%0D%0A${e("ib_share_booking_download_app")}%0D%0A${e("app_download_url_secure")}`;window.location.href=`mailto:?subject=${d}&body=${c}`})(l.string,e,i,t,n,r)})},E=e=>{var{localize:i}=o();if(D.indexOf(e.itemType)>-1)return a(v,{query:h,variables:{locationId:e.itemId}},({fetching:t,data:n})=>{if(t||!n)return a(C,e);var r=n.locations[0]&&n.locations[0].name||"";return a(C,Object.assign({},e,{subject:i.string("link_share_email_subject",{0:r}),firstSentence:i.string("mobile_here_is_a_place_i_found_8e0"),textBeforeLink:r}))});if("Review"===e.itemType)return a(v,{query:g,variables:{reviewId:e.itemId}},({fetching:t,data:n})=>a(C,t||!n?e:Object.assign({},e,{firstSentence:i.string("share_email_reviews"),textBeforeLink:n.reviews[0]&&n.reviews[0].title||""})));if("Photo"===e.itemType)return a(v,{query:y,variables:{id:e.itemId}},({fetching:t,data:n})=>a(C,t||!n?e:Object.assign({},e,{firstSentence:i.string("share_email_photos"),textBeforeLink:n.photos[0]&&n.photos[0].caption||""})));if("Video"===e.itemType)return a(v,{query:N,variables:{id:e.itemId}},({fetching:t,data:n})=>a(C,t||!n?e:Object.assign({},e,{firstSentence:i.string("share_email_videos"),textBeforeLink:n.videos[0]&&n.videos[0].caption||""})));if("LinkPost"===e.itemType)return a(C,Object.assign({},e,{subject:i.string("share_email_link_subject"),firstSentence:i.string("share_email_link"),textAfterLink:i.string("share_email_link_attribution")}));if("ForumPost"===e.itemType)return a(C,Object.assign({},e,{firstSentence:i.string("share_email_forumtopic")}));if("ForumResponse"===e.itemType)return a(C,Object.assign({},e,{firstSentence:i.string("share_email_forumreply")}));if("WriteTrip"===e.itemType||"ReadTrip"===e.itemType){var t="WriteTrip"===e.itemType;return a(v,{query:T,variables:{id:e.itemId}},({fetching:n,data:r})=>{var s=e;if(!n&&r){var l=r.trips&&r.trips.find(i=>i.id===e.itemId),o={tripName:l&&l.title||""},d=_(l);s=Object.assign({},e,{firstSentence:i.string("trips_share_email_hey"),subject:i.string("trips_share_email_subject"),textBeforeLink:i.string("trips_share_email_body_v2",o)}),t?(s.subject=i.string("trips_collaborate_invite_email_subject"),s.textBeforeLink=d?i.string("trips_collaborate_invite_email_body_v2",o):i.string("trips_collaborate_invite_email_body_collaborator_version",o)):d||(s.subject=i.string("trips_share_email_subject"),s.textBeforeLink=i.string("trips_email_share_collaborator_version",o))}return a(C,s)})}return a(C,e)},w=({url:e,itemType:i,itemId:a,disableMcidTracking:r,headerComponent:s,close:l})=>{var{viewportCategory:o}=n(m);return t.createElement("div",{className:"_2qNMBNc2"},s,"MOBILE"===o&&t.createElement(I,{action:"share_select",itemType:i,itemId:a,url:e,type:"sms",disableMcidTracking:r},e=>t.createElement(x,{url:e,itemType:i,size:"small"})),t.createElement(I,{url:e,itemType:i,itemId:a,action:"share_select",type:"email",disableMcidTracking:r},e=>t.createElement(E,{url:e,itemType:i,itemId:Number(a),size:"small"})),t.createElement(I,{action:"share_select",itemType:i,itemId:a,url:e,type:"clipboard",disableMcidTracking:r},e=>t.createElement(f,{url:e,size:"small",close:l})))},F=({fixed:e,url:i,itemType:n,itemId:a,disableMcidTracking:r,shiftX:s,shiftY:l,children:o,headerComponent:d,alignEdge:c,above:m})=>t.createElement(u,{local:!0,closeButton:!1,fixed:e,above:m,below:!0,alignEdge:c,shiftX:s,shiftY:l,shiftArrow:s,arrowType:"small",contents:e=>t.createElement(w,{url:i,itemType:n,itemId:a,disableMcidTracking:r,headerComponent:d,close:e})},o),O=({url:e,itemType:i,itemId:n,styleAsSocialAction:a,headerComponent:r,onClick:s,alignEdge:l,above:o,shiftX:d,shiftY:c,hideText:m,disableMcidTracking:u})=>t.createElement(t.Fragment,null,t.createElement(F,{url:e,itemType:i,itemId:n,disableMcidTracking:u,shiftX:d,shiftY:c,headerComponent:r,alignEdge:l,above:o},(r,l)=>t.createElement(I,{itemType:i,itemId:n,url:e,action:"share_button_click",disableMcidTracking:u},()=>t.createElement(j,{onClick:e=>{s&&s(e),l()},target:r,styleAsSocialAction:a,hideText:m})))),j=({onClick:e,target:i,styleAsSocialAction:n,hideText:a})=>t.createElement("div",{onClick:e,className:n?"_3RO180pc":"_3Qn6d96f"},t.createElement("span",{ref:i},t.createElement("span",{className:"_1-taKoBl"},t.createElement(s,{name:"share",color:"inherit"})),!a&&t.createElement("span",{className:"_2_4z5Nd6"},t.createElement(l,{id:"link_share_share"})," "))),L=e=>{var i="MOBILE"===e.viewportCategory;return a(u,{above:!0,alignEdge:i?"right":"left",shiftX:i?12:-28,shiftY:-8,shiftArrow:i?8:12,arrowType:"small",contents:()=>a("span",{className:"JNF5ebbW"},a(l,{id:"social_Coming_soon"})),local:!0},(e,t)=>a(j,{onClick:t,target:e,styleAsSocialAction:!0,hideText:i}))};return[()=>{I.defaultProps={type:null,disableMcidTracking:!1},A.defaultProps={onClickFunction:()=>!1},(h=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"PoiDetails"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":103}}')).__key=30493395597162,h.loc.source={body:"1bbbcc03376a"},(g=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"ReviewDetails"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"reviewId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"reviews"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"reviewIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"reviewId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"title"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":99}}')).__key=8049210694612,g.loc.source={body:"07521a581bd4"},(y=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"PhotoDetails"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"id"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"photos"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"photoIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"id"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"caption"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":86}}')).__key=0xf892e2b2908,y.loc.source={body:"0f892e2b2908"},(N=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"VideoDetails"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"id"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"videos"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"videoIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"id"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"caption"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":86}}')).__key=0x71275c1e8de7,N.loc.source={body:"71275c1e8de7"},(T=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"TripDetails"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"id"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"trips"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"tripIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"id"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"title"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"owner"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"isMe"},"arguments":[],"directives":[]}]}}]}}]}}],"loc":{"start":0,"end":117}}')).__key=0x7db41de4facd,T.loc.source={body:"7db41de4facd"},C.defaultProps={firstSentence:"",subject:"",textBeforeLink:"",textAfterLink:""},f=class extends r{constructor(...e){super(...e),this.state={copied:!1},this.copyAndClose=(e,i)=>{var t=b.copy(e);return t&&(this.setState({copied:!0}),setTimeout(()=>i(),3e3)),t}}render(){return a(A,{iconName:"link",size:this.props.size,localizedText:this.state.copied?a(l,{id:"link_share_link_copied"}):a(l,{id:"link_share_option_clipboard"}),onClickFunction:this.state.copied?void 0:()=>this.copyAndClose(this.props.url,this.props.close)})}},F.defaultProps={fixed:!1,shiftX:0,shiftY:0,headerComponent:null,alignEdge:"right"},O.defaultProps={styleAsSocialAction:!1,headerComponent:null,onClick:void 0,above:!1,shiftX:6,shiftY:4},j.defaultProps={styleAsSocialAction:!1},e("default",O),e({DisabledAction:L,SharePopover:F})},[e=>(t=e.default,n=e.useContext,a=e.createElement,r=e.Component),e=>s=e.default,e=>(l=e.default,o=e.useLocalize),e=>d=e.useGARecordCallback,e=>(c=e.Environment,m=e.Device),e=>u=e.default,e=>k=e.default,e=>p=e.featureIsEnabled,e=>v=e.Query,e=>_=e.isOwner,e=>b=e.default]]},["cDcdfi","OMqGt0","0DsHEV","fsml46","2R4xv2","eDFcUX","jSLlaY","-i3PJS","5X2em-","eFKnUp","vLhQxP"]]);
