(this.$WP=this.$WP||[]).push(["ce1YGz",(e,o)=>{"use strict";var t,n,r,l,a,i,s,c,p,d,u,O,m,b,g,R,E,_,f,T,v,j,y,h,w,P,L,k,I,A,M,N=["Video","Photo","LinkPost"],F=["Review","ReviewMgmtResponse","Photo","Video","LinkPost","ForumPost","Trip","RoomTip","ApiLocationTopic","ApiTopicPosting"],D=({sectionActor:e,deleteObject:o,onEdit:r,untagObject:l,closeOverflowOnScroll:a,sectionObject:i,sectionObjectForType:s,overrideItems:p})=>{var{current:d}=t("ReportIAP:"+Math.random());return n(A,null,n(E,{pid:40474},t=>n(c,{name:d},c=>n(R,null,O=>n(u,{profile:e},u=>n(M,{sectionActor:e,reportModalName:d,onReport:c,logInteraction:O,loginGate:t,deleteObject:o,sectionObjectForType:s,onEdit:r,untagObject:l,sectionObject:i,overrideItems:p,gatedAction:u,closeOverflowOnScroll:a}))))))};return[()=>{e("WrappedSectionOverflowMenu",M=class extends r{constructor(...e){super(...e),this.renderReportModal=e=>{var{reportModalName:o}=this.props,t=this.props.sectionActor&&this.props.sectionActor.userId,r=f(e);switch(e.__typename){case"RoomTip":case"Review":return n(I,Object.assign({},r,{modalName:o,key:"report"}));case"ReviewMgmtResponse":return n(k,{modalName:o,userId:t,responseId:r.contentId});case"Photo":return n(L,Object.assign({},r,{modalName:o,key:"report"}));case"Video":return n(P,Object.assign({},r,{modalName:o,key:"report"}));case"LinkPost":return n(w,Object.assign({},r,{modalName:o,key:"report"}));case"ForumPost":return n(h,Object.assign({},r,{modalName:o,key:"report"}));case"Trip":return n(y,Object.assign({},r,{modalName:o,key:"report"}));case"Repost":return n(j,Object.assign({},r,{modalName:o,key:"report"}));case"ApiLocationTopic":return n(v,Object.assign({},r,{modalName:o,key:"report"}));case"ApiTopicPosting":return n(T,Object.assign({},r,{modalName:o,key:"report"}));default:return a.error(`Tried to report unsupported report type ${e.__typename}:${r.contentId}`),null}},this.renderList=({reportEnabled:e,editEnabled:o,deleteEnabled:t,untagEnabled:r,followEnabled:a,onDelete:c,onUntag:p,mergedSectionObjectForType:d})=>{var{onEdit:u,onReport:R,loginGate:E,logInteraction:f,sectionActor:T,closeOverflowOnScroll:v}=this.props,j=[],y=_({module:"Reviews",action:"review_report_click",context:(null==T?void 0:T.userId)||""}),h=_({module:"Reviews",action:"review_follow_click",context:(null==T?void 0:T.userId)||""});return e&&j.push(n(m,{key:"report",onClick:({event:e,close:o})=>{f(e,"report"),y();var t=()=>{R(),e.stopPropagation(),o()};E?E().then(()=>{t()}):t()}},s("social_report_1"))),o&&j.push(n(m,{key:"edit",onClick:({event:e,close:o})=>{"function"==typeof u&&u(),e.stopPropagation(),o()}},n("span",null,s("trips_edit_CTA")," "))),t&&c&&j.push(n(m,{key:"delete",onClick:({event:e,close:o})=>{f(e,"delete"),"function"==typeof c&&c(),e.stopPropagation(),o()}},n("span",{"data-test-target":"delete-item"},s("inbox_swipe_delete")," "))),a&&T&&j.push(n(m,{key:"follow",onClick:({event:e,close:o})=>{this.props.gatedAction(),h(),e.stopPropagation(),o()}},n(O,{profile:T}))),r&&p&&j.push(n(m,{key:"untag",onClick:({event:e,close:o})=>{f(e,"untag"),"function"==typeof p&&p(),e.stopPropagation(),o()}},n("span",null,s("social_untag_me")," "))),n(l,null,e?this.renderReportModal(d.REPORT):null,n(b,{closeOnScroll:v,onClick:e=>f(e,"overflowMenuClick"),iconColor:i("cx_brand_refresh_degreen")?"BLACK":"GRAY"},n(g,null,j)))}}render(){var e,{deleteObject:o,onEdit:t,untagObject:r,sectionActor:a,sectionObject:s,sectionObjectForType:c,overrideItems:u={}}=this.props;if(!s&&!c)return null;var O,m,b=s?(O=["REPORT","DELETE","EDIT","FOLLOW","UNTAG"].map(e=>[e,s]),m={},O.forEach(([e,o])=>{m[e]=o}),m):{},g=Object.assign({},b,{},c),R=a&&a.isMe,E=i("social_report_iap_enabled")&&(i("social_report_repost_iap_enabled")||"Repost"!==g.REPORT.__typename)&&("Repost"===g.REPORT.__typename&&F.includes(null==(e=g.REPORT.repostedObject)?void 0:e.__typename)||F.includes(g.REPORT.__typename))&&!1!==u.REPORT&&(u.REPORT||!R),_=i("social_edit_enabled")&&N.includes(g.EDIT.__typename)&&t&&!(!1===u.EDIT)&&(!0===u.EDIT||R),f=i("social_delete_enabled")&&o&&g.DELETE&&!1!==u.DELETE&&(u.DELETE||R),T=i("social_follow_enabled")&&!1!==u.FOLLOW&&a&&(u.FOLLOW||!R),v=i("social_at_referencing_profile_links")&&r&&g.UNTAG&&!1!==u.UNTAG;return E||_||f||T||v?f?n(p,{objectType:g.DELETE.__typename,deleteObject:o,shiftY:-5,below:!0,alignEdge:"right"},(e,o)=>n(l,null,n(d,{untagObject:r,shiftY:-5,below:!0,alignEdge:"right"},(e,t)=>n(l,null,this.renderList({reportEnabled:E,editEnabled:_,deleteEnabled:f,untagEnabled:v,followEnabled:T,mergedSectionObjectForType:g,onDelete:o,onUntag:t}),n("span",{className:"_3V8URHDq",ref:e}))),n("span",{className:"_3V8URHDq",ref:e}))):n(d,{untagObject:r,shiftY:-5,below:!0,alignEdge:"right"},(e,o)=>n(l,null,this.renderList({reportEnabled:E,editEnabled:_,deleteEnabled:f,untagEnabled:v,followEnabled:T,mergedSectionObjectForType:g,onDelete:null,onUntag:o}),n("span",{className:"_3V8URHDq",ref:e}))):null}}),M.defaultProps={onEdit:void 0,untagObject:void 0,deleteObject:void 0,sectionObjectForType:void 0,closeOverflowOnScroll:!1},e("SectionOverflowMenu",D)},[e=>(t=e.useRef,n=e.createElement,r=e.Component,l=e.Fragment),e=>a=e.default,e=>i=e.featureIsEnabled,e=>s=e.localize,e=>c=e.Opener,e=>(p=e.DeleteConfirmation,d=e.UntagConfirmation),e=>(u=e.FollowAction,O=e.FollowText),e=>(m=e.OverflowUIListItem,b=e.OverflowUI,g=e.OverflowUIList),e=>R=e.InteractionLogger,e=>E=e.SocialLoginGate,e=>_=e.useGARecordCallback,e=>(f=e.reportPropsFromObject,T=e.ReportLocationTopicPostModal,v=e.ReportLocationTopicModal,j=e.ReportRepostModal,y=e.ReportTripModal,h=e.ReportForumModal,w=e.ReportLinkModal,P=e.ReportVideoModal,L=e.ReportPhotoModal,k=e.ReportOwnerResponseModal,I=e.ReportReviewModal),e=>A=e.HideOnReadonly]]},["cDcdfi","4LU1Ax","-i3PJS","535agn","pT-O8u","zrL722","eKupCR","jLmCNP","pZzSdK","JFHNGL","fsml46","ZHQ6mz","9wfvtu"]]);
