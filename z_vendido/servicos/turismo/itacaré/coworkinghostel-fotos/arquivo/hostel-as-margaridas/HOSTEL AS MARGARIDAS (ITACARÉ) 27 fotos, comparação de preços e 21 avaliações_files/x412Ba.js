(this.$WP=this.$WP||[]).push(["x412Ba",(e,t)=>{"use strict";var n,s,a,o,i,l,c,d,r,p,u,g,h,_,m,I,v,f,k,x,T=(e,t)=>{e&&fetch("/AnswersAjax",{credentials:"same-origin",method:"POST",body:n(e),headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(t)},w=({locationId:e,topicId:t,text:n,requestValidation:s,onResponse:a})=>{if(n){var o={act:"ap",psttxt:n,tpcid:t,pid:-1,altsessid:s.altSessionId,token:s.csrfToken,lcid:e,"g-recaptcha-response":s.captchaResponse.token,geetest_challenge:s.captchaResponse.challenge,geetest_validate:s.captchaResponse.validate,geetest_seccode:s.captchaResponse.seccode,useJson:!0};T(o,a)}},q=({locationId:e,text:t,optIn:n,redirect:s,requestValidation:a,onResponse:o})=>{if(t){var i={act:n?"ats":"at",topicText:t,detail:e,pid:-1,optIn:n,altsessid:a.altSessionId,token:a.csrfToken,"g-recaptcha-response":a.captchaResponse.token,geetest_challenge:a.captchaResponse.challenge,geetest_validate:a.captchaResponse.validate,geetest_seccode:a.captchaResponse.seccode,redirect:s};T(i,o)}},P=({id:e,token:t,onResponse:n})=>{e&&T({act:"dp",pstid:e,token:t},n)},R=({id:e,token:t,onResponse:n})=>{e&&T({act:"dt",tpcid:e,token:t},n)},N=(e,t,n,s)=>{var o={altsessid:n.altSessionId||"",act:"av",pstid:t,vs:e,pid:-1,token:n.csrfToken,useJson:!0};T(o,s),a({module:"faq",action:"click",context:1===e?"upvote":"downvote"})},S=({postingId:e,requestValidation:t,onResponse:n})=>{N(1,e,t,n)},C=({postingId:e,requestValidation:t,onResponse:n})=>{N(-1,e,t,n)},b=({topic:e,query:t,children:n,expanded:s,newPostingId:a})=>{var i=!(!a||e.topPosting&&e.topPosting.id===a),l=e.topPosting?[e.topPosting]:[],d={fetchTopic:s,fetchPosting:i,topicId:s?e.id:null,postingId:a};return o(c,{query:t,variables:d,requestPolicy:"network-only"},({fetching:t,data:a})=>((e,t,n,s,a,o,i)=>{if(t&&n){var l=[o.topPosting];return a&&l.unshift(null),n&&l.push(...Array(o.postCount-1).fill(null)),s(l)}if(!e)return s(i);var c=a&&e.postings&&e.postings[0]?e.postings[0]:null,d=n&&e.topics&&e.topics[0]?e.topics[0].postings:i;return s(n||a?c?[c,...d.filter(e=>e&&e.id!==c.id)]:d:d.length>0?[d[0]]:[])})(a,t,s,n,i,e,l))},y=({loggedInUserId:e,csrfToken:t,altSessId:n,call:s,isMobile:a,children:o})=>o(()=>{if(e)s({csrfToken:t,altSessId:n});else{var o={flow:"CORE_COMBINED",pid:-1,userRequestedForce:!0,onSuccess:()=>s({csrfToken:t,altSessId:n})};globalThis.require(["trjs!ta/registration/RegOverlay"],e=>e.showRegOverlay(null,null,a,o))}}),$=e=>o("ul",null,e.location&&e.location.geoName?o("li",{className:"_15W8CK--"},r("qa_guidelines_relevant_visit",{loc_name:e.location.geoName})):null,e.location&&e.location.parentGeoId?o("li",{className:"_15W8CK--"},p(r("qa_guidelines_forums_new_tab",{forum_link:h({page:"ShowForum",g:e.location.parentGeoId})}))):null,o("li",{className:"_15W8CK--"},r("qa_guidelines_objective")),o("li",{className:"_15W8CK--"},r("qa_guidelines_links")),o("li",{className:"_15W8CK--"},p(r("qa_guidelines_adhere_new_tab",{help_link:"https://www.tripadvisorsupport.com/hc/articles/201996887"})))),A=({modalName:e,location:t})=>o(_,{name:e},o("div",{className:"_2OPAlLoc"},r("qa_guidelines_before")),o("div",{className:"WV3Vp0bJ"},r("qa_please_keep")),o($,{location:t})),E={guidelinesControl:"_2td7kfne",community:"_1oDb9HD5",linkText:"_4cgod4ga"},L=({locationId:e,topicId:t,postingId:n,contentLanguage:a,pageLanguage:i,children:c})=>{if(a===i)return null;var d,r=a.replace(/^zh/,"zh-"),p=["toverlay",e,t,n,r,i].join("-");return d=n?`/MachineTranslation?g=0&d=${e}&t=${t}&lp=${n}&page=posting&sl=${r}&tl=${i}`:`/MachineTranslation?g=0&d=${e}&t=${t}&page=topic&sl=${r}&tl=${i}`,o(l,null,o(g,{name:p},c),o(_,{name:p},o(s,{url:d},({loading:e,data:t})=>e?o(m,null):o("div",{className:"_1I0I5UEX",dangerouslySetInnerHTML:{__html:t}}))))};return[()=>{f={submitAnswer:w,submitQuestion:q,deleteAnswer:P,deleteQuestion:R,upVote:S,downVote:C},k=d(e=>({loggedInUserId:e.auth.loggedInUserId,csrfToken:e.auth.csrfToken,altSessId:e.auth.altSessId,isMobile:"MOBILE"===e.meta.device.viewportCategory}))(y),e("PostingGuidelinesLink",v=class extends i{constructor(...e){super(...e),this.state={expand:!1},this.toggleExpansion=()=>{this.setState(e=>({expand:!e.expand}))}}render(){var{theme:e,location:t,inlineExpansion:n}=this.props,{expand:s}=this.state,a=s?"caret-up":"caret-down";return o(l,null,o("div",{className:e&&E[e]||E.guidelinesControl,onClick:n?this.toggleExpansion:null},n?o("span",{className:E.linkText},r("qa_posting_guidelines")):o(l,null,o(g,{name:"posting_guidelines_"+t.locationId},e=>o("span",{className:E.linkText,onClick:e},r("qa_posting_guidelines"))),o(A,{modalName:"posting_guidelines_"+t.locationId,location:t})),n?o(u,{name:a}):null),s?o($,{location:t}):null)}}),v.defaultProps={theme:void 0,inlineExpansion:!1},L.defaultProps={postingId:void 0},x=d(e=>({pageLanguage:I(e)}))(L),e({AnswerProvider:b,AuthGated:k,PostingGuidelinesLink:v,TranslateModal:x,answersAjax:f})},[e=>(n=e.formEncode,s=e.AjaxRequest),e=>a=e.default,e=>(o=e.createElement,i=e.Component,l=e.Fragment),e=>c=e.Query,e=>d=e.connect,e=>(r=e.localize,p=e.unescaped),e=>u=e.Icon,e=>g=e.Opener,e=>h=e.buildUrl,e=>_=e.Modal,e=>m=e.LoadingSpinner,e=>I=e.contentLangFromState]]},["kBiZlJ","Jk5sjx","cDcdfi","5X2em-","h74DsO","535agn","_qQcW3","pT-O8u","N4pTU2","HKQFPT","V08PS7","oDn4x0"]]);
