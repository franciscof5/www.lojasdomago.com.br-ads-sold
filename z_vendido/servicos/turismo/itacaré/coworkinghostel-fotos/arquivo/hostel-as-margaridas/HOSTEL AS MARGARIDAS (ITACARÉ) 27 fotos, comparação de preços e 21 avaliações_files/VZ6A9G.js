(this.$WP=this.$WP||[]).push(["VZ6A9G",(e,a)=>{"use strict";var t,i,n,d,o,r,l,s,c,u,m,I,p,v,f,g,y,b,M,E,C,T,h,k,N,O,S,A,R,_,V,D,L,w,j,x,P,F,G=({close:e})=>{var a=R();return a?d(_,{mobileRenderer:()=>d(V,null,d("div",{className:"_1jZBJT2z osOMxu_D"},d(L,{onBack:e}),d(E,{height:"100%",width:"100%"}))),desktopRenderer:()=>{if(!a)return null;var{width:t,height:i}=a;if(!t||!i)return null;var n=D(t,i,!0),o={top:n.mh+"px",bottom:n.mh+"px",left:n.mw+"px",right:n.mw+"px"};return d(V,null,d("div",{className:"_1jZBJT2z",style:o},d("div",{className:"_39LkNmus"},d(w,{onCloseClick:e})),d("div",{className:"_2CiOpdhC"},d(E,{height:"100%",width:"100%"}))))}}):null},B={referenceCompoundMediaId:null,media:null,selectedIndex:null,addedToHistory:!1},H=(e,a)=>{switch(a.type){case"ALBUM":return Object.assign({},e,{albumId:a.albumId,typeId:a.albumId!==T.TRAVELER_ALBUM?h[k(N().mediaGroup)]:h.TRAVELER,categoryId:a.categoryId?a.categoryId:a.albumId,media:void 0,referenceCompoundMediaId:a.referenceCompoundMediaId});case"CATEGORY":return Object.assign({},e,{categoryId:a.categoryId,referenceCompoundMediaId:void 0,media:void 0});case"TYPE":return Object.assign({},e,{typeId:a.typeId,referenceCompoundMediaId:void 0,media:void 0});case"SORT":return Object.assign({},e,{sort:a.sort,referenceCompoundMediaId:void 0,media:void 0});case"DETAIL":return Object.assign({},e,{selectedIndex:a.selectedIndex,media:a.media});case"INVALIDATE_REFERENCE_MEDIA":return Object.assign({},e,{media:null,referenceMedia:void 0,referenceCompoundMediaId:void 0});case"UPDATE_REFERENCE_MEDIA":return Object.assign({},e,{referenceMedia:a.referenceMedia,media:{media:a.referenceMedia,loading:!1}});case"DETAIL_DISMISS":return Object.assign({},e,{media:e.referenceMedia?{loading:!1,media:e.referenceMedia}:null});case"UPDATE_LOCATION_INFO":return Object.assign({},e,{locationName:a.locationName,locationTotalMediaCount:a.locationTotalMediaCount});case"OPEN":return Object.assign({},e,{},a.state);case"RESET_STATE":return Object.assign({},e,{},B);default:return e}},U=({locationId:e,offer:a,businessContact:t})=>d(c,{query:P,variables:{locationId:e}},({fetching:i,data:n})=>{var o,r,l;if(i||!n)return d(W,{locationId:e,locationName:"",offer:a,businessContact:t});var s=null==n||null==(o=n.locations)||null==(r=o[0])?void 0:r.name,c=null==n||null==(l=n.locations)?void 0:l[0].mediaCount;return d(W,{locationId:e,locationName:s,locationTotalMediaCount:c,offer:a,businessContact:t})}),W=({locationId:e,locationName:n,locationTotalMediaCount:c,offer:u,businessContact:E})=>{var T,h=O(),[k]=t(g()),[N,R]=t(j(k)),[_]=t(((e,a)=>{if(x(a)){var t=y(b(a));return t.locationId=e,t}return M(a)})(e,k)),[V,D]=o(H,Object.assign({},_,{locationId:e})),L=r(m("media-viewer")),w=r(!1),{window:P,document:F}=globalThis;((e,a)=>{var[n,d]=t("");i(()=>{var t=setTimeout(()=>{if(e){var t=p(a);d(t),v(a)}else d(""),f()},0);return()=>clearTimeout(t)},[e,a,a.referenceCompoundMediaId,a.selectedIndex])})(N,V);var[B,U]=t(null);i(()=>{var e=e=>{if(!e.state||!("openMediaViewer"in e.state))return e.state&&"backToGallery"in e.state?(D({type:"DETAIL_DISMISS"}),void("media"in e.state&&U(e.state.media))):void D({type:"DETAIL_OPEN",media:{loading:!1,forwardableMedia:B},selectedIndex:V.selectedIndex||0});R(!1)};return P?(P.addEventListener("popstate",e),()=>{P.removeEventListener("popstate",e)}):()=>{}},[B,V.selectedIndex,P]),i(()=>{N&&h(S.MV_OPEN,{locationId:e,albumId:V.albumId,categoryId:V.categoryId,typeId:V.typeId})},[N,V.albumId,V.categoryId,e,V.typeId,h]),i(()=>D({type:"UPDATE_LOCATION_INFO",locationName:n,locationTotalMediaCount:c}),[n,c]);var W=l(()=>a=>{var t=y(a);t.referenceCompoundMediaId&&t.referenceCompoundMediaId.id<0&&(t.referenceCompoundMediaId=null);var i=p(t);P&&F&&(P.history.replaceState({openMediaViewer:!0},F.title,null),P.history.pushState(null,F.title,i)),w.current=!0,R(!0),D({type:"OPEN",state:Object.assign({locationId:e},t)})},[e,P,F]),Z=s(()=>{w.current&&P&&(V.addedToHistory?P.history.go(-2):P.history.back(),w.current=!1),h(S.CLOSE_CLICK,{locationId:e,albumId:101,categoryId:101,typeId:0}),R(!1),D({type:"RESET_STATE"})},[e,V.addedToHistory,h,P]),Y=l(()=>C.onUsage(()=>a("L09Y4I"),"MASResponsiveMediaViewerWithoutOpener",d(G,{close:Z})),[Z]);i(()=>{var e=L.current;return e.on("open",W),()=>e.off("open",W)},[W]);var J={locationId:e,albumId:V.albumId,categoryId:V.categoryId,typeId:V.typeId,mediaId:null==(T=V.referenceCompoundMediaId)?void 0:T.id,sort:V.sort};return d(A.Provider,{value:J},N&&d(Y,{offer:u,businessContact:E,close:Z,mediaViewerState:V,dispatchMVAction:D}),d(I,{keyName:"Escape",callback:Z}))};return[()=>{(P=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"MVLocationQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"mediaCount"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":123}}')).__key=0x5d0024840f3b,P.loc.source={body:"5d0024840f3b"},F=n(u(e=>({locationId:e.page.detailId}))(U)),e("default",F)},[e=>(t=e.useState,i=e.useEffect,n=e.memo,d=e.createElement,o=e.useReducer,r=e.useRef,l=e.useMemo,s=e.useCallback),e=>c=e.Query,e=>u=e.connect,e=>m=e.default,e=>I=e.default,e=>(p=e.generateUrlHashString,v=e.updateHash,f=e.removeHash,g=e.getHash,y=e.initDefaults,b=e.generateMediaViewerStateFromPVRoute,M=e.generateMediaViewerState),e=>E=e.default,e=>C=e.component,e=>(T=e.AlbumTypes,h=e.mediaGroupIds,k=e.getMediaGroupForString,N=e.getMediaFilterToRetrieveAllPhotos),e=>(O=e.useMVTrackingWithoutContext,S=e.trackedPageActions,A=e.MVTrackingContext),e=>R=e.useViewport,e=>_=e.default,e=>(V=e.default,D=e.computeMVOverlayMetrics),e=>L=e.default,e=>w=e.default,e=>(j=e.shouldShow,x=e.shouldRedirect)]]},["cDcdfi","5X2em-","h74DsO","l6BSGt","8xs-IB","NGK_95","Xi-2HZ","pLbCP4","wc54S1","yOERmA","Bk-fue","RZRW7o","YPSylI","D5Fhp2","V-gj9y","C8GEiR"]]);
