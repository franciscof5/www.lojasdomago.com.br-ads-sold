(this.$WP=this.$WP||[]).push(["eh0n4_",(e,t)=>{"use strict";var a,r,u,l,i,n,d,s,c,m,g=(e,t,a)=>{var r,u=`${a}${e}`,l=!1;return u+=(r=t.mediaId)?`/${r.id}:${r.type||"u"}`:"",(t.albumId||t.typeId||t.categoryId)&&(u+="/?",l=!0),l&&((t.albumId||0===t.albumId)&&(u+=`albumid=${t.albumId}&`),(t.typeId||0===t.typeId)&&(u+=`type=${t.typeId}&`),(t.categoryId||0===t.categoryId)&&(u+=`category=${t.categoryId}&`),"&"===u.substring(u.length-1)&&(u=u.substring(0,u.length-1))),u},o=(e,t)=>{var a=e.split("/");a.splice(0,2);var r,u,l,i,n,d=null,s=null,m="u";switch(a.length){case 0:break;case 1:[d]=a;break;case 2:a[1].indexOf("=")>0?[d,n]=a:[d,s]=a;break;case 3:[d,s,n]=a;break;default:[d,s,n]=a}if(null!=n){var g=new URLSearchParams(n);g.has("albumid")&&(u=g.get("albumid")),g.has("type")&&(l=g.get("type")),g.has("category")&&(i=g.get("category"))}if(null!=s){var o=s.split(":");r=Number(o.shift()),m=o.shift()}return{locationId:Number(d),state:{mediaId:null!=r?{id:r,type:c(m)}:null,albumId:Number(u),typeId:Number(l),categoryId:Number(i),sort:t}}},I=(e,t,c,I)=>{var[{fragment:y},{navigateToFragment:b}]=a(s),f=e||0,p=r(t),v=r(y),h=null!=c&&""!==c?`/media-${c}/`:"/media/",{sort:N}=t||{},$=u(()=>y&&y.startsWith(h)?o(y,N):null,[y,h,N]),[R,F]=l(null==$?void 0:$.state);return i(()=>{R&&!$?F(null):!R&&$&&F($.state)},[$,R]),i(()=>{var e=!d(p.current,t),a=v.current!==y;if(a&&!e)y&&!y.startsWith(h)?I({type:m.close}):$&&I({type:m.routeNavigate,newState:$.state});else if(!a&&e){var r=t?g(f,t,h):"";if(r!==y){var u=((e,t)=>null===e&&null!==t||!(null==e?void 0:e.mediaId)&&(null==t?void 0:t.mediaId)?"FRAGMENT_PUSH":"IN_PLACE")(p.current,t);b(r,u)}}p.current=t,v.current=y},[t,y,h,$,b,f,I]),{clearFragment:n(()=>{y&&b("","IN_PLACE")},[y,b]),initialRouteState:R}};return[()=>{e("default",I),e({defaultFragmentPrefix:"/media/",generateFragmentRoute:g,getStateFromFragment:o,useRouteHandler:I})},[e=>(a=e.useContext,r=e.useRef,u=e.useMemo,l=e.useState,i=e.useEffect,n=e.useCallback),e=>d=e.default,e=>s=e.Route,e=>(c=e.validateMediaType,m=e.actions)]]},["cDcdfi","YwNsO_","2R4xv2","wc54S1"]]);
