(this.$WP=this.$WP||[]).push(["TXSrH1",(e,t)=>{"use strict";var o,n,a,i,l,s,r,c,u,d,_,m,p,v,w,b,h,C,g,k,f,N,y,I,T,R,S,U,O,E,q,A,x,P,D,F,Q,H,j,L,G,M,B,V,Y,W,z,X,J={loading:!0,writeUserReviewUrl:"",topicsUrl:"",postPhotosUrl:"",roomTipsCount:0,questionsCount:0,reviewsCount:0,hasNoContent:!1,isActiveOwner:!1,locationId:0,geoId:0},K=({locationId:e,children:t})=>{var o,[{data:n,fetching:i}]=_({query:M,variables:{locationId:e},pause:!e||e<0});if(!i&&n&&n.locations&&n.locations[0]){var l,s,r=n.locations[0],c=r.topicCount||0,u=(null==(l=r.reviewSummary)?void 0:l.count)||0;o={loading:i,writeUserReviewUrl:r.writeUserReviewUrl||"",topicsUrl:r.topicsUrl||"",postPhotosUrl:r.postPhotosUrl||"",roomTipsCount:r.roomTipsCount||0,questionsCount:c,reviewsCount:u,hasNoContent:0===c&&0===u,isActiveOwner:(null==(s=r.currentUserOwnerStatus)?void 0:s.isValid)||!1,locationId:r.locationId||0,geoId:r.parentGeoId||0}}else o=J;return a(V,{value:o},t)},$=({locationId:e,geoId:t,writeUserReviewUrl:o,className:n,pid:i,cookieDomain:l,onClick:s,children:r})=>e<=0||t<=0?null:a("a",{href:o||`/UserReview-g${t}-d${e}`,target:"_blank",className:n,onClick:e=>{s&&s(e),i&&i>0&&g(i,l)}},r),Z=e=>a("div",{className:s("_2z5r_pGn","ui_column is-4")},a(k,{name:e.icon,className:"_1WoB6aIA"}),a("div",{className:"_1gIpSKzu"},e.title),a("div",{className:"_2aQ5f2vY"},e.subtitle),e.children("_3APqCars")),ee=()=>a(B,null,({locationId:e,geoId:t,writeUserReviewUrl:o})=>a(Z,{icon:"pencil-paper",title:m("hr_write_your_review"),subtitle:m("hr_write_your_review_sub_title")},n=>a(h,null,({hasDraftReview:i})=>a(Y,{locationId:e,geoId:t,writeUserReviewUrl:o,pid:40537,className:s("ui_button primary",n),onClick:e=>b(e,{module:"low_content_collection_cta_review",action:"start_submission",context:"POI|Hotel",dstServlet:"UserReviewEdit",value:0,once:!0})},(e=>m(e?"hotel.review.finish.review_fffff216":"hr_write_a_review"))(i))))),te=({module:e,children:t,location:o})=>a(N,{name:"photo-uploader"},n=>{var i,l=!1;return r("daodao_bypass_email_for_sns_login_web")&&(i="CONTENT_SUBMISSION",l=!0),a(f,{flow:i,forceLogin:l},a=>t(()=>{w({module:e,location:o,action:"start_submission",context:"POI|Hotel"}),a().then(n)}))}),oe=()=>a(W,{module:"low_content_collection_cta_photo"},e=>a(Z,{icon:"camera",title:m("hr_share_your_photo"),subtitle:m("hr_share_your_photo_subtitle_period")},t=>a("span",{className:s("ui_button primary",t),onClick:e},m("hr_post_a_photo")))),ne=()=>a(B,null,({topicsUrl:e})=>a(Z,{icon:"forums",title:m("hr_get_answers"),subtitle:m("hr_get_answer_subtitle")},t=>a("a",{href:e+"#AskQuestionForm",target:"_blank",className:s("ui_button primary",t),onClick:e=>{b(e,{module:"low_content_collection_cta_question",action:"start_submission",context:"POI|Hotel",value:0,once:!0})}},m("hr_ask_a_question")))),ae=e=>a(K,{locationId:e.locationId},a(B,null,({loading:t,isActiveOwner:o,questionsCount:n,reviewsCount:i,roomTipsCount:l})=>{var u=5;switch(e.selectedTab){default:case"Reviews":u=i;break;case"Questions":u=n;break;case"RoomTips":u=l}return t||o||u>=5&&0!==i?null:a(c,{testTarget:"low_content_cta",className:s("ui_columns","HARN6rWR",0===i?"_1hpdKTrg":""),section:"communityContent"},a(ee,null),a(oe,null),r("answers_hotels")&&a(ne,null))})),ie=({locationId:e})=>a("a",{href:"/ManagementCenter-d"+e,className:"ui_button primary",onClick:t=>{b(t,{module:"owner_cta",action:"owner_visit_mc_middle",context:e.toString(),value:0,once:!0})}},m("restaurant_owners_visit_your_owner_mangement_center")),le=e=>{var t=e=>m(e?"hotel.review.finish.review_fffff216":"hr_write_a_review"),o={Reviews:()=>a(B,null,({writeUserReviewUrl:o})=>a(h,null,({hasDraftReview:n})=>a(Y,{locationId:e.locationId,geoId:e.geoId,writeUserReviewUrl:o,pid:40537,className:"ui_button primary",onClick:e=>{b(e,{module:"content_submission|review",action:"start_submission",context:"POI|Hotel",dstServlet:"UserReviewEdit",value:0,once:!0})}},t(n)))),Questions:()=>r("answers_hotels")?a(N,{name:"community_qa_question_form"},e=>a(R,{call:e},e=>a(T,{type:"primary",onClick:()=>{S("hr-community-tab").emit("selectTab","Questions",!0),e(),w({module:"content_submission|question",action:"start_submission",context:"POI|Hotel",value:0,once:!0})}},m("hr_ask_a_question")))):null},n={Reviews:({close:o})=>a(B,null,({writeUserReviewUrl:n})=>a(h,null,({hasDraftReview:i})=>a(Y,{locationId:e.locationId,geoId:e.geoId,writeUserReviewUrl:n,pid:40537,className:"_3h3EtFpo",onClick:e=>{o(),b(e,{module:"contextual_cta_dropdown_review",action:"start_submission",context:"POI|Hotel",dstServlet:"UserReviewEdit",value:0,once:!0})}},a(k,{name:"pencil-paper",className:"_2KtrMAie"}),a("span",{className:"NYjG3c-9"},t(i))))),Photos:()=>a(W,{module:"contextual_cta_dropdown_photo"},e=>a("span",{className:"_3h3EtFpo",onClick:()=>{e()}},a(k,{name:"camera",className:"_2KtrMAie"}),a("span",{className:"NYjG3c-9"},m("hr_post_a_photo")))),Questions:({close:e})=>r("answers_hotels")?a(N,{name:"community_qa_question_form"},t=>a(R,{call:t},t=>a("span",{className:"_3h3EtFpo",onClick:()=>{e(),S("hr-community-tab").emit("selectTab","Questions",!0),t(),w({module:"contextual_cta_dropdown_question",action:"start_submission",context:"POI|Hotel",value:0,once:!0})}},a(k,{name:"forums",className:"_2KtrMAie"}),a("span",{className:"NYjG3c-9"},m("hr_ask_a_question"))))):null},i=({selectedTab:e})=>a("div",{className:"_2cefqRQ2"},a(e&&"RoomTips"!==e&&o[e]||o.Reviews)),l=()=>a(I,{below:!0,fullBleed:!0,local:!0,arrowType:"none",closeButton:!1,alignEdge:"right",shiftY:2,contents:e=>Object.keys(n).map(t=>a(n[t],{close:e,key:t}))},(e,t,o,n)=>a(U,{className:"VJDpTPtT",events:n?["onTouchStart"]:["onClick","onTouchStart","onTouchEnd"]},a("div",{ref:e,className:"_3F5OybD-",onClick:()=>{(n?o:t)(),w({module:"contextual_cta_dropdown_toggle",action:"open",context:"POI|Hotel",value:0,once:!0})}},a(k,{name:n?"caret-up":"caret-down"}))));return a(y,null,a(B,null,({loading:t,hasNoContent:o,isActiveOwner:n})=>t||o?null:n?a(ie,{locationId:e.locationId}):a("div",{className:"A14zz6ip"},a("div",{className:"_3qxuOgY5","data-test-target":"ugc_cta_button"},a(i,{selectedTab:e.selectedTab}),a(l,null)))))},se=()=>a(B,null,({topicsUrl:e,questionsCount:t})=>t>3?a("a",{href:e,target:"_blank",className:"_38_qo_Ae"},m("qa_see_all_n_questions",{nQuestions:t})):null),re=e=>a(B,null,t=>a(G,Object.assign({},e,{context:t}),e.children)),ce=e=>{switch(e){case"Reviews":return m("common_Reviews");case"Questions":return m("mobile_questions_answers");case"RoomTips":return m("tabs_room_tips_title_fffff661");default:return""}},ue=e=>{var t=r("loyalty_points_for_hr_war_a")||r("loyalty_points_for_hr_war_b")||r("loyalty_points_for_hr_war_c"),n=t||r("loyalty_points_for_hr_war_control"),a=A();l(()=>{n&&a({module:"loyalty_poc",action:t?"loyalty_pts_copy_displayed":"loyalty_pts_copy_ghost"})},[t,n,a]);var i=o.useContext(j);return o.useEffect(()=>(i.add(u.reviews),()=>{i.delete(u.reviews)}),[i]),o.createElement(K,{locationId:e.locationId},o.createElement(c,{section:"reviews",theme:"none"},o.createElement(E,null,o.createElement(re,Object.assign({},e,{countClass:"_1aRY8Wbl",typeClass:"_20lVcjvj"}),t=>t.map(t=>o.createElement(x,{key:t.tab},n=>o.createElement(q,{active:t.tab===e.selectedTab,key:t.tab,onClick:t.count>0?()=>{n({elementType:t.tab,actionName:"HR_GROUPING_TAB"}),e.setSelectedTab(t.tab,!0)}:()=>!1,className:s("PsUadXSP","test-target-tab-"+t.tab,t.count>0?null:"_1iN8G9aQ")},o.createElement(k,{name:t.icon,className:"TSj5XybX"}),o.createElement("span",{"data-test-target":`CC_TAB_${t.tab}_LABEL`},v(t.label)))))))),o.createElement(c,{theme:"tabbed-top",joinable:!z.has(e.selectedTab),section:"communityContent"},o.createElement(d,{text:o.createElement(o.Fragment,null,ce(e.selectedTab),"Reviews"===e.selectedTab?o.createElement(D,null):null,"Questions"===e.selectedTab?o.createElement(se,null):null),subText:!t||"Reviews"!==e.selectedTab&&"RoomTips"!==e.selectedTab?null:r("loyalty_points_for_hr_war_a")?m("earn_100_pts_towards_review_badge"):r("loyalty_points_for_hr_war_b")?m("write_review_earn_100_pts"):r("loyalty_points_for_hr_war_c")?m("write_review_earn_badges"):null,noDivider:z.has(e.selectedTab)},"Reviews"===e.selectedTab?o.createElement(F,{locationId:e.locationId}):null,o.createElement(le,{selectedTab:e.selectedTab,locationId:e.locationId,geoId:e.geoId})),o.createElement(P,null),"Reviews"===e.selectedTab?o.createElement(Q,{locationId:e.locationId}):null),o.createElement(H,{mediaType:"photo",linkUploaderModalName:"link-uploader",modalName:"photo-uploader",pid:40537,locationId:e.locationId}))},de=(e=0)=>{var t=document.querySelector("#REVIEWS"),o=document.querySelector("body");if(o&&t){var n=o.getBoundingClientRect().top;window.scrollTo(0,t.getBoundingClientRect().top-n-e)}},_e={};return[()=>{(M=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"CommunityContent"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"parentGeoId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"writeUserReviewUrl"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"topicsUrl"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"postPhotosUrl"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"currentUserOwnerStatus"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"isValid"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"roomTipsCount"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"topicCount"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"reviewSummary"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"count"},"arguments":[],"directives":[]}]}}]}}]}}],"loc":{"start":0,"end":306}}')).__key=0x8d0a2959d52a,M.loc.source={body:"8d0a2959d52a"},({Consumer:B,Provider:V}=n(J)),Y=C(e=>({cookieDomain:e.meta.cookieDomain}))($),W=C(e=>({location:e.page.detailId}))(te),z=new Set(["Questions","RoomTips"]),G=class extends i{constructor(...e){super(...e),this.state={defaultTabCheckCompleted:!1}}componentDidUpdate(){this.state.defaultTabCheckCompleted||this.defaultTabCheck()}defaultTabCheck(){var{loading:e,hasNoContent:t,questionsCount:o,reviewsCount:n}=this.props.context;e||(this.setState({defaultTabCheckCompleted:!0}),!t&&0===n&&o>0&&this.props.setSelectedTab("Questions"))}render(){var{loading:e,hasNoContent:t,questionsCount:o,reviewsCount:n,roomTipsCount:i}=this.props.context,{selectedTab:l,children:s,countClass:c,typeClass:u}=this.props;if(t)return null;if(e)return a(L,{height:"120px"});var d={selectedTab:l},_=[Object.assign({tab:"Reviews",icon:"pencil-paper",count:n,label:m("hr_community_tab_reviews",{countClass:c,typeClass:u,count:p.formatNumber("integer",n)})},d),Object.assign({tab:"Questions",icon:"forums",count:o,label:m("hr_community_tab_questions_2",{countClass:c,typeClass:u,count:p.formatNumber("integer",o)})},d),Object.assign({tab:"RoomTips",icon:"lightbulb-on",count:i,label:m("hr_community_tab_room_tips",{countClass:c,typeClass:u,count:p.formatNumber("integer",i)})},d)];return s(r("answers_hotels")?_:_.filter(e=>"Questions"!==e.tab))}},X=O((e,t)=>(P.stage(e,t),(e,t)=>t))(ue),e("default",_e),e({ContextualCTA:le,HEADER_SCROLL_OFFSET:66,H_R_CONTENT_COLLECTION_PID:40537,LowContentCTA:ae,PHOTO_UPLOADER_MODAL_NAME:"photo-uploader",QUESTION_FORM_MODAL_NAME:"community_qa_question_form",TabBarAboveHeader:X,scrollIntoView:de})},[e=>(o=e.default,n=e.createContext,a=e.createElement,i=e.Component,l=e.useEffect),e=>s=e.default,e=>r=e.featureIsEnabled,e=>(c=e.Section,u=e.sectionToElementIdMapping,d=e.ComplexHeader),e=>_=e.useQuery,e=>(m=e.localize,p=e.globalize,v=e.unescaped),e=>(w=e.default,b=e.trackClick),e=>h=e.DraftReviewConsumer,e=>C=e.connect,e=>g=e.setPIDCookie,e=>k=e.Icon,e=>f=e.SocialLoginGate,e=>N=e.Opener,e=>y=e.HideOnReadonly,e=>I=e.default,e=>T=e.default,e=>R=e.AuthGated,e=>S=e.default,e=>U=e.default,e=>O=e.bind,e=>(E=e.GroupingTabs,q=e.GroupingTab),e=>A=e.useGARecorder,e=>x=e.BBMLInteractionLogger,e=>(P=e.SensitiveIssuesBadge,D=e.ReviewControlNotice,F=e.PointsCampaign,Q=e.ConnectionReviewsCTA),e=>H=e.MediaUploaderModal,e=>j=e.SectionIdContext,e=>L=e.default]]},["cDcdfi","jSLlaY","-i3PJS","5UpkPg","5X2em-","535agn","Jk5sjx","AQbkfS","h74DsO","_wYjwe","_qQcW3","JFHNGL","pT-O8u","9wfvtu","eDFcUX","PCbs_l","x412Ba","l6BSGt","_cZwhS","RiHMo-","roCOIO","fsml46","Nz6yD_","QmAjD5","Qsot8_","cW2RI4","Xi-2HZ"]]);
