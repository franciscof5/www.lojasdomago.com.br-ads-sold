(this.$WP=this.$WP||[]).push(["08Bf-q",(e,t)=>{"use strict";var i,s,o,n,_,l,a,r,d,c,p,u,m,g,y,S=(e,t,i)=>{fetch("/data/1.0/tap/recordEvent",{method:"POST",headers:new Headers({"content-type":"application/json","x-requested-by":window.JS_SECURITY_TOKEN}),credentials:"same-origin",body:JSON.stringify({eventType:i,requestGuid:e,externalId:t})}).then(e=>(e.ok||console.error("Did not get an ok. got: "+e.statusText),e)).catch(e=>{console.error("Error sending TripAds click event: "+e.message)})},v=()=>{var e=r().getState(),{page:t,tracking:i}=e;return{page_geo_id:t.geoId,request_num:t.crossSells?t.crossSells.requestNumber:0,request_uid:i.uid?i.uid:void 0}},k=(e,t,i,s)=>{if(e){var o,c,p,u,m,g=e;o=((e,t,i,s)=>{var o=v();return Object.assign({},o,{is_dynamic_listing:!1,placement_slot_name:e.placement_slot_name,slot_index:i,location_id:t,sponsored_type:e.sponsored_type,candidate_location_ids:e.candidate_location_ids,chosen_location_id:t,has_valid_candidate:!0,current_state:"location_shown",opportunity_uid:e.opportunity_uid,dfp_lineitem_id:e.dfp_lineitem_id,sl_line_item_id:e.sl_line_item_id,trip_ads_id:e.trip_ads_id,ik:e.impression_key,tt_placement:e.tt_placement,trip_ads_select_guid:e.trip_ads_select_request_guid,listing_key:s})})(g,t,i,s),c=g.is_backfill,a("action",c?"paid_backup_sponsored_listing_click":"dfp_sponsored_listing_click",o),_(l.HOTELS_SP_CLICK,((e,t,i)=>{var s=r().getState();return{is_member:s.auth.isMember,device_type:s.meta.device.userAgentCategory?s.meta.device.userAgentCategory.toLowerCase():"",locationId:t,slot:e.placement_slot_name,trip_ads_select_guid:e.trip_ads_select_request_guid,listing_key:i}})(g,t,s)),((e,t)=>{var i=new Date;i.setTime(i.getTime()+1e4);var s={expires:i};n.set("sponsOppId",t,s),n.set("sponsLineItem",e,s)})(g.sl_line_item_id,g.opportunity_uid),p=((e,t,i,s)=>{var o=r().getState();return{area:e.placement_slot_name,click_type:"HR",dest:"Hotel_Review",from:o.route.page,listing_key:s,impression_key:e.impression_key,is_backfill:e.is_backfill,line_item_id:e.dfp_lineitem_id,sl_line_item_id:e.sl_line_item_id,trip_ads_id:e.trip_ads_id,location_id:t,slot:i,tt_placement:e.tt_placement,gosox:e.gosox}})(g,t,i,s),fetch("/SponsoredListingCommerce/1.0/click",{method:"POST",headers:new Headers({"content-type":"application/json","x-requested-by":window.JS_SECURITY_TOKEN}),credentials:"same-origin",body:JSON.stringify(p)}).then(e=>(e.ok||e.statusText,e)).catch(e=>{console.error("Error sending commerce click: "+e.message)}),d(g.partner_notification_url),g.trip_ads_select_request_guid&&(u=g.trip_ads_select_request_guid,m=g.opportunity_uid,S(u,m,"CLICKED"))}},h=(e,t)=>{if(t){var i,s,o=t,n=v(),c=Object.assign({},n,{is_dynamic_listing:!1,placement_slot_name:o.placement_slot_name,slot_index:e.indexInList,location_id:e.locationId,sponsored_type:o.sponsored_type,candidate_location_ids:o.candidate_location_ids,chosen_location_id:e.locationId,has_valid_candidate:!0,current_state:"location_shown",opportunity_uid:o.opportunity_uid,dfp_lineitem_id:o.dfp_lineitem_id,sl_line_item_id:o.sl_line_item_id,trip_ads_id:o.trip_ads_id,trip_ads_select_guid:o.trip_ads_select_request_guid,listing_key:e.listingKey});a("impression","paid_backup_sponsored_listing_displayed",c),_(l.HOTELS_SP_IMPRESSION,((e,t,i)=>{var s=r().getState();return{is_member:s.auth.isMember,device_type:s.meta.device.userAgentCategory?s.meta.device.userAgentCategory.toLowerCase():"",locationId:t,slot:e.placement_slot_name,trip_ads_select_guid:e.trip_ads_select_request_guid,listing_key:i}})(o,e.locationId,e.listingKey)),o.trip_ads_select_request_guid&&(i=o.trip_ads_select_request_guid,s=o.opportunity_uid,S(i,s,"IMPRESSED")),d(o.partner_impression_notification_url)}},T=({locationName:e,xsellConfig:t})=>i(o.Provider,{value:{sponsoredListingClickHandler:k,sponsoredListingImpressionHandler:h}},i(y,{locationName:e,xsellConfig:t}));return[()=>{y=c((e,t)=>{var i,s,o,n,_,l=null==e||null==(i=e.page)||null==(s=i.crossSells)||null==(o=s.endpointResults)?void 0:o.locationMap,a=null==l?void 0:l[t.locationName],r=null==a?void 0:a.crossSells;return r&&(a.crossSells=r.map(e=>{var{maxAccommodations:t,tagTranslations:i={}}=p(),s=t&&t[e.crossSellType]?t[e.crossSellType]:4;return Object.assign({},e,{seeAllUrl:u(e.crossSellType),title:m(e.crossSellType),tooltip:g(e.crossSellType),maxAccommodations:s,tagTranslations:i})})),Object.assign({},t,{locationData:a,requestNumber:(null==(n=e.page)||null==(_=n.crossSells)?void 0:_.requestNumber)||0})})(s),e("ConnectedPageLocationWithContext",T)},[e=>i=e.createElement,e=>(s=e.PageLocation,o=e.CrossSellContext),e=>n=e.default,e=>(_=e.trackHolisticEvent,l=e.holisticEvents,a=e.trackEventWithContext),e=>r=e.getStore,e=>d=e.notifyPartner,e=>c=e.connect,e=>(p=e.getUIAssets,u=e.getSeeAllUrlForCrossSellType,m=e.getTitleForCrossSellType,g=e.getTooltipForCrossSellType)]]},["cDcdfi","PC2KpF","vmXh3M","Jk5sjx","aunxON","OaSLlg","h74DsO","A6b--N"]]);
